<?xml version="1.0" encoding="utf-8"?>

<dictionary>
  <item key="data"><![CDATA[# Import a standard function, and get the HTML request and response objects.
from Products.PythonScripts.standard import html_quote
request = container.REQUEST
RESPONSE =  request.RESPONSE

print context.manage_page_header(context,request)
print context.manage_tabs(context,request)
print '<form classs="form-horizontal" method="post" enctype="multipart/form-data">'
print '<input type="hidden" name="form_id" value="manage_addClient"/>'
print '<input type="hidden" name="lang" value="%s"/>'%request['lang']
print '<legend>Insert client...</legend>'

# --- Insert client.
# ---------------------------------
if request.form.get('btn')==context.getZMILangStr('BTN_INSERT'):
	message = []
	home = context.getHome()
	home.manage_addFolder(id=request['id'],title=request['title'])
	folder_inst = getattr(home,request['id'])
	request.set('lang_label',context.getLanguageLabel(request['lang']))
	zms_inst = context.initZMS(folder_inst, 'content', request['titlealt'], request['title'], request['lang'], request['manage_lang'], request)
	zms_inst.setConfProperty('Portal.Master',home.id)
	for id in context.getMetaobjIds():
		zms_inst.metaobj_manager.acquireMetaobj(id)
	context.setConfProperty('Portal.Clients',context.getConfProperty('Portal.Clients',[])+[request['id']])
	message.append(context.getZMILangStr('MSG_INSERTED')%request['id'])
	request.response.redirect(context.url_append_params('%s/manage_main'%zms_inst.absolute_url(),{'lang':request['lang'],'manage_tabs_message':'<br/>'.join(message)}))

# --- Display initial insert form.
# ---------------------------------
else:
	print '<div class="form-group">'
	print '<label for="id" class="col-sm-3 control-label mandatory">%s</label>'%(context.getZMILangStr('ATTR_ID'))
	print '<div class="col-sm-9"><input class="form-control" name="id" type="text" size="25"></div>'
	print '</div>'
	print '<div class="form-group">'
	print '<label for="title" class="col-sm-3 control-label mandatory">%s</label>'%(context.getZMILangStr('ATTR_TITLE'))
	print '<div class="col-sm-9"><input class="form-control" name="title" type="text" size="50"></div>'
	print '</div>'
	print '<div class="form-group">'
	print '<label for="titlealt" class="col-sm-3 control-label mandatory">%s</label>'%(unicode(context.getZMILangStr('ATTR_TITLEALT'),'utf-8'))
	print '<div class="col-sm-9"><input class="form-control" name="titlealt" type="text" size="80"></div>'
	print '</div>'
	print '<div class="form-group">'
	print '<div class="controls save">'
	print '<button type="submit" name="btn" class="btn btn-primary" value="%s">%s</button>'%(unicode(context.getZMILangStr('BTN_INSERT'),'utf-8'),unicode(context.getZMILangStr('BTN_INSERT'),'utf-8'))
	print '<button type="submit" name="btn" class="btn btn-default" value="%s">%s</button>'%(unicode(context.getZMILangStr('BTN_CANCEL'),'utf-8'),unicode(context.getZMILangStr('BTN_CANCEL'),'utf-8'))
	print '</div>'
	print '</div>'

# ---------------------------------

print '</form>'
print context.manage_page_footer(context,request)

return printed
]]>
  </item>
  <item key="description"></item>
  <item key="exec" type="int">0</item>
  <item key="icon_clazz"></item>
  <item key="id"><![CDATA[manage_addClient]]></item>
  <item key="meta_type"><![CDATA[Script (Python)]]></item>
  <item key="meta_types" type="list">
    <list>
      <item><![CDATA[ZMS]]></item>
    </list>
  </item>
  <item key="name"><![CDATA[Client...]]></item>
  <item key="roles" type="list">
    <list>
      <item><![CDATA[ZMSAdministrator]]></item>
    </list>
  </item>
</dictionary>
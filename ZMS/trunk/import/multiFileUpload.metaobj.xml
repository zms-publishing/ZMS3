<?xml version="1.0" encoding="utf-8"?>
<dictionary>
<item key="key"><![CDATA[multiFileUpload]]></item>
<item key="value" type="dictionary"><dictionary>
<item key="__obj_attrs__" type="list"><list>
<item type="dictionary"><dictionary>
<item key="id"><![CDATA[uploader]]></item>
<item key="keys" type="list"><list>
<item><![CDATA[input_file]]></item>
<item><![CDATA[rad_upload]]></item>
</list>
</item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[Uploader]]></item>
<item key="repetitive" type="int">0</item>
<item key="type"><![CDATA[select]]></item>
</dictionary>
</item>
<item type="dictionary"><dictionary>
<item key="id"><![CDATA[files]]></item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[File]]></item>
<item key="repetitive" type="int">1</item>
<item key="type"><![CDATA[ZMSFile]]></item>
</dictionary>
</item>
<item type="dictionary"><dictionary>
<item key="custom"><![CDATA[<dtml-comment>--// BO f_css_defaults //--</dtml-comment>
table.filelist td,
table.filelist td div {
padding:3px;
margin:0px;
vertical-align:top;
font-size:11px;
}

table.filelist td img {
margin-right:3px;
margin-bottom:-2px;
}
table.filelist td a {
text-decoration:none;
font-weight:bold;
}
table.filelist td a:hover span.filename {
text-decoration:underline;
}

table.filelist td div.small {
font-size:10px;
line-height:15px;
margin-bottom:.5em;
}

table.fileupload td div {
margin:0px;
}
table.filelist th,
table.fileupload th {
color:#666;
}

table.fileupload td {
padding-right:0px;
margin-right:0px;
}
table.fileupload td textarea {
height:3em;
width:96%
}

table.filelist {
border-collapse:collapse !important;
border:1px solid #fff;
}
table.filelist td {
border-spacing:0px solid white;
border:1px solid #fff;
}
div.uploadmsg {
color:red;
background-color:#FFFFD0;
border:1px solid #999;
margin:6px 0px;
padding:4px;
width:98%;
}
<dtml-comment>--// EO f_css_defaults //--</dtml-comment>
]]></item>
<item key="id"><![CDATA[f_css_defaults]]></item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[CSS]]></item>
<item key="repetitive" type="int">0</item>
<item key="type"><![CDATA[method]]></item>
</dictionary>
</item>
<item type="dictionary"><dictionary>
<item key="custom"><![CDATA[<!--// BO actionDelete //-->
<dtml-if "REQUEST.get('btn')==getLangStr('ACTION_DELETE',lang)"
 ><dtml-if "REQUEST.get('ids')"
  ><dtml-let count="_.len(REQUEST.get('ids'))"
    ><dtml-call "manage_delObjects(ids=REQUEST.get('ids'))"
    ><div class="system-msg" 
      style="background-color:#FFFFD0;border:1px solid #999;margin:6px 0px;padding:4px;width:99%;"
    ><dtml-var "getLangStr('MSG_DELETED',lang)%count"></div>
  </dtml-let
 ></dtml-if
></dtml-if>
<!--// EO actionDelete //-->]]></item>
<item key="id"><![CDATA[actionDelete]]></item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[Action: Delete]]></item>
<item key="repetitive" type="int">0</item>
<item key="type"><![CDATA[method]]></item>
</dictionary>
</item>
<item type="dictionary"><dictionary>
<item key="custom"><![CDATA[<!--// BO actionUpload //-->
<dtml-if "REQUEST.get('btn')==getLangStr('BTN_INSERT',lang)">

<dtml-if "getObjProperty('uploader',REQUEST)=='rad_upload'">
<!-- JAVA UPLOAD -->
<dtml-if form_id>
<dtml-let session_id="SESSION.getId()" 
          key="'file'" 
          ob_id="session_id+'_'+form_id+'_'+key">
<!-- DEBUG INFO:  form_id=<dtml-var form_id> // ob_id=<dtml-var ob_id> //-->
<dtml-if "ob_id in temp_folder.objectIds()">
<dtml-let f="_.getattr(temp_folder,ob_id).data" 
          filename="_.getattr(temp_folder,ob_id).title" 
          upload="{'data':f,'filename':filename}">
<dtml-call "temp_folder.manage_delObjects([ob_id])">
<dtml-call "REQUEST.set('creator',_.str(AUTHENTICATED_USER))">
<dtml-call "manage_addZMSCustom('ZMSFile',{
     'id_prefix':'files',
     'titlealt':upload['filename'][_.max(_.string.rfind(upload['filename'], '/'),
       _.string.rfind(upload['filename'], '\\'),
       _.string.rfind(upload['filename'], ':'),)+1:],
     'title':REQUEST.get('title',upload['filename'][_.max(_.string.rfind(upload['filename'], '/'),
       _.string.rfind(upload['filename'], '\\'),
       _.string.rfind(upload['filename'], ':'),)+1:]),
     'attr_dc_creator':REQUEST.get('creator'),
     'attr_dc_coverage':'global.%s'%REQUEST.get('lang'),
     'file':upload},
     REQUEST)">
<div class="system-msg uploadmsg"
   ><dtml-var "getLangStr('MSG_INSERTED',lang)%upload['filename'][_.max(_.string.rfind(upload['filename'], '/'),
       _.string.rfind(upload['filename'], '\\'),
       _.string.rfind(upload['filename'], ':'),)+1:]">
</div>
</dtml-let>
</dtml-if>

</dtml-let>
</dtml-if>

<dtml-else>

<!-- HTML UPLOAD -->
<dtml-if "REQUEST.get('upload')">
<dtml-call "REQUEST.set('creator',_.str(AUTHENTICATED_USER))">
<dtml-call "manage_addZMSCustom('ZMSFile',{
     'id_prefix':'files',
     'titlealt':REQUEST.get('upload').filename[_.max(_.string.rfind(REQUEST.get('upload').filename, '/'),
       _.string.rfind(REQUEST.get('upload').filename, '\\'),
       _.string.rfind(REQUEST.get('upload').filename, ':'),)+1:],
     'title':REQUEST.get('title',REQUEST.get('upload').filename[_.max(_.string.rfind(REQUEST.get('upload').filename, '/'),
       _.string.rfind(REQUEST.get('upload').filename, '\\'),
       _.string.rfind(REQUEST.get('upload').filename, ':'),)+1:]),
     'attr_dc_creator':REQUEST.get('creator'),
     'attr_dc_coverage':'global.%s'%REQUEST.get('lang'),
     'file':{'data':REQUEST.get('upload'),'filename':REQUEST.get('upload').filename}},
     REQUEST)">
<div class="system-msg uploadmsg"
   ><dtml-var "getLangStr('MSG_INSERTED',lang)%REQUEST.get('upload').filename[_.max(_.string.rfind(REQUEST.get('upload').filename, '/'),
       _.string.rfind(REQUEST.get('upload').filename, '\\'),
       _.string.rfind(REQUEST.get('upload').filename, ':'),)+1:]">
</div>
</dtml-if>

</dtml-if>

</dtml-if>
<!--// EO actionUpload //-->]]></item>
<item key="id"><![CDATA[actionUpload]]></item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[Action: Upload]]></item>
<item key="repetitive" type="int">0</item>
<item key="type"><![CDATA[method]]></item>
</dictionary>
</item>
<item type="dictionary"><dictionary>
<item key="custom"><![CDATA[<!-- BO bodyContentZMSCustom_multiFileUpload -->
<!-- modif fh 2009-04-146 -->
<dtml-unless "_.string.find(URL,'/manage')>=0">
<dtml-call "REQUEST.set( 'ZMI_TIME',ZopeTime().timeTime())">
<dtml-call "REQUEST.set('ZMS_INSERT',_.True)">
</dtml-unless>
<dtml-var "getObjProperty('actionDelete',REQUEST)">
<dtml-var "getObjProperty('actionUpload',REQUEST)">

<form method="post" enctype="multipart/form-data" action="."> 
<input type="hidden" name="form_id" value="<dtml-var ZMI_TIME>"/>
<table class="ZMSTable filelist" width="97%" cellpadding="0" cellspacing="0">
<tr>
 <th colspan="2"><dtml-var "_.len(getObjChildren('files',REQUEST))"> <dtml-var "getLangStr('ATTR_FILE',lang)">-<dtml-var "getLangStr('ATTR_OBJECTS',lang)"></th>
</tr>
<dtml-in "getObjChildren('files',REQUEST)" reverse>
 <dtml-let file="getObjProperty('file',REQUEST)">
  <tr>
   <td valign="top"><input type="checkbox" 
    <dtml-if "AUTHENTICATED_USER.getId()!=getObjProperty('change_uid',REQUEST)">
     disabled="disabled"
    </dtml-if>
    name="ids:list" value="<dtml-var id>"/></td>
   <td width="100%"><a href="<dtml-var "file.getHref(REQUEST)">" 
     title="<dtml-var "getTitle(REQUEST)">"
     target="_blank"><img 
     src="<dtml-var "file.getMimeTypeIconSrc()">" 
     title="<dtml-var "file.getContentType()">" border="0" align="absmiddle"
     /><span class="filename"><dtml-var "file.getFilename()" size="32"></span></a> <span class="filesize"><dtml-var "file.getDataSizeStr()"></span>
     <div class="small">Von: <em><dtml-if "getObjProperty('attr_dc_creator',REQUEST)"><dtml-var "getObjProperty('attr_dc_creator',REQUEST)"><dtml-else><dtml-var "getObjProperty('created_uid',REQUEST)"></dtml-if>,</em> 
     am: <em><dtml-var "getLangFmtDate(getObjProperty('change_dt',REQUEST),lang,'DATE_FMT')"> um <dtml-var "getLangFmtDate(getObjProperty('change_dt',REQUEST),lang,'TIME_FMT')"></em><br />
     <dtml-var "getTitle(REQUEST)"></div>
   </td>
  </tr>
 </dtml-let>
 <dtml-if sequence-end>
  <tr>
   <td colspan="2"><input  type="submit" 
     name="btn" 
     title="Markierte Dokumente l&ouml;schen (nur m&ouml;glich f&uuml;r die von mir selbst hochgeladenen Dokumente)" 
     value="<dtml-var "getLangStr('BTN_DELETE',lang)">"
     onclick="javascript:check=confirm('Wirklich L&ouml;schen?'); if (check==false) return false" 
    /></td>
  </tr>
 </dtml-if>
</dtml-in>
</table>
</form>

<form id="uploader" method="post" enctype="multipart/form-data" action="."> 
<input type="hidden" name="form_id" value="<dtml-var ZMI_TIME>"/>
<table class="ZMSTable fileupload" width="97%" cellpadding="0" cellspacing="0">
<tr>
 <th>Neue Datei hochladen:</th>
</tr>
<tr>
<td><img src="<dtml-var MISC_ZMS>upload.gif" style="vertical-align:bottom;margin-bottom:3px" /> 
<dtml-if "getObjProperty('uploader',REQUEST)=='rad_upload'">
<dtml-var "getPlugin('fileupload/rad_upload/input.dtml',REQUEST,{'elName':'upload','elMaxlength':getConfProperty('ZMS.input.file.maxlength',''),'key':'file'})">
<dtml-else>
<input type="file" name="upload" size="26" title="W&auml;hlen Sie ein Dokument von Ihrer Festplatte zum Hochladen aus." />
</dtml-if>
<div class="small" style="line-height:13px;">Hinweis: Bitte im Dateinamen keine Umlaute oder &szlig; verwenden. 
<dtml-if "getObjProperty('uploader',REQUEST)=='rad_upload'">
Ziehen Sie die Datei mit der Maus auf obiges Feld 
<dtml-else>
Ziehen Sie eine Datei von Ihrer Festplatte aus 
</dtml-if>
und geben in das folgende Feld kurze Beschreibung ein. Abschliessend klicken Sie "Einf&uuml;gen".</div>
</td>
<dtml-comment>
<td></td>
</dtml-comment>
</tr>
<tr>
 <td><textarea name="title" rows="3" cols="38" title="Kurze Info bzw. Bezeichnung des Dokuments" ></textarea></td>
</tr>
<tr>
 <td><input type="submit" name="btn" value="<dtml-var "getLangStr('BTN_INSERT',lang)">" /></td>
</tr>
</table>
</form>

<!-- EO bodyContentZMSCustom_multiFileUpload -->]]></item>
<item key="id"><![CDATA[bodyContentZMSCustom_multiFileUpload]]></item>
<item key="mandatory" type="int">0</item>
<item key="multilang" type="int">0</item>
<item key="name"><![CDATA[Template: Multi-File Upload]]></item>
<item key="repetitive" type="int">0</item>
<item key="type"><![CDATA[DTML Method]]></item>
</dictionary>
</item>
</list>
</item>
<item key="access" type="dictionary"><dictionary>
<item key="delete" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSEditor]]></item>
</list>
</item>
<item key="delete_custom"></item>
<item key="edit" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSEditor]]></item>
</list>
</item>
<item key="edit_custom"></item>
<item key="insert" type="list"><list>
<item><![CDATA[ZMSAdministrator]]></item>
<item><![CDATA[ZMSAuthor]]></item>
<item><![CDATA[ZMSEditor]]></item>
</list>
</item>
<item key="insert_custom"><![CDATA[{$}]]></item>
</dictionary>
</item>
<item key="enabled" type="int">1</item>
<item key="id"><![CDATA[multiFileUpload]]></item>
<item key="name"><![CDATA[Multi-File Upload]]></item>
<item key="package"></item>
<item key="revision"><![CDATA[0.0.2]]></item>
<item key="type"><![CDATA[ZMSObject]]></item>
</dictionary>
</item>
</dictionary>

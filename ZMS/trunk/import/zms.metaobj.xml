<?xml version="1.0" encoding="utf-8"?>

<list>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMS]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zms.gif" type="file">47494638396110001000b300008b5826dca7277484b0eec93ad4cbb9f7dc55d4b274ececdcfc02fc666d99e6bc3d8499c4e6f7fc7079a2f3cf47dfb12c21f90401000008002c000000001000100003046010c98908a19812a56ed64e5138deb78962672a28aa6a4ae8c4f25b3d4eae1c07ed3c17c263e0183c0e0cc6615804120203450099544207818b2130ad560f5cc384b0a80200d54449524e9ed39936e39d4cc4cde87a5cc06f341280761f831311003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zms_disabled.gif" type="file">47494638396110001000b30000fc02fc848684c4c6c4acaaaceceaec646264b4b6b4d4d6d47c7a7c9496946c6e6cb4b2b4f4f2f4cccaccbcbabc00000021f90401000000002c000000001000100003045f10c8095aa39836e76ed6c271589fb48962f79d68ea4d5b333a821cc34bdd1804d1d58b4b6350130c080c068128305a8886a332b96c0e2e8b8134c95d0e16b004b750e02a5e1271928c6428326a02d90c1f97936f4c22c04720148079258311003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-home]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[titlealt]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[title]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titleimage]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Titleimage]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[levelnfc]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[0]]></item>
                      <item><![CDATA[1]]></item>
                      <item><![CDATA[2]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Level]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_description]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_subject]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Subject]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_subject]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_type]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_type]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_creator]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Creator]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_creator]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[e]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[ZMSTeaserContainer]]></item>
                      <item><![CDATA[type(ZMSDocument)]]></item>
                      <item><![CDATA[type(ZMSObject)]]></item>
                      <item><![CDATA[type(ZMSRecordSet)]]></item>
                      <item><![CDATA[type(ZMSReference)]]></item>
                      <item><![CDATA[type(ZMSModule)]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Objects]]></item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type"><![CDATA[*]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMS.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMS.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMS]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[ZMS]]></item>
          <item key="name"><![CDATA[ZMS]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.1]]></item>
          <item key="type"><![CDATA[ZMSDocument]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSDocument]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsdocument_16x16.gif" type="file">47494638396110001000b30000fc02fc8787aeb7c7e4d6ebfcb5d8faa0a6c4c6e1fbf7fbfcb8dffc547ab484baec8f98b9afb9d17496d4acd0fc7573a521f90401000000002c00000000100010000304691008c158592bbc02ba6747281e8db0781d3886cda024a8bab606f378c53a904d7f77391d6128f80116bac36060301891a2e5d2c03406a24aa981605566a74daee7faa51a100871e7aa1da0d36a40403a4513100ee343d97c0f1d791e0f744c6f697a0f898a8b891d11003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsdocument_disabled_16x16.gif" type="file">47494638396110001000b30000fc02fc8c8a8cc4c6c4e4e6e4a4a6a4d4d2d47476749c9a9cbcbabcfcfafc949294acaeacdcdadccccacc7c7a7cd4d6d421f90401000000002c000000001000100003046e1008b110512a3802ba47492826817078dd220ea2322c060a8ea1fb207147d02c86399e1daf4014003b0a5e623060308e80c388c964347380c06a496514a05a16b5e92c60b5dc66f3f1f87ac2d501bb6d7e8fd7ed4703ea583a1f0c740d461e0e7781736e1d0e0e068c8e8d8f4711003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-file-alt]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[titlealt]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[title]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titleimage]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Titleimage]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[levelnfc]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[0]]></item>
                      <item><![CDATA[1]]></item>
                      <item><![CDATA[2]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Level]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_description]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_subject]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Subject]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_subject]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_type]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_type]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_creator]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Creator]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_creator]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[e]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[ZMSTeaserContainer]]></item>
                      <item><![CDATA[type(ZMSObject)]]></item>
                      <item><![CDATA[type(ZMSRecordSet)]]></item>
                      <item><![CDATA[type(ZMSModule)]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Objects]]></item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type"><![CDATA[*]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSDocument.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMSDocument.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSDocument]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSDocument]]></item>
          <item key="name"><![CDATA[ZMSDocument]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.2]]></item>
          <item key="type"><![CDATA[ZMSDocument]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSFile]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsfile_16x16.gif" type="file">47494638396110001000b300000402847784b4b5d5fc86a8dad2e8fa626897f9fcfc54a6ec727aa6fc02fcb4b2fc8498c8c8e0f88cb0e094bdefe7eff521f90401000009002c000000001000100003046f30b9d186bd23a4bd9df9e0f330c8c049606a30c1b170cd07cc341920b09cce8aa26d03dd87200028489ca0016010110846e4662173321851dcb4097810ae4585409b0888008caf203ce6981fb4b8b8e076f6ee3d017d836078af0c6b827b097d8081826b84088c8d8e8c8427929311003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsfile_disabled_16x16.gif" type="file">47494638396110001000b30000fc02fc848284cccecceceaec646664a4a6a4dcdedc7472749c9a9cfcfafcb4b6b48c8e8cd4d6d47c7a7c6c6a6ce4e2e421f90401000000002c000000001000100003047210a8420baa2580bd55fae0303041c149609a180d8270c5875d4660c37248298ab6c509444850503c1a1c6122267a3c8aaca4acf930148fd24161e0641015820367212a181ede2f43bc216b31bb3027c07df0ee3c8163eeaca20580807b1b0d068606698102041c0d8e8f908e832794950011003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-download-alt]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[titlealt]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[title]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[file]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[File]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[file]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[align]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[LEFT_FLOAT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                      <item><![CDATA[RIGHT_FLOAT]]></item>
                      <item><![CDATA[NONE]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global
		zmscontext options/zmscontext">

<script type="text/javascript">

function elFileChange(el) {
	var filename = $(el).val();
	var i = Math.max(filename.lastIndexOf('/'),filename.lastIndexOf('\\'));
	if ( i > 0) {
		filename = filename.substring(i+1);
	}
	var title = $("#title_"+getZMILang());
	if ( title.val().length == 0) {
		title.val(filename);
	}
	var titlealt = $("#titlealt_"+getZMILang());
	if ( titlealt.val().length == 0) {
		titlealt.val(filename);
	}
}

$(function() {
	$("#file_"+getZMILang()).change( function() { elFileChange(this); } );
});

</script>

</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[text]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_img_src"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Image
##
# --// BO attr_img_src //--

file = zmscontext.attr('file')
return file.getMimeTypeIconSrc()

# --// EO attr_img_src //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_img_src]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_url"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Url
##
# --// BO attr_url //--

file = zmscontext.attr('file')
return file.getHref(zmscontext.REQUEST)

# --// EO attr_url //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_url]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Url]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Abstract
##
# --// BO attr_abstract //--
#
return zmscontext.attr('attr_dc_description')

# --// EO attr_abstract //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_abstract]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSFile.getHref2IndexHtml"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Function: index_html
##
# --// BO getHref2IndexHtml //--

file = zmscontext.attr('file')
if file:
    return file.getHref(zmscontext.REQUEST)
return ''

# --// EO getHref2IndexHtml //--
]]>
                  </item>
                  <item key="id"><![CDATA[getHref2IndexHtml]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Function: index_html]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSFile.standard_html -->

<tal:block tal:define="Std modules/Products.PythonScripts/standard; newline_to_br nocall:Std/newline_to_br; global 
		zmscontext options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		title         python:zmscontext.attr('title');
		titlealt      python:zmscontext.attr('titlealt');
		file          python:zmscontext.attr('file');
		align         python:zmscontext.attr('align');
		displaytype   python:zmscontext.attr('displaytype');
		abstract      python:zmscontext.attr('attr_abstract')">
	<tal:block tal:condition="python:align not in ['','NONE'] or request.get('URL','').find('/manage')>0">
		<tal:block tal:condition="python:align in [ '', 'NONE']">
			<tal:block tal:define="global subclass python:subclass+['none']"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
			<tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'LEFT_FLOAT'] and displaytype in [ 'top', 'bottom']">
			<tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
		</tal:block>
		<tal:block tal:condition="python:align in [ 'RIGHT_FLOAT'] and displaytype in [ 'top', 'bottom']">
			<tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
		</tal:block>
		<div tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)">
			<span tal:omit-tag="" tal:condition="python:file">
				<div class="title">
					<img tal:attributes="src python:file.getMimeTypeIconSrc(); title python:'%s (%s)'%(file.getContentType(),file.getDataSizeStr())" border="0" alt="Icon" align="absmiddle"/>
					<a tal:attributes="href python:file.getHref(request)" tal:content="structure python:titlealt" target="_blank">The titlealt</a>
					(<span tal:content="python:file.getDataSizeStr()">The data-size string</span>)
				</div>
				<div tal:condition="python:title" tal:content="structure title" class="text">The title</div>
				<div tal:condition="python:abstract" tal:content="structure python:newline_to_br(abstract)" class="description">The abstract</div>
			</span>
			<span tal:omit-tag="" tal:condition="python:not (file)" tal:content="python:zmscontext.getZMILangStr('ATTR_NONE')">
				None
			</span>
		</div>
	</tal:block>
</tal:block>

<!-- /ZMSFile.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSFile]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSFile]]></item>
          <item key="name"><![CDATA[ZMSFile]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSFolder]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsfolder.gif" type="file">47494638396110001000b30000745e3cb4821cfcfba5efcc65fce973fcfee3d6aa3afcf58afcfec0fc02fc9088608c7e54cc9e34fcda61fcfef7e3b94321f90401000009002c000000001000100003045f30c9496b5a2feb65e57320283c4af7208820a484e66269aaaa61980d78aeeb1952fcc020f061101c8ec8e471f410109ed0e8f3403c48af8483c1406878bf602f61db1d7ccd5e3481c120ecde8371bbd1add3ef5d0620c0effbfd001d820911003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsfolder_disabled.gif" type="file">47494638396110001000b30000fc02fc848684cccacceceaecf4f6f4a4a2a4646264e4e2e4fcfefc7c7e7cbcbabcd4d6d4f4f2f4acaaacfcfafc00000021f90401000000002c000000001000100003046110c8492b482aeb64a5420811124dd02904c130eaa1bd98aaaecc008a6026ecc2b2fb3d5e26354a198f8a466dc06c3a078ccce040ad5aa983e4f4ca3d340a8785784c167b1be19e58ed3317c0bcb8dc0b5e84eff67cb86008f8ff8080061d840011003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-folder-close-alt]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[titlealt]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[title]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titleimage]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Titleimage]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[levelnfc]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[0]]></item>
                      <item><![CDATA[1]]></item>
                      <item><![CDATA[2]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Level]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_description]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_subject]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Subject]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_subject]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_type]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_type]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_creator]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Creator]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_creator]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[e]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[ZMSTeaserContainer]]></item>
                      <item><![CDATA[type(ZMSDocument)]]></item>
                      <item><![CDATA[type(ZMSObject)]]></item>
                      <item><![CDATA[type(ZMSRecordSet)]]></item>
                      <item><![CDATA[type(ZMSModule)]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Objects]]></item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type"><![CDATA[*]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSFolder.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext"
		tal:content="structure python:zmscontext.bodyContentZMSLib_page(zmscontext,request)">
	The page-content
</tal:block>

<!-- /ZMSFolder.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSFolder]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSFolder]]></item>
          <item key="name"><![CDATA[ZMSFolder]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.1]]></item>
          <item key="type"><![CDATA[ZMSDocument]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSGraphic]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsgraphic.gif" type="file">47494638396110001000b30000fa3605eacc1f7987b7bcc284d7d2d1edf5fa3ca7ecfc02fcb6d8fa574f9cc47a7ca4e45c6cfa346876a80598fb8baddf21f90401000007002c0000000010001000030464f0a0476b1527e757baef84f068d2f7218d316ea6870842a37105602b4837616c6d270e072227ebfd8241e2acf36b201f288d00f44026a399a98bc1701886c583b6b3089887587181b0369b07604da390aba38709399d7e47871b80818280792486871911003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsgraphic_disabled.gif" type="file">47494638396110001000b30000fc02fc848284c4c2c4545254eceaec6c6a6ca4a6a4d4d2d47476749c9a9cbcbabc646664fcfafcccceccdcdedc7c7a7c21f90401000000002c00000000100010000304791028436b0d2067c5ba278413189ae49d8cf3248966a09e1860d9cb147872808e4203b64561b1402004a18726d1c10d8ac6836ad9113e8d08c5419961321a0de3c328082f79048142814880119a000874502b040773461e7208fe6a6005710e3c0e7960821a0f0e8d8779900d0b8b0f9596970f93259b9c1911003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-picture]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[2]]></item>
                  <item key="id"><![CDATA[displaytype]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Display-Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[int]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[img]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[imghires]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (Hires)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[imgsuperres]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (Superres)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[alt=""]]></item>
                  <item key="id"><![CDATA[img_attrs_spec]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Image (Special-Attributes)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_url]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image (URL)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[url]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[align]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[LEFT_FLOAT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                      <item><![CDATA[RIGHT_FLOAT]]></item>
                      <item><![CDATA[CENTER]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[richtext]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[<dtml-return "getTextFormatDefault()">]]></item>
                  <item key="id"><![CDATA[format]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Format]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[textalign]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                      <item><![CDATA[CENTER]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Text-Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSGraphic.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		text          python:unicode(zmscontext.getText(request),'utf-8');
		format        python:unicode(zmscontext.attr('format'),'utf-8');
		textclass     python:'text';
		displaytype   python:zmscontext.dctDisplaytype.get(str(zmscontext.attr('displaytype')),'left');
		align         python:zmscontext.attr('align');
		textalign     python:zmscontext.attr('textalign');
		imgclass      python:'img';
		imgurl        python:zmscontext.getLinkUrl(zmscontext.attr('attr_url'),request);
		isimghires    python:zmscontext.attr('imghires');
		imgthumb      python:request['URL'].find('/manage')>0;
		imgspecial    python:zmscontext.attr('img_attrs_spec')">
	<tal:block tal:condition="python:imgurl and isimghires">
		<tal:block 
			tal:define="global text python:text+'\n<span class=\042imgurl\042>'+zmscontext.getLangStr('HREF_MORE',request['lang'])%(' href=\042%s\042'%imgurl)+'</span>';
			            global imgurl python:''">
		</tal:block>
	</tal:block>
	<tal:block 
		tal:define="global renderedtext python:zmscontext.renderText(format,'text',text,request);
		            global bodyContent python:zmscontext.renderDisplaytype(displaytype,'img','imghires',imgurl,imgthumb,imgspecial,imgclass,renderedtext,textalign,textclass,request)">
	</tal:block>
	<tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
		<tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
	</tal:block>
	<tal:block tal:condition="python:align in [ 'LEFT_FLOAT'] and displaytype in [ 'top', 'bottom']">
		<tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
	</tal:block>
	<tal:block tal:condition="python:align in [ 'RIGHT_FLOAT'] and displaytype in [ 'top', 'bottom']">
		<tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
	</tal:block>
	<div tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)" tal:content="structure bodyContent">
		The graphic
	</div>
</tal:block>

<!-- /ZMSGraphic.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSGraphic]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSGraphic]]></item>
          <item key="name"><![CDATA[ZMSGraphic]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSLib]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-beaker]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- bodyContentZMSLib_page -->

	<tal:block tal:content="structure here/bodyContent_PagePre">The page-pre-content</tal:block>
	<tal:block tal:condition="python:here.meta_id in ['ZMS','ZMSFolder','ZMSDocument']" tal:define="global 
		childNodes python:here.getObjChildren('e',request,here.PAGEELEMENTS)">
			<tal:block tal:repeat="childNode childNodes" tal:content="structure python:childNode.getBodyContent(request)">
				The page-element body-content
			</tal:block>
	</tal:block>
	<tal:block tal:condition="python:here.meta_id not in ['ZMS','ZMSFolder','ZMSDocument']">
		<tal:block tal:content="structure python:here.getBodyContent(request)">
			The body-content
		</tal:block>
	</tal:block>
	<tal:block tal:content="structure here/bodyContent_PagePost">The page-post-content</tal:block>

<!-- /bodyContentZMSLib_page -->]]>
                  </item>
                  <item key="id"><![CDATA[bodyContentZMSLib_page]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Page]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Page Template]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLib.uploadMedia"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: Upload: Media
##
# --// BO uploadMedia //--

result = {}
temp_folder = context.temp_folder
request = context.REQUEST
base_url = request.get('SERVER_URL')
session_id = request.get('session_id')
form_id = request.get('form_id')
file = request.get('file')

def resize_image(context, orig, maxdims):
  pilutil = context.pilutil()
  width = orig.getWidth()
  height = orig.getHeight()
  while width > maxdims or height > maxdims:
    if width > maxdims:
      height = int(height * maxdims / width)
      width = maxdims
    elif height > maxdims:
      width = int(width * maxdims / height)
      height = maxdims
  size = (width,height)
  blob = pilutil.resize( orig, size)
  return blob

def create_blob(container, blob):
  filename = blob.getFilename()
  data = blob.getData()
  id = session_id + '_' + form_id + '_' + filename
  if id in container.objectIds():
    container.manage_delObjects(ids=[id])
  if blob.getContentType().startswith('image'):
    container.manage_addImage( id=id, title=filename, file=data)
  else:
    container.manage_addFile( id=id, title=filename, file=data)
  ob = getattr(container,id)
  d = {}
  d['content_type'] = blob.getContentType()
  d['filename'] = blob.getFilename()
  d['absolute_url'] = ob.absolute_url()[len(base_url):]
  return d

if file and file.filename:
  blobs = {}
  blob = context.FileFromData(file,file.filename)
  content_type = blob.getContentType()
  if content_type.startswith('image'):
    image = context.ImageFromData(file,file.filename)
    maxdims = int(context.getConfProperty('InstalledProducts.pil.thumbnail.max',100))
    if image.getWidth() > maxdims:
      result['imghires'] = create_blob(temp_folder,image)
      result['image'] = create_blob(temp_folder,resize_image(context, image, maxdims))
    else:
      result['image'] = create_blob(temp_folder,image)
  else:
    result['file'] = create_blob(temp_folder,blob)

result['message'] = context.getZMILangStr( 'MSG_UPLOADED')
return context.str_json(result)

# --// EO uploadMedia //--
]]>
                  </item>
                  <item key="id"><![CDATA[uploadMedia]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Upload: Media]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLib.show_version -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">
	<tal:block tal:condition="python:zmscontext.getHistory()">
		<script>
              function showHistory(el) {
                var v = $(el).val();
                var version_nr = v.substr(0,v.indexOf(" "));
                var version_dt = v.substr(v.indexOf(" ")+1);
                $(el).prop('selectedIndex',0);
                $.get("ajaxBodyContentObjHistory",{lang:$("input#lang").val(),version_nr:version_nr,revision:1,ts:new Date()},function(data) {
                    var $xml = $( data );
                    var body = $xml.find( "ObjHistory" );
                    var title = $xml.find("title").text();
                    var description = $xml.find("description").text();
                    if ($("div#revision").length==0) {
                      $("body").append('<'+'div id="revision"><'+'/div>');
                    }
                    var html = ''
                      + '<'+'div id="flow" class="hyphenate">'
                      + '<'+'article>'
                        + '<'+'header>'
                          + '<'+'h1 style="font-weight:bold!important">'+title+'<'+'/h1>'
                          + '<'+'p style="text-decoration:italic!important" class="description">'+description+'<'+'/p>'
                        + '<'+'/header>'
                        + '<'+'/section>';
                    for (var i = 0; i < body.length; i++) {
                      html += $(body[i]).text();
                    }
                    html += ''
                          + '<'+'/section>';
                        + '<'+'/article>';
                      + '<'+'/div>';
                    $("div#revision").html(html);
                  	showFancybox({
                  			'href':'#revision',
                  			'title':'r'+v,
                  			'autoDimensions':true,
                  			'transitionIn':'fade',
                  			'transitionOut':'fade',
                  			onCleanup:function() {
                  					$("div#revision").remove();
                  				}
                  		});
                    $("div#revision>div").show();
                  });
              }
		</script>
		<input type="hidden" id="lang" name="lang" tal:attributes="value request/lang"/>
		<select onchange="showHistory(this)">
			<option value="" tal:content="python:'--- %s ---'%zmscontext.getLangStr('TAB_HISTORY',request['lang'])">the history</option>
			<tal:block tal:define="global 
					change_history python:zmscontext.attr('change_history');
					rchange_history python:map(lambda x: change_history[len(change_history)-(x+1)], range(len(change_history)))"
					tal:repeat="history rchange_history">
				<option
						tal:attributes="value python:'%i.%i.%i %s'%(history['master_version'],history['major_version'],0,zmscontext.getLangFmtDate(history['version_dt'],request['lang'],'SHORTDATETIME_FMT'))" 
						tal:content="python:'r%i.%i.%i (%s)'%(history['master_version'],history['major_version'],0,zmscontext.getLangFmtDate(history['version_dt'],request['lang'],'SHORTDATETIME_FMT'))">version_nr version_dt</option>
			</tal:block>
		</select>
	</tal:block>
</tal:block>

<!-- /ZMSLib.show_version -->]]>
                  </item>
                  <item key="id"><![CDATA[show_version]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Show version]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                </list>
              </item>
              <item key="insert_custom"></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[ZMSLib]]></item>
          <item key="name"><![CDATA[ZMSLib]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.2.0]]></item>
          <item key="type"><![CDATA[ZMSLibrary]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSLinkContainer]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmslinkcontainer_16x16.gif" type="file">47494638396110001000b300000402048c8e8cc4cac404028434464cacbedce4eaecacaeb4647294fc02fc2c2a34545e64c4d6ec7496b4fcfefc0000ff21f90401000009002c000000001000100003046e30c974820d67ea24d462a00028c2d62d467328400b30da61804cd3b8e314183c53200a022e2039380cc7c6c2b6702d8a0e87e0801b2d104f4e1437c061a10081d401188bb2897015279a94018157e016270324ea754bd44e8bc5657f2d646e2e37557d787f6466771b38692e1211003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmslinkcontainer_disabled_16x16.gif" type="file">47494638396110001000b30000fc02fc8c8a8cc4c2c4acaeaceceaec5c5a5c9c9a9cd4d2d47c7a7cbcbabcccceccf4f6f4646664949294a4a2a4dcdadc21f90401000000002c0000000010001000030474104820861d626af05078a05220cff6300d910848e132e59410c77358ae8bc8447f28064620574848048b9eaae1180c5d068982b05008880c94230a502c1658e2560a3e2ccc85f3b9c005140ec4387c922e0cde0343c1512f48de714470736e66686a707574397c727e748660888f1a446e391211003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-link]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global 
		zmscontext options/zmscontext">

<!--
################################################################################
##### Align: EDIT
################################################################################
-->
<tal:block tal:condition="python:zmscontext.getParentNode().meta_id in ['ZMS','ZMSFolder','ZMSDocument']">
	<table cellspacing="0" cellpadding="1" border="0" width="100%">
	<colgroup>
		<col width="20%" />
		<col width="80%" />
	</colgroup>
	<tr valign="middle">
		<td class="form-label" tal:content="structure python:here.getZMILangStr('ALIGN')">Align</td>
		<td class="form-element" tal:content="structure python:zmscontext.getObjInput('align',request)">the align-input</td>
	</tr>
	</table>
</tal:block>

<table cellspacing="1" cellpadding="2" border="0" class="zmiNeutralColorStrong0">
<tr class="zmiNeutralColorMedium0">
	<td colspan="5" tal:content="structure python:here.f_headline(headline=here.getZMILangStr('BTN_ADD'))">Add</td>
</tr>
<tr valign="top" class="zmiNeutralColorStrong0">
	<td> &nbsp; </td>
	<td>
		<span class="form-label" tal:content="structure python:'%s %s'%(here.getZMILangStr('ATTR_URL'),here.FORM_LABEL_MANDATORY)">Url*</span>
		<span class="form-small">(<tal:block tal:content="python:here.getZMILangStr('OR').lower()">or</tal:block> PMID)</span>
	</td>
	<td>
		<span class="form-label" tal:content="structure python:'%s %s'%(here.getZMILangStr('ATTR_TITLE'),here.FORM_LABEL_MANDATORY)">Title*</span>
		<span class="form-small">(<tal:block tal:content="python:here.getZMILangStr('OR').lower()">or</tal:block> &quot;Medline&quot;)</span>
	</td>
	<td colspan="2">
		<span class="form-label" tal:content="structure python:here.getZMILangStr('ATTR_DESCRIPTION')">Description</span>
	</td>
</tr>

<!--
################################################################################
##### Link-Elements: INSERT
################################################################################
-->
<tal:block tal:define="global dummy0 python:request.set( 'ZMS_INSERT', 'ZMSLinkElement')"></tal:block>
<tr valign="top" class="zmiNeutralColorMedium0">
	<td align="right"><img src="/misc/zms/btn_add.gif" border="0" class="button"/></td>
	<td class="form-small" tal:content="structure python:here.getUrlInput(fmName='form0',elName='_url',elTextName='_title',size=15,value='',enabled=1,REQUEST=request,css='form-small')"><input/></td>
	<td class="form-small" tal:content="structure python:here.getTextInput(fmName='form0',elName='_title',size=15,value='',enabled=1,REQUEST=request,css='form-small')"><input/></td>
	<td class="form-small" tal:content="structure python:here.getTextArea(fmName='form0',elName='_description',cols=20,rows=3,value='',enabled=1,REQUEST=request,css='form-small')"><textarea/></td>
	<td width="100">
		<input class="ui-button ui-state-default ui-corner-all" name="btn" type="submit" tal:attributes="value python:here.getZMILangStr('BTN_INSERT')" onclick="processMultiselectsOnFormSubmit(); self.btnClicked=this.value;">
		&nbsp;&nbsp;
	</td>
</tr>

<!--
################################################################################
##### Link-Elements: EDIT
################################################################################
-->
<tal:block tal:define="global dummy0 python:request.set( 'ZMS_INSERT', None)"></tal:block>
<tal:block tal:define="global childNodes python:zmscontext.getObjChildren('e',request)">
<tr valign="top" class="zmiNeutralColorLight0" tal:repeat="childNode childNodes">
	<td align="center" class="zmiNeutralColorMedium0">
		<nobr>
			<select class="form-small" tal:attributes="onchange python:'location.href=\'%s/manage_moveObjToPos?lang=%s&pos:int=\'+(this.selectedIndex+1)'%(childNode.id,request['lang'])">
				<tal:block tal:repeat="seqindex python:range(len(childNodes))">
					<option tal:attributes="selected python:['','selected'][int(seqindex==childNodes.index(childNode))]" tal:content="python:seqindex+1">seqindex+1</option>
				</tal:block>
			</select>
			<a tal:attributes="href python:'javascript:confirmDeleteBtnOnClick(\'manage_deleteObjs?ids:list=%s&preview=preview\')'%childNode.id" class="button"><img src="/misc_/zms/btn_trashcan1.gif" tal:attributes="title python:here.getZMILangStr('BTN_DELETE')" border="0"></a>
		</nobr>
	</td>
	<td class="form-small" tal:content="structure python:here.getUrlInput(fmName='form0',elName='url%s'%id,elTextName='title%s'%id,size=15,value=childNode.getObjAttrValue(childNode.getObjAttr('attr_ref'),request),enabled=1,REQUEST=request,css='form-small')"><input/></td>
	<td class="form-small" tal:content="structure python:here.getTextInput(fmName='form0',elName='title%s'%id,size=15,value=childNode.getObjAttrValue(childNode.getObjAttr('title'),request),enabled=1,REQUEST=request,css='form-small')"><input/></td>
	<td class="form-small" tal:content="structure python:here.getTextArea(fmName='form0',elName='description%s'%id,cols=20,rows=3,value=childNode.getObjAttrValue(childNode.getObjAttr('attr_dc_description'),request),enabled=1,REQUEST=request,css='form-small')"><textarea/></td>
	<td width="100" class="zmiNeutralColorMedium0">
		<div class="zmi-manage-main-change" tal:content="structure python:childNode.zmi_manage_main_change(childNode,request)">
			the info child-node
		</div>
	</td>
</tr>
</tal:block>

</table>

<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['align','e'])"></tal:block>
</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[align]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[LEFT_FLOAT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                      <item><![CDATA[RIGHT_FLOAT]]></item>
                      <item><![CDATA[NONE]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[e]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Link-Elements]]></item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type"><![CDATA[ZMSLinkElement]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkContainer.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Event: onChangeObj
##
# --// BO onChangeObjEvt //--

request = zmscontext.REQUEST
align = zmscontext.attr('align')
if align:
    for childNode in zmscontext.getChildNodes(request,['ZMSLinkElement']):
        childNode.attr('align',align)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="id"><![CDATA[onChangeObjEvt]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChangeObj]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLinkContainer.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		subclass      python:[];
		align         python:zmscontext.attr('align')">
  <tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
    <tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'LEFT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'RIGHT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
  </tal:block>
  <div tal:condition="python:len(subclass)>0"
       tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)"
       tal:content="structure python:unicode(zmscontext.renderShort(request),'utf-8')">
    The content
  </div>
</tal:block>

<!-- /ZMSLinkContainer.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSLinkContainer]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSLinkContainer]]></item>
          <item key="name"><![CDATA[ZMSLinkContainer]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSLinkElement]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmslinkelement_16x16.gif" type="file">47494638396110001000b30000050305878d93c4c9c5e5eaeb0402849299fa344448acaeb3f7fcf9686e8cfc02fc565f62b2bfdf292a30c6d5eb6876b421f9040100000a002c0000000010001000030477504975820d676a25da72e00134ced62d43c018400b08da310ce013b8e314cc3493342c574072400c8c87c5e310042c2402044220c235128927458aa8ba1e05c690739c0916ae4278ac603818021c013739380aaf2902a08fd75f38817e127c0037620a86851380812e838451517c92001b892e982d1211003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmslinkelement_disabled_16x16.gif" type="file">47494638396110001000b30000fc02fc8c8a8cc4c2c4acaeaceceaec5c5a5c9c9a9cd4d2d47c7a7cbcbabcccceccf4f6f4646664949294a4a2a4dcdadc21f90401000000002c000000001000100003047a104820861d626af05038cfa314c8b33d4c43240252bc8c3909447858ef8b4c495d2b064620574848040b422dd1700c862f8344915408888c94430aa02e160206d191b84d95ca472327280f260782629413e7668feb61b12ff0f905330507448584137e050383030681898884853987917f7e7b951a44009c0011003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-link]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[inferface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global 
		zmscontext options/zmscontext; 
		dummy0 python:request.set('beforeSubmitBtnClick','if ( zmiOnSubmitEventHandler(this)) { ');
		dummy0 python:request.set('afterSubmitBtnClick',' } ')">
<script type="text/javascript">
<!--//

var btn = null;
var remoteHref = null;
var remoteHrefValid = false;
var remoteHrefResponseWaiting = false;
var remoteHrefResponseTimeout = 5000;

function zmiOnSubmitEventHandler(el) {
	btn = el;
	if ($("#attr_type").val() == "remote") {
		var href = $("#attr_ref").val();
		if ( !remoteHrefValid || remoteHref != href) {
			remoteHref = href;
			remoteHrefValid = false;
			remoteHrefResponseWaiting = true;
			self.btnClicked = 'break';
			// Set wait-cursor.
			$(document.body).css( "cursor", "wait");
			// JQuery.AJAX.get
			$.get( remoteHref+"/getBodyContent", remoteResponse);
			// Set time-out.
			setTimeout("remoteResponseTimedout()",remoteHrefResponseTimeout);
		}
		return remoteHrefValid;
	}
	return true;
}

function remoteResponse(data) {
	if (remoteHrefResponseWaiting) {
		remoteHrefResponseWaiting = false;
		// Reset wait-cursor.
		$(document.body).css( "cursor", "auto");
		//
		$("#attr_ref").removeClass("form-error");
		remoteHrefValid = true;
		btn.click();
	}
}

function remoteResponseTimedout() {
	if (remoteHrefResponseWaiting) {
		remoteHrefResponseWaiting = false;
		// Reset wait-cursor.
		$(document.body).css( "cursor", "auto");
		//
		$("#attr_ref").addClass("form-error");
		remoteHrefValid = false;
		if (confirm( "Time-Out "+getZMILangStr('ATTR_URL')+": "+remoteHref)) {
			remoteHrefValid = true;
			btn.click();
		}
	}
}

initAttrRef = function() {
		var v = $(this).val();
		var $select = $("select#attr_type");
		$("option",$select).each(function() {
			$(this).prop("disabled","");
			if (v.indexOf("{$")!=0 && $.inArray($(this).prop("value"),["embed","recursive","remote"])>=0) {
				$(this).prop("disabled","disable");
			}
		});
	};

$(function() {
	$("input#attr_ref").change(initAttrRef).change();
});

//-->
</script>

<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
	<col width="20%" />
	<col width="80%" />
</colgroup>
<!--
################################################################################
##### Ref & Type: EDIT
################################################################################
-->
<tr valign="middle">
	<td class="form-label" tal:content="structure python:'%s %s'%(here.getZMILangStr('ATTR_URL'),here.FORM_LABEL_MANDATORY)">Url*</td>
	<td>
		<div style="float:left" tal:content="structure python:zmscontext.getObjInput('attr_ref',request)">the ref-input</div>
		<div style="float:left">&nbsp;</div>
		<div style="float:left" tal:content="structure python:zmscontext.getObjInput('attr_type',request)">the type-input</div>
	</td>
</tr>
<!--
################################################################################
##### Embedded Object: PREVIEW
################################################################################
-->
<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tr valign="middle">
	<td>&nbsp;</td>
	<td tal:attributes="class python:['zmiNeutralColorWhite','zmiNeutralColorLight0'][int(zmscontext.isPage())]" style="border: 1px dashed black;" tal:content="structure python:zmscontext.renderShort(request)">
		renderShort
	</td>
</tr>
</tal:block>
</table>

<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['attr_ref','attr_type'])"></tal:block>
</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_ref]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Reference]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[url]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_type]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[replace]]></item>
                      <item><![CDATA[new]]></item>
                      <item><![CDATA[embed]]></item>
                      <item><![CDATA[recursive]]></item>
                      <item><![CDATA[remote]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[align]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[LEFT_FLOAT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                      <item><![CDATA[RIGHT_FLOAT]]></item>
                      <item><![CDATA[NONE]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[attr_dc_description]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.attr_img_src"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Image
##
# --// BO attr_img_src //--

title = zmscontext.attr('title')
ref = zmscontext.attr('attr_ref')
if ref.startswith('{$') and ref.endswith('}'):
    ref_obj = zmscontext.getLinkObj(ref)
    if ref_obj:
        return zmscontext.MISC_ZMS+'internal_link.gif'
    else:
        return zmscontext.MISC_ZMS+'internal_link_broken.gif'
elif ref.startswith('mailto:'):
    return zmscontext.MISC_ZMS+'mail_link.gif'
elif title.lower()=='medline':
    return zmscontext.MISC_ZMS+'pubmed_small.gif'
else:
    return zmscontext.MISC_ZMS+'external_link.gif'

# --// EO attr_img_src //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_img_src]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.attr_url"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Url
##
# --// BO attr_url //--

title = zmscontext.attr('title')
ref = zmscontext.attr('attr_ref')
if title.lower()=='medline':
  return 'http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?cmd=Retrieve&db=PubMed&list_uids=%i&dopt=Abstract'%int(ref)
else:
  return ref

# --// EO attr_url //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_url]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Url]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSLinkElement.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Teaser.Abstract
##
# --// BO attr_abstract //--

return zmscontext.attr('attr_dc_description')

# --// EO attr_abstract //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_abstract]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Teaser.Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSLinkElement.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		subclass      python:[zmscontext.meta_id];
		title         python:unicode(zmscontext.attr('title'),'utf-8');
		titlealt      python:unicode(zmscontext.attr('titlealt'),'utf-8');
		ref           python:zmscontext.attr('attr_url');
		align         python:zmscontext.attr('align');
		abstract      python:unicode(zmscontext.attr('attr_abstract').replace('\n','<br/>'),'utf-8')">
  <tal:block tal:condition="python:align in [ 'LEFT', 'CENTER', 'RIGHT']">
    <tal:block tal:define="global subclass python:subclass+[align.lower()]"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'LEFT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatleft']"></tal:block>
  </tal:block>
  <tal:block tal:condition="python:align in [ 'RIGHT_FLOAT']">
    <tal:block tal:define="global subclass python:subclass+['floatright']"></tal:block>
  </tal:block>
  <div tal:condition="python:zmscontext.getParentNode().meta_id=='ZMSLinkContainer' or align not in ['','NONE'] or request.get('URL','').find('/manage')>0"
       tal:attributes="id python:zmscontext.id; class python:' '.join(subclass)">
    <div class="title" tal:condition="python:title.lower()!='medline' and title">
      <img tal:attributes="src python:zmscontext.attr('attr_img_src')" border="0" alt="url" align="absmiddle" />
      <a tal:condition="python:zmscontext.attr('attr_type')=='new'" tal:attributes="href python:zmscontext.getLinkUrl(ref,request)" tal:content="structure titlealt" target="_blank">The titlealt</a>
      <a tal:condition="python:zmscontext.attr('attr_type')!='new'" tal:attributes="href python:zmscontext.getLinkUrl(ref,request)" tal:content="structure titlealt">The titlealt</a>
    </div>
    <div tal:condition="python:title and title!=titlealt" class="text" tal:content="structure title">
      The title
    </div>
    <div tal:condition="python:abstract" class="description" tal:content="structure abstract">
      The abstract
    </div>
    <a tal:condition="python:title.lower()=='medline'" 
      tal:attributes="href python:zmscontext.getLinkUrl(ref,request)"
      target="_blank"><img  tal:attributes="src python:zmscontext.attr('attr_img_src')" border="0" alt="Medline" align="absmiddle" /></a>
  </div>
</tal:block>

<!-- /ZMSLinkElement.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSLinkElement]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSLinkElement]]></item>
          <item key="name"><![CDATA[ZMSLinkElement]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSNote]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsnote.gif" type="file">47494638396110001000b30000a78842fcda0cc4a868fcf274c8a228fcec41c4b982fcf499b89638fcde249cba64dcb21cfcf28cfcee5cfcf6acfcea2d21f9040100000a002c000000001000100003045950c949abbdd4e8cdbb324e288ea2f11da883ae2a6a1a0713cb34439bc2c00c7adfef82cfa0312c128f035c63c96c360a89a0a0f0a416ac8d05010050081ee07038414074bd8f04589d7e04cc13817c4e172030f8bc7e2f8900003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsnote_bg.gif" type="file">4749463839610d000d00b30000fcce64fcf6bcfcda8cfcd274fffffffcce6cfcfecc000077788268ed00211200e80000009002fe0000ff0000ff0000ff21f90400000000002c000000000d000d0003042cb09049eb04c26a1086ae8011641f118ade778aa4b5a29b21cba33bcf1d78e3ed7bd7a6dd2f5300188f486304003b</data>
                  </item>
                  <item key="id"><![CDATA[zmsnote_bg.gif]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Resource: Background]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-comment-alt]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[text]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[catalogText]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Hook: Catalog-Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSNote.renderShort -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">

<tal:block tal:condition="python:not request.get('ZMSNote.renderShort')">

<tal:block tal:content="structure python:'<style>'"></tal:block>
div.note {
	border-left: 1px solid #FCCD64;
	border-bottom: 1px solid #FCCD64;
	margin: 8px;
	padding: 4px;
	background: #FCFECC url(<tal:block tal:content="python:zmscontext.getMetaobjAttr(zmscontext.meta_id,'zmsnote_bg.gif')['custom'].absolute_url()">zmsnote_bg.gif</tal:block>) top right no-repeat;
}
<tal:block tal:content="structure python:'</style>'"></tal:block>

<script language="JavaScript">

var firedZMSNoteDiv = false;
var repeatZMSNoteDiv = false;

function onKeyUpZMSNoteDiv(el) {
	if (!firedZMSNoteDiv) {
		firedZMSNoteDiv = true;
		setTimeout('onChangeZMSNoteDiv(\''+el.id+'\')',500);
	}
	else {
		repeatZMSNoteDiv = true;
	}
}

function onChangeZMSNoteDiv(id) {
	if (repeatZMSNoteDiv) {
		repeatZMSNoteDiv = false;
		setTimeout('onChangeZMSNoteDiv(\''+id+'\')',500);
	}
	else {
		firedZMSNoteDiv = false;
		repeatZMSNoteDiv = false;
		var el = $('div#'+id);
		var v = el.text();
		el.addClass('zmiTeaserColor');
		var lang = getZMILang();
		var params = {};
		params['lang'] = lang;
		params['text_'+lang] = v;
		$.post(id+'/manage_changeProperties',params,function(data){
			el.removeClass('zmiTeaserColor');
		},'html');
	}
}

</script>

<tal:block tal:define="global dummy0 python:request.set('ZMSNote.renderShort',True)"></tal:block>
</tal:block>

<div class="note">
	<div tal:attributes="id python:zmscontext.id" contentEditable="true" onkeyup="onKeyUpZMSNoteDiv(this)" tal:content="structure python:zmscontext.getText(request).replace('\n','<br/>')">the text</div>
</div>

</tal:block>

<!-- /ZMSNote.renderShort -->]]>
                  </item>
                  <item key="id"><![CDATA[renderShort]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSNote.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Event: onChangeObj
##
# --// BO onChangeObjEvt //--

request = zmscontext.REQUEST
zmscontext.commitObj(request)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="id"><![CDATA[onChangeObjEvt]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChangeObj]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSNote]]></item>
          <item key="name"><![CDATA[ZMSNote]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSRichtext]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/png" filename="ZMSRichtext.icon.png" type="file">89504e470d0a1a0a0000000d4948445200000010000000100802000000909168360000000674524e5300ff000000ff89c02f900000016549444154789c8d5031480261187d9e7687e40962e016855260340441e6526b4b5343ad2ecd0e91935be112ad15d2163454e0d624e59282162834a4a78410456777d795745af737fca1e79f466ff9ffefe3bdefbdefb31190a373a3aede63009e8b859dedb54ee9a04f74c5cff014dd0050d31ca94a39717c175b9da07d0e40c3a601e0c24e2eec4c574c3149c424f18882471400b49baf05d3bbb597eb71a0188e3471f1f34f57cca5c9a1cbac04c05fcdead6484d4505bc00d623f300f60faf528b64c6d77e54db0ba13165daafd43faf3367ac8394ccc78bcb00e2b301774072f1bbb47ff3b039eab597f26e56301e9c0224ba6e5926f54654367800fa874937e90abe5485162e3ef1fbac99ea86b5ec3a28baf1d68a95653222b4acb30128eff61e812ecbf4ea7d1d52a5587f07004c6eeb6cf5456305b2c13fdde698f10260f842ac43e702bee05cdfdc5670f4a9698e0ef50f7637d2c9c1e92006031b01f92795e21bdaeb9fe594c8f4f00000000049454e44ae426082</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/png" filename="ZMSRichtext.icon_disabled.png" type="file">89504e470d0a1a0a0000000d4948445200000010000000100802000000909168360000000674524e5300ff000000ff89c02f900000014049444154789c8d51b18ac240107d1e69044911824dfaa085bdbda53f10d0eb2df301e9bc7f38db70fa112784143612ec2c428295dd6e31c64559ac72c5ca26e6f4b857ecee0cefcd9b996d9528d7df6bce395e20cbb2f9c75c8786ba3ccf6bf084100088e8783c2ebf96d3f7a9cabf01b8dd6e007cdff77d3f4dd320088220304dd3344d00524a21c4e2735109343a9dce6ab552ef344d0dc3d86eb7008aa220a2aaa5f3f9ac82d16804208aa2c964e2380e110d87c3c160c018db6c360f330098cd66a7d309c0783ceef7fbdd6e57e5f7fbbd6ddbbbddae29e8f57a7a5cc6d8e1709052aa19f479175c2e1715e8aa752449520f2b072104e79c31d66eb71b55afd7eb838088d4d69f3ac471fcdc0140a3ef7a6db58f07819432cff3df0e9665351d743dd7759ff65dc7fda7894853ff60572d8561f88ad140ab44f94faac20fb4e6ab0a5e01d83e0000000049454e44ae426082</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-file-text-alt]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global
		zmscontext options/zmscontext;
		session_id python:request.SESSION.getId();
		dummy0 python:request.set('CKEDITOR_config_toolbar',[
				['Format'],
				['Bold','Italic','Underline','NumberedList','BulletedList'],
				['Undo','Redo'],
				['mediabutton'],
				['Find','linkbutton','Link','Unlink'],
				['Anchor','Table'],
				['Source','ShowBlocks','Maximize','About']
			])">

<style>
span.active {
	background-color:#FFF;
	font-weight:bold;
}
span.mouseover {
	border:1px solid #999;
	background-color:#DFF1FF;
}
</style>

<!--
////////////////////////////////////////////////////////////////////////////////
/// CKEDITOR Plugin
////////////////////////////////////////////////////////////////////////////////
-->

<script>

$(function() {
	if($("form#form0 input[name=session_id]").length==0) {
		$("form#form0").append('<input type="hidden" name="session_id" tal:attributes="value session_id"/>');
	}
	$(".zmiRichtextEditorHeadline").hide();
});

</script>

</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[richtext]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSRichtext.onChangeObjEvt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext=None
##title=py: Event: onChange-Object
##
# --// BO onChangeObjEvt //--

temp_folder = context.temp_folder
request = context.REQUEST

# Find images/files.
text = zmscontext.attr('text')
l = []
lt = []
for sp in ['src="', 'href="' ]:
  for s in text.split(sp):
    ref = s[:s.find('"')]
    if ref.find('/'+zmscontext.id+'/') >= 0:
      idmedia = ref.split('/')[-1]
      l.append(idmedia)
    elif ref.find('/'+temp_folder.id+'/') >= 0:
      lt.append(ref)

# Remove unused images/files.
ob_ids = zmscontext.objectIds(['File','Image'])
for ref in l:
  id = ref.split('/')[-1]
  if id in ob_ids:
    ob_ids.remove(id)
if len(ob_ids) > 0:
  zmscontext.manage_delObjects(ids=ob_ids)

# Add new images/files from temp_folder.
for ref in lt:
  id = ref.split('/')[-1]
  ob = getattr(temp_folder,id,None)
  if ob is not None:
    new_id = ob.title_or_id()
    new_title = ''
    new_data = ob.data
    if ob.meta_type == 'Image':
      zmscontext.manage_addImage( id=new_id, title=new_title, file=new_data)
    else:
      zmscontext.manage_addFile( id=new_id, title=new_title, file=new_data)
    temp_folder.manage_delObjects(ids=[id])
    text = text.replace('"'+ref+'"','"./'+zmscontext.id+'/'+new_id+'"')
zmscontext.attr('text',text)

# --// EO onChangeObjEvt //--
]]>
                  </item>
                  <item key="id"><![CDATA[onChangeObjEvt]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Event: onChange-Object]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSRichtext.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		text          python:unicode(zmscontext.getText(request),'utf-8');
		format        python:unicode(zmscontext.attr('format'),'utf-8');
		renderedText  python:zmscontext.renderText(format,'text',text,request,zmscontext.id)"
		tal:content="structure renderedText">
	The text
</tal:block>

<!-- /ZMSRichtext.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSRichtext]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSRichtext]]></item>
          <item key="name"><![CDATA[ZMSRichtext]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.1]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSSqlDb]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmssqldb.gif" type="file">47494638396112001000b30000337270754b39707170007e9c558b7e009ab501a9e9b4572efe152eff00ffa19367bed216dfbe65fed965a7a7a7e5e5e521f90401000009002c000000001200100000045930c949abbd983ae1ba93ce500c44d53d4f071a2c603aa89a38ace1ce1e9ce6452b290c8682b339200e0780f2e66834180210627af8689c5029d53ae1288620e42140b40acee7496ec18e66d4ec85fb3d8bcfdfe8347dcf8f00003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-building]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSSqlDb.renderShort -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">
	<h4>
		<i class="icon-table"></i>
		<tal:block tal:content="python:zmscontext.connection_id">the connection-id</tal:block>
	</h4>
	<ul>
		<li tal:repeat="table python:filter(lambda x:x['type']=='table',zmscontext.getEntities())">
			<a tal:attributes="href python:'%s/manage_main?qentity=%s'%(zmscontext.id,table['id'])" tal:content="table/id">the table</a>
		</li>
	</ul>
	<br/>
</tal:block>

<!-- /ZMSSqlDb.renderShort -->]]>
                  </item>
                  <item key="id"><![CDATA[renderShort]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[ZMSSqlDb]]></item>
          <item key="name"><![CDATA[ZMSSqlDb]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.2.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSSysFolder]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmssysfolder.gif" type="file">47494638396110001000b30000aa9d88d1b375fdfcc8f5e0a1fdf1a9fdfeede6cb87fdf8b7fdfed8ff00ffbbb69eb9b097e0c483fde89efdfefaedd48c21f90401000009002c000000001000100003045f30c9496b5a2feb65e57320283c4af7208820a484e66269aaaa61980d78aeeb1952fcc020f061101c8ec8e471f410109ed0e8f3403c48af8483c1406878bf602f61db1d7ccd5e3481c120ecde8371bbd1add3ef5d0620c0effbfd001d820911003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmssysfolder_disabled.gif" type="file">47494638396110001000b30000ff00ffbdbebde4e2e4f4f3f4f9faf9cecdceacabacf0eff0fdfefdb9bab9dbdadbe8e9e8f9f8f9d3d2d3fdfcfd78787821f90401000000002c000000001000100003046110c8492b482aeb64a5420811124dd02904c130eaa1bd98aaaecc008a6026ecc2b2fb3d5e26354a198f8a466dc06c3a078ccce040ad5aa983e4f4ca3d340a8785784c167b1be19e58ed3317c0bcb8dc0b5e84eff67cb86008f8ff8080061d840011003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-folder-close]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[0]]></item>
                  <item key="id"><![CDATA[attr_cacheable]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Cacheable]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[TAB_METADATA]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[TAB_METADATA]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[delimiter]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_dc_description]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[DC.Description]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[text]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tal:block tal:define="global
		zmscontext options/zmscontext;
		SecurityManager modules/AccessControl/getSecurityManager;
		skey python:request.get('skey', 'id');
		rkey python:request.get('rkey', '')">

<!--
################################################################################
##### Action-List
################################################################################
-->
<div align="right" class="form-small" width="100%">
	<select name=":action"	tal:attributes="onchange python:'location.href=\'%s/\'+this.options[this.selectedIndex].value'%request['URL1']">
		<option value="manage_workspace" tal:content="python:'----- %s -----'%zmscontext.getZMILangStr('ACTION_INSERT')%zmscontext.display_type(request)">----- Insert -----</option>
		<tal:block tal:repeat="meta_type python:filter(lambda x:x['name'].find('ZMS')<>0,zmscontext.sort_list(zmscontext.filtered_meta_types(),'name'))">
			<option tal:attributes="value python:meta_type['action']" tal:content="python:meta_type['name']">the name</option>
		</tal:block>
	</select>
</div>

<!--
################################################################################
##### Object-List
################################################################################
-->

<tal:block tal:define="global items python:filter(lambda x:x[1].meta_type.find('ZMS')<>0,zmscontext.objectItems())">
<tal:block tal:condition="python:len(items)>0">
<table class="table table-striped">
<thead>
<tr>
	<th>&nbsp;</th>
	<tal:block define="global
			columns python:['meta_type','id','get_size','bobobase_modification_time'];
			labels python:{'meta_type':'type','id':'name','get_size':'size','bobobase_modification_time':'last_modified'}">
		<tal:block tal:repeat="column columns">
			<th tal:define="global label python:zmscontext.getZMILangStr('ATTR_%s'%labels[column].upper())">
				<i tal:condition="python:skey==column or rkey==column" tal:attributes="class python:['icon-caret-down','icon-caret-up'][int(rkey==column)]"></i>
				<a tal:attributes="href python:zmscontext.url_append_params(request['URL'],{['skey','rkey'][int(skey==column)]:column}); title python:'Sort objects by %s'%label"><tal:block tal:content="label">the label</tal:block></a>
			</th>
		</tal:block>
	</tal:block>
</tr>
</thead>
<tbody>
<tr tal:repeat="item items">
	<td><input type="checkbox" name="ids:list" tal:attributes="value python:item[0]"/></td>
	<td>
		<tal:block tal:condition="python:item[1].icon">
			<img tal:attributes="src python:item[1].icon; title python:item[1].meta_type"/>
		</tal:block>
	</td>
	<td>
		<a tal:attributes="href python:'%s/manage_workspace'%item[1].absolute_url()">
			<tal:block tal:content="python:item[0]">the id</tal:block>
			<tal:block tal:condition="python:item[1].title">(<tal:block tal:content="python:item[1].title">the title</tal:block>)</tal:block>
		</a>
	</td>
	<td><tal:block tal:content="python:zmscontext.getDataSizeStr(item[1].get_size())">the size</tal:block></td>
	<td><tal:block tal:content="python:zmscontext.getLangFmtDate(item[1].bobobase_modification_time())">the timestamp</tal:block></td>
</tr>
</tbody>
</table>
<tal:block tal:condition="not:python:request.get('dontAllowCopyAndPaste')">
	<input class="btn" type="submit" name="manage_renameForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_RENAME')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_cutForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_CUT')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_copyForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_COPY')" tal:condition="items"/>
	<input class="btn" type="submit" name="manage_pasteForm:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_PASTE')" tal:condition="python:request.get('cb_dataValid')"/>
	<input class="btn" type="submit" name="manage_delObjects:method" tal:attributes="value python:zmscontext.getZMILangStr('BTN_DELETE')" tal:condition="python:SecurityManager.checkPermission('Delete objects',zmscontext)"/>
	<input class="btn" type="submit" name="manage_importExportForm:method" value="Import/Export" tal:condition="python:SecurityManager.checkPermission('Import/Export objects',zmscontext)"/>
</tal:block>
</tal:block>
</tal:block>

</tal:block>
</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[ZMSSysFolder]]></item>
          <item key="name"><![CDATA[ZMSSysFolder]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.3]]></item>
          <item key="type"><![CDATA[ZMSDocument]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSTable]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmstable.gif" type="file">47494638396112001000f700000000845e6190606493636796656a9a676d9e6970a26b74a56d77a86f7aac7578a3767ca6727cae7880ab7a83b07d89b67f8ebcff00ff8080808195c3849bca87a1d287a9dc8aa8d98caedf92bcef94bff2b0d7ffc2e1ffc6e3ffcee6ffd1e8ffe4edf5e8eff7f3f9fffeffffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021f90401000011002c00000000120010000008920023081c48b020410d16122a5cb89081c00c00224a9c38d161040c14334ab47881040909233c4a00415282070f122c56101952c4c8921f502610484182cd9b387122103841a4881020467af820a1030709070442100934e850941c36483020f041ceab370b0874f0f3254a0f46256c904a406003a042891a953a56c200810bb06215205081ddbb78f30630c8b7af5fbe0101003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmstable_disabled.gif" type="file">47494638396112001000f700005c5c5c6565656767676a6a6a6d6d6d7070707373737676767979797b7b7b7c7c7c7e7e7eff00ff8080808282828585858a8a8a8e8e8e9494949999999e9e9ea4a4a4a9a9a9b5b5b5b7b7b7cfcfcfdbdbdbdddddde1e1e1e3e3e3ebebebedededf7f7f7fefefeffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021f9040100000c002c00000000120010000008920019081c48b020410c15122a5cb87081c00b00224a9c38d121030b14334ab45841848806213c36f040b201070e0d2c52101912c4c8921d502a1038a181cd9b38712210284124880f1e4672e8d060838606070446100934e850941a323430201042ceab370b087cf0f3254a0e461b64904a40a003a042891a953ab6c100810bb06215203081ddbb78f30630c8b7af5fbe0101003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-table]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[caption]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Caption]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[align]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[TOP]]></item>
                      <item><![CDATA[BOTTOM]]></item>
                      <item><![CDATA[LEFT]]></item>
                      <item><![CDATA[RIGHT]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Align]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[0]]></item>
                  <item key="id"><![CDATA[sortable]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Sortable]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[boolean]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<!--
################################################################################
##### Table(Type,Cols,Rows): INSERT
################################################################################
-->
<tal:block tal:condition="python:request.get('ZMS_INSERT')">
<input type="hidden" name="redirect_self:int" value="1"/>

<span class="ui-helper-hidden" id="fmName" tal:content="request/fmName"></span>
<span class="ui-helper-hidden" id="textFormatDefault" tal:content="python:here.getTextFormatDefault()"></span>
<style>
div.ZMSTable table.ZMSTable tr th,
div.ZMSTable table.ZMSTable tr td {
	border:1px solid black;
	width:5em!important;
	height:.2em!important;
	padding:0!important;
	overflow:hidden!important;
}
</style>
<script>

var fmName = $('#fmName').text();
var textFormatDefault = $("#textFormatDefault").text();

function onZMSTableFormSubmit() {
	var xml = '';
	var type = parseInt($("input[name=\x22type:int\x22]:checked").val());
	xml += '<'+'list>\n';
	for ( var y = 0; y < parseInt($('#rows').val()); y++) {
		xml += '<'+'item type="list"><list>\n';
		if ( y==0 && type == 2) {
			xml += '<'+'item type="dictionary"><'+'dictionary>\n';
			xml += '<'+'item key="colspan" type="int">'+parseInt($('#cols').val())+'<'+'/item>\n';
			xml += '<'+'item key="content"><'+'/item>\n';
			xml += '<'+'item key="format">'+textFormatDefault+'<'+'/item>\n';
			xml += '<'+'item key="tag">th<'+'/item>\n';
			xml += '<'+'/dictionary><'+'/item>\n';
		}
		else {
			for ( var x = 0; x < parseInt($('#cols').val()); x++) {
				xml += '<'+'item type="dictionary"><'+'dictionary>\n';
				if ( y==0 && x == 0 && type == 4) {
					xml += '<'+'item key="colspan" type="int">1<'+'/item>\n';
				}
				else {
					var tag = "td";
					if ( (type == 1 && y == 0) ||
						(type == 3 && x == 0) ||
						(type == 4 && (x == 0 || y == 0))) {
						tag = "th";
					}
					xml += '<'+'item key="colspan" type="int">1<'+'/item>\n';
					xml += '<'+'item key="content"><'+'/item>\n';
					xml += '<'+'item key="format">'+textFormatDefault+'<'+'/item>\n';
					xml += '<'+'item key="tag">'+tag+'<'+'/item>\n';
				}
				xml += '<'+'/dictionary><'+'/item>\n';
			}
		}
		xml += '<'+'/list><'+'/item>\n';
	}
	xml += '<'+'/list>\n';
	$("#table_table").val( xml);
	return onFormSubmit(fmName);
}

$("form[name="+fmName+"]").submit( onZMSTableFormSubmit);
$()

</script>

<table cellspacing="0" cellpadding="1" border="0" width="100%">
<colgroup>
	<col width="20%" />
	<col width="80%" />
</colgroup>
<tr valign="top">
	<td class="form-label" tal:content="structure python:'%s &times; %s%s'%(here.getZMILangStr('ATTR_COLS'),here.getZMILangStr('ATTR_ROWS'),here.FORM_LABEL_MANDATORY)">Cols x Rows*</td>
	<td class="form-element"><tal:block tal:content="structure python:here.getTextInput(fmName=request['fmName'],elName='cols',value='3',size=2)"></tal:block> &times; <tal:block tal:content="structure python:here.getTextInput(fmName=request['fmName'],elName='rows',value='3',size=2)"></tal:block></td>
</tr>
<tr valign="top">
	<td rowspan="5" class="form-label" tal:content="python:here.getZMILangStr('ATTR_TYPE')">the type-label</td>
	<td>
		<table>
		<tr>
			<td></td>
			<td style="border-bottom:1px solid #CCC;text-align:center;" tal:content="python:'%i %s'%(3,here.getZMILangStr('ATTR_COLS'))">n cols</td>
		</tr>
		<tr>
			<td valign="middle" rowspan="3"><input type="radio" name="type:int" value="1" checked="checked"></td>
			<td>
				<div class="ZMSTable">
					<table class="ZMSTable">
					<tr><th>&nbsp;</th><th>&nbsp;</th><th>&nbsp;</th></tr>
					<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					</table>
				</div>
			</td>
			<td style="border-left:1px solid #CCC;vertical-align:middle;" tal:content="python:'%i %s'%(3,here.getZMILangStr('ATTR_ROWS'))">n rows</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td>
		<table>
		<tr>
			<td valign="middle"><input type="radio" name="type:int" value="2"></td>
			<td>
				<div class="ZMSTable">
					<table class="ZMSTable">
					<tr><th colspan="3">&nbsp;</th></tr>
					<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					<tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
					</table>
				</div>
			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td>
		<table>
		<tr>
			<td valign="middle"><input type="radio" name="type:int" value="3"></td>
			<td>
				<div class="ZMSTable">
					<table class="ZMSTable">
					<tr><th>&nbsp;</th><td>&nbsp;</td><td>&nbsp;</td></tr>
					<tr><th>&nbsp;</th><td>&nbsp;</td><td>&nbsp;</td></tr>
					<tr><th>&nbsp;</th><td>&nbsp;</td><td>&nbsp;</td></tr>
					</table>
				</div>
			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td>
		<table>
		<tr>
			<td valign="middle"><input type="radio" name="type:int" value="4"></td>
			<td>
				<div class="ZMSTable">
					<table class="ZMSTable">
					<tr><td>&nbsp;</td><th>&nbsp;</th><th>&nbsp;</th></tr>
					<tr><th>&nbsp;</th><td>&nbsp;</td><td>&nbsp;</td></tr>
					<tr><th>&nbsp;</th><td>&nbsp;</td><td>&nbsp;</td></tr>
					</table>
				</div>
			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td>
		<table>
		<tr>
			<td></td>
			<td style="border-bottom:1px solid #CCC;text-align:center;" tal:content="python:here.getZMILangStr('ATTR_CUSTOM')">custom</td>
		</tr>
		<tr>
			<td valign="middle"><input type="radio" name="type:int" value="5"></td>
			<td>
				<div class="ZMSTable">
					<table class="ZMSTable">
					<tr><th>&nbsp;</th><td>&nbsp;</td><th>&nbsp;</th></tr>
					<tr><td>&nbsp;</td><th>&nbsp;</th><td>&nbsp;</td></tr>
					<tr><th>&nbsp;</th><td>&nbsp;</td><th>&nbsp;</th></tr>
					</table>
				</div>
			</td>
		</tr>
		</table>
	</td>
</tr>
</table>

</tal:block>

<!--
################################################################################
##### Table(Type,Cols,Rows): EDIT
################################################################################
-->
<tal:block tal:condition="not:python:request.get('ZMS_INSERT')">
<tal:block tal:define="global
		zmscontext options/zmscontext;
		table_table python:zmscontext.attr('table');
		table_type python:zmscontext.attr('type');
		table_colgroup_cols python:zmscontext.attr('cols');
		table_cols python:len(table_table[-1]);
		table_rows python:len(table_table);
		table_widths python:zmscontext.attr('widths');">

<!--
--------------------------------------------------------------------------------
--- Table-Cell Editor
--------------------------------------------------------------------------------
-->
<tal:block tal:define="global custom python:''
		+'<td class=\042form-text\042>'+here.getZMILangStr('ATTR_FORMAT')+'</td>'
		+'<td>'+here.f_selectInput(fmName=request.get('fmName'),elName='tag',value='',type='select',lang_str=here.getZMILangStr('ATTR_FORMAT'),required=1,options=['th','td'],enabled=True,css='form-element',REQUEST=request)+'</td>'
		+'<td class=\042form-text\042>'+here.getZMILangStr('ATTR_PARAGRAPH')+'</td>'
		+'<td>'+here.f_selectTextformat(here,REQUEST=request)+'</td>'">
	<div class="ui-helper-hidden ui-helper-overlay">&nbsp;</div>
	<div class="ui-helper-hidden">
		<div id="div_table_cell_editor">
			<tal:block tal:content="structure python:here.f_selectRichtext(ob=here,fmName=request['fmName'],elName='content_editor',cols=25,rows=10,value='',key='cell',enabled=True,lang=request['lang'],lang_str=here.getZMILangStr('ACTION_EDIT_CELL'),custom_str=custom,REQUEST=request,css='form-element',wrap='virtual')"></tal:block>
			<div class="control-group">
				<div class="controls save">
					<button class="btn btn-primary" type="submit" tal:attributes="value python:here.getZMILangStr('BTN_CHANGE')" onclick="return table_cell_change();">
						<tal:block tal:content="python:here.getZMILangStr('BTN_CHANGE')">Change</tal:block>
					</button>
					<button class="btn" type="submit" tal:attributes="value python:here.getZMILangStr('BTN_CANCEL')" onclick="return table_cell_cancel();">
						<tal:block tal:content="python:here.getZMILangStr('BTN_CANCEL')">Cancel</tal:block>
					</button>
				</div>
			</div>
		</div>
	</div>
</tal:block>

<!--
--------------------------------------------------------------------------------
--- Table-Cell Grid
--------------------------------------------------------------------------------
-->

<span class="ui-helper-hidden" id="fmName" tal:content="request/fmName"></span>
<span class="ui-helper-hidden" id="elName" tal:content="request/elName"></span>
<span class="ui-helper-hidden" id="textFormatDefault" tal:content="python:here.getTextFormatDefault()"></span>
<tal:block tal:condition="python:request.get('richedit_fmt',None)"><span class="ui-helper-hidden" id="richedit_fmt" tal:content="python:request.get('richedit_fmt').getId()"></span></tal:block>
<span class="ui-helper-hidden" id="table_type" tal:content="table_type"></span>
<span class="ui-helper-hidden" id="table_cell_uid" tal:content="python:table_cols*table_rows"></span>
<style>
.div_table_cell_editor_parent {
	position:absolute;
	background:#FEFEFE;
	border:1px solid #000;
	z-index:9999;
}
#div_table_cell_editor {
	width:65em;
	margin:1em;
}
.ui-helper-overlay {
	position:absolute!important;
	top:0!important;
	left:0!important;
	background-color:black!important;
	width:100%!important;      
	height:100%!important;
	filter:Alpha(opacity=40);-moz-opacity:0.40;opacity:0.40;
	z-index:9998!important;
}
table#table_cell_editor > thead > tr > th,
table#table_cell_editor > tbody > tr > td {
	padding:2px;
}
img.vbutton {
	border:1px solid #CCC;
	height:16px!important;
	width:8px!important;
	border-radius:3px;
}
img.hbutton {
	border:1px solid #CCC;
	height:8px!important;
	width:16px!important;
	border-radius:3px;
}
.ZMSTable-buttons {
	line-height:0.5em;
	background-color:#EEE;
	border:2px solid #EEE;
}
.ZMSTable-cell {
	border:1px solid #CCC;
}
.ZMSTable-cell.top {
	border-top:2px solid #666;
}
.ZMSTable-cell.right {
	border-right:2px solid #666;
}
.ZMSTable-cell.bottom {
	border-bottom:2px solid #666;
}
.ZMSTable-cell.left {
	border-left:2px solid #666;
}
.table_cell_editable.changed {
	background-color:#FFF;
}
.table_cell_editable.active {
	background-color:#FFC;
}
.table_cell_editable.new {
	background-color:#DFD;
}
</style>
<script>

var fmName = $('#fmName').text();
var elName = $('#elName').text();
var textFormatDefault = $("#textFormatDefault").text();
var richedit_fmt = $('#richedit_fmt').text();
var table_type = parseInt($('#table_type').text());
var table_cell_uid = $('#table_cell_uid').text();
var table_cell_id = '';
var table_cell_offs = 2;

function onZMSTableFormSubmit() {
	var xml = '';
	xml += '<'+'list>\n';
	var el_tbody = $($("#table_cell_editor").children()[0]);
	var el_trs = el_tbody.children().filter(":gt(1)").filter(":not(:last)");
	for ( var i=0; i < el_trs.length; i++) {
		xml += '<'+'item type="list"><'+'list>\n';
		var el_tds = $(el_trs[i]).children().filter(":gt(1)").filter(":not(:last)");
		for ( var j=0; j < el_tds.length; j++) {
			xml += '<'+'item type="dictionary"><'+'dictionary>\n';
			var colspan = $(el_tds[j]).prop("colspan");
			if (typeof colspan=="undefined") {
				colspan = 1;
			}
			xml += '<'+'item key="colspan" type="int">'+colspan+'<'+'/item>\n';
			var el_inputs = $("textarea,input",el_tds[j]);
			for ( var k=0; k < el_inputs.length; k++) {
				var key = el_inputs[k].id.substr(0,el_inputs[k].id.indexOf("_"));
				xml += '<'+'item key="'+key+'"><'+'![CDATA'+'['+$(el_inputs[k]).val()+']'+']><'+'/item>\n';
			}
			xml += '<'+'/dictionary><'+'/item>\n';
		}
		xml += '<'+'/list><'+'/item>\n';
	}
	xml += '<'+'/list>\n';
	$("#table_table").val( xml);
	xml = '';
	xml += '<'+'list>\n';
	var el_trs = el_tbody.children().filter(":eq(1)");
	for ( var i=0; i < el_trs.length; i++) {
		var el_inputs = $("input:text",el_trs[i]);
		for ( var j = 0; j < el_inputs.length; j++) {
			xml += '<'+'item type="string">'+$(el_inputs[j]).val()+'<'+'/item>\n';
		}
	}
	xml += '<'+'/list>\n';
	$("#table_colgroup_cols").val( xml);
	return onFormSubmit(fmName);
}

function table_cell_edit(el_td) {
	var el = $('textarea',el_td);
	var el_name = el.attr('name');
	table_cell_id = el_name.substr(el_name.indexOf('_')+1);
	// Set cell background.
	el_td.addClass("active");
	// Apply values.
	$('#zmiRichtextEditor'+elName).hide();
	$('#zmiStandardEditor'+elName).show();
	$('#content_editor').val($('#content_'+ table_cell_id).val());
	$('#tag').val($('#tag_'+ table_cell_id).val());
	$('#format').val($('#format_'+ table_cell_id).val());
	if (typeof richedit_fmt != 'undefined') {
		zmiRichtextSyncDataToView(elName);
		if ( $('#format').val()==richedit_fmt) {
			$('#zmiRichtextEditor'+'content_editor').show();
			$('#zmiStandardEditor'+'content_editor').hide();
			zmiStandardOnSubmitEventHandler();
		}
	}
	// Open cell editor.
	/*
	$('#div_table_cell_editor').dialog({
			title:getZMILangStr('ATTR_COL')+': '+getZMILangStr('BTN_EDIT'),
			width:'auto',
			height:'auto',
			modal:true,
			close: function(event, ui) {
					table_cell_cancel(event);
				}
	});
	*/
	var offset = $(el_td).offset();
	$('.ui-helper-overlay').removeClass('ui-helper-hidden');
	$('#div_table_cell_editor').parent().addClass('div_table_cell_editor_parent').css({left:offset.left,top:offset.top}).removeClass('ui-helper-hidden');
	$('div#zmiRichtextEditor'+'content_editor').height(300);
	zmiRichtextResize('content_editor');
}

function table_cell_change() {
	if (typeof richedit_fmt != 'undefined') {
		if ( $('#format').val()==richedit_fmt) {
			zmiRichtextOnSubmitEventHandler();
			$('#input_'+ table_cell_id).hide();
			$('#preview_'+ table_cell_id).show();
		}
		else {
			$('#input_'+ table_cell_id).show();
			$('#preview_'+ table_cell_id).hide();
		}
	}
	$('#format_'+ table_cell_id).val($('#format').val());
	$('#tag_'+ table_cell_id).val($('#tag').val());
	$('#content_'+ table_cell_id).val($('#content_editor').val());
	$('#preview_'+ table_cell_id).html($('#content_editor').val());
	return table_cell_cancel();
}

function table_cell_cancel(event) {
	// Reset cell background.
	var el_td = $("td.active");
	el_td.removeClass("active");
	// Close cell editor.
	if (!event) {
		/*
		$('#div_table_cell_editor').dialog('close');
		*/
		$('.ui-helper-overlay').addClass('ui-helper-hidden');
		$('#div_table_cell_editor').parent().addClass('ui-helper-hidden');
	}
	return false;
}

function table_cell_init() {
	$("form[name="+fmName+"] input[type=hidden]+textarea").change( function () { $(this).parents(".table_cell_editable").addClass('changed');});
	$("form[name="+fmName+"] .table_cell_editable").dblclick( function () { table_cell_edit($(this));});
	$('div[id^=preview_]')
		.attr('contenteditable','').keyup(onKeyUpZMSTableDivContenteditable).blur(onKeyUpZMSTableDivContenteditable);
}

function actionBtnClick(el, fct) {
	var x = 0;
	var el_td = $($(el).parents("td")[1]);
	while ( el_td.prev().length > 0) {
		x++;
		el_td = $(el_td.prev()[0]);
	}
	var y = 0;
	var el_tr = $(el_td.parent("tr"));
	while ( el_tr.prev().length > 0) {
		y++;
		el_tr = $(el_tr.prev()[0]);
	}
	var el_tbody = $($(el).parents("tbody")[1]);
	if (fct.indexOf('_col') > 0) {
		el_tbody.children().filter(":eq(1)").children().filter(":gt(1)").filter(":not(:last)").html("&nbsp;");
	}
	//////////////////////////////////////////////////////////////////////////////
	/// DELETE
	//////////////////////////////////////////////////////////////////////////////
	if (fct.indexOf('delete') == 0) {
		if (confirm(getZMILangStr('MSG_CONFIRM_DELOBJ'))) {
			if (fct.indexOf('delete_col') == 0) {
				var el_trs = el_tbody.children();
				for ( var i = 0; i < el_trs.length; i++) {
					if ( i == table_cell_offs && table_type == 2) {
						var el_td = $($(el_trs[i]).children().filter(":eq("+table_cell_offs+")")[0]);
						el_td.prop("colspan",parseInt(el_td.prop("colspan"))-1);
					}
					else {
						var el_td = $($(el_trs[i]).children().filter(":eq("+x+")")[0]);
						el_td.remove();
					}
				}
				$('#cols').val( parseInt($('#cols').val())-1);
			}
			else if (fct.indexOf('delete_row') == 0) {
				var el_tr = $(el_tbody.children().filter(":eq("+y+")")[0]);
				el_tr.remove();
				$('#rows').val( parseInt($('#rows').val())-1);
			}
		}
	}
	//////////////////////////////////////////////////////////////////////////////
	/// INSERT
	//////////////////////////////////////////////////////////////////////////////
	else if (fct.indexOf('insert_col') == 0) {
		var el_trs = el_tbody.children();
		for ( var i = 0; i < el_trs.length; i++) {
			if ( i == table_cell_offs && table_type == 2) {
				var el_td = $($(el_trs[i]).children().filter(":eq("+table_cell_offs+")")[0]);
				el_td.attr("colspan",parseInt(el_td.attr("colspan"))+1);
			}
			else {
				var el_tds = $(el_trs[i]).children();
				var el_td = $(el_tds.filter(":eq("+x+")")[0]);
				var new_td = insertCell(el_tds[el_tds.length-2]);
				new_td.insertBefore( el_td);
			}
		}
		$('#cols').val( parseInt($('#cols').val())+1);
		table_cell_init();
	}
	else if (fct.indexOf('insert_row') == 0) {
		var el_trs = el_tbody.children();
		var el_tr = $(el_trs.filter(":eq("+y+")")[0]);
		var new_tr = insertCell(el_trs[el_trs.length-2]);
		new_tr.insertBefore( el_tr);
		$('#rows').val( parseInt($('#rows').val())-1);
		table_cell_init();
	}
	//////////////////////////////////////////////////////////////////////////////
	/// MOVE
	//////////////////////////////////////////////////////////////////////////////
	else if (fct.indexOf('move_col') == 0) {
		var source_x = x;
		var target_x = x;
		if (fct == 'move_col_left') {
			target_x = target_x - 1;
		}
		else {
			target_x = target_x + 1;
		}
		var el_trs = el_tbody.children().filter(":gt(1)").filter(":not(:last)");
		for ( var i = 0; i < el_trs.length; i++) {
			var source_td = $($(el_trs[i]).children().filter(":eq("+source_x+")")[0]);
			var target_td = $($(el_trs[i]).children().filter(":eq("+target_x+")")[0]);
			moveCell(source_td, target_td);
		}
	}
	else if (fct.indexOf('move_row') == 0) {
		var source_y = y;
		var target_y = y;
		if (fct == 'move_row_up') {
			target_y = target_y - 1;
		}
		else {
			target_y = target_y + 1;
		}
		var source_tr = $(el_tbody.children().filter(":eq("+source_y+")")[0]);
		var target_tr = $(el_tbody.children().filter(":eq("+target_y+")")[0]);
		moveCell(source_tr, target_tr);
	}
	else {
		var par = Math.max(x,y)-table_cell_offs;
		var fm = document.forms[fmName];
		fm.elements['function'].value = fct;
		fm.elements['param'].value = par;
		fm.submit();
	}
}

function insertCell(source) {
	var clone = $(source).clone();
	$("table.ZMSTable td",clone).each(function() {
			// Remove table with inline-links (if exists).
			$("table",this).remove();
			$("textarea,input",this).each(function() {
					var key = this.id.substr(0,this.id.indexOf("_"));
					$(this).attr( "id", key+"_" + table_cell_uid);
					$(this).attr( "name", key+"_" + table_cell_uid);
					if ( key.indexOf("format") == 0) {
						$(this).val( textFormatDefault);
					}
					else if ( key.indexOf("content") == 0) {
						$(this).val( "").css( 'border', '2px solid #00FF00');
					}
				});
			$("div[id^=preview]",this).each(function() {
					$(this).attr("id","preview_"+table_cell_uid).html( "&nbsp;")
						.attr('contenteditable','').keyup(onKeyUpZMSTableDivContenteditable).blur(onKeyUpZMSTableDivContenteditable);
				});
			$(this).addClass('new');
			table_cell_uid++;
		});
	return clone;
}

function moveCell(source, target) {
	var source_inp = $("textarea,input",source);
	var target_inp = $("textarea,input",target);
	for ( var j = 0; j < source_inp.length; j++) {
		var v = $(source_inp[j]).val();
		$(source_inp[j]).val( $(target_inp[j]).val());
		$(target_inp[j]).val( v);
	}
	var source_preview = $("div[id^=preview]",source);
	var target_preview = $("div[id^=preview]",target);
	for ( var j = 0; j < source_preview.length; j++) {
		var v = $(source_preview[j]).html();
		$(source_preview[j]).html( $(target_preview[j]).html());
		$(target_preview[j]).html( v);
	}
}

function onKeyUpZMSTableDivContenteditable() {
	var $textarea = $("textarea",$(this).prev());
	$textarea.val($(this).html());
}

$(function(){
	$('form[name='+fmName+']').submit( onZMSTableFormSubmit).addClass('form-horizontal');
	table_cell_init();
});

</script>

<img src="/misc_/zms/spacer.gif" alt="" border="0" height="2"/>

<table id="table_cell_editor" cellspacing="0" cellpadding="0" border="0">

<tr valign="middle">
	<td>&nbsp;</td>
	<td><img src="/misc_/zms/spacer.gif" width="8" height="1" border="0"></td>
	<td align="center" tal:repeat="col_index python:range(table_cols)">
		<table cellspacing="0" cellpadding="0" border="0" class="ZMSTable-buttons">
		<tr>
			<td><a href="#" class="vbutton"><img src="/misc_/zms/btn_arr_left.gif" tal:attributes="title python:here.getZMILangStr('ACTION_MOVELEFT')" border="0" onclick="actionBtnClick(this,'move_col_left')" class="vbutton"/></a></td>
			<td><a href="#" class="vbutton"><img src="/misc_/zms/btn_arr_right.gif" tal:attributes="title python:here.getZMILangStr('ACTION_MOVERIGHT')" border="0" onclick="actionBtnClick(this,'move_col_right')" class="vbutton"/></a></td>
			<td tal:condition="python:col_index>0 or table_type==1"><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_INSERT_COL')"><span onclick="actionBtnClick(this,'insert_col')" class="ui-icon ui-icon-plus"></span></div></td>
			<td tal:condition="python:col_index>0 or table_type==1"><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_DELETE_COL')"><span onclick="actionBtnClick(this,'delete_col')" class="ui-icon ui-icon-trash"></span></div></td>
		</tr>
		</table>
	</td>
	<td>
		<table cellspacing="0" cellpadding="0" border="0" class="ZMSTable-buttons">
		<tr>
			<td><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_INSERT_COL')"><span onclick="actionBtnClick(this,'insert_col')" class="ui-icon ui-icon-plus"></span></div></td>
		</tr>
		</table>
	</td>
</tr>

<tr>
	<td align="right">Colgroup</td>
	<td tal:content="structure python:here.getCheckbox(fmName=request['fmName'],elName='colgroup',value=zmscontext.attr('colgroup'),enabled=True,REQUEST=request)"></td>
	<td tal:repeat="col_index python:range(table_cols)" align="center" nowrap="nowrap" tal:attributes="class python:' '.join(['ZMSTable-cell']+[['bottom'],[]][int(col_index==0 and table_type==4)])">
		<tal:block tal:condition="python:zmscontext.attr('colgroup')">
			<input style="width:3em" type="text" size="3" tal:attributes="name python:'col%i'%col_index; value python:(table_colgroup_cols+[''])[min(col_index,len(table_colgroup_cols))]" style="text-align:right;"/>
			(&Oslash;=<tal:block tal:content="python:table_widths[col_index]"></tal:block>)%
		</tal:block>
		<tal:block tal:condition="not:python:zmscontext.attr('colgroup')">
			&nbsp;
		</tal:block>
	</td>
	<td>&nbsp;</td>
</tr>

<tr tal:repeat="row_index python:range(table_rows)" valign="middle">
	<td>
		<table cellspacing="0" cellpadding="0" border="0" class="ZMSTable-buttons">
		<tr>
			<td valign="bottom"><a href="#" class="hbutton"><img src="/misc_/zms/btn_arr_up.gif" tal:attributes="title python:here.getZMILangStr('ACTION_MOVEUP')" border="0" onclick="actionBtnClick(this,'move_row_up')" class="hbutton"/></a></td>
			<td valign="middle" rowspan="2" tal:condition="python:row_index>0 or table_type==3"><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_INSERT_ROW')"><span onclick="actionBtnClick(this,'insert_row')" class="ui-icon ui-icon-plus"></span></div></td>
			<td valign="middle" rowspan="2" tal:condition="python:row_index>0 or table_type==3"><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_DELETE_ROW')"><span onclick="actionBtnClick(this,'delete_row')" class="ui-icon ui-icon-trash"></span></div></td>
		</tr>
		<tr valign="top">
			<td><a href="#" class="hbutton"><img src="/misc_/zms/btn_arr_down.gif" tal:attributes="title python:here.getZMILangStr('ACTION_MOVEDOWN')" border="0" onclick="actionBtnClick(this,'move_row_down')" class="hbutton"/></a></td>
		</tr>
		</table>
	</td>
	<td tal:attributes="class python:' '.join(['ZMSTable-cell']+[['right'],[]][int(row_index==0 and table_type==4)])">&nbsp;</td>
	<tal:block tal:repeat="col_index python:range(len(table_table[row_index]))">
		<tal:block tal:define="global 
				cell python:table_table[row_index][col_index];
				pattern python:'%3Cdtml-var%20\042 getlinkurl\\((.*?),request\\)\042=\042\042>\042&gt\073';
				replacement python:'<dtml-var \042getLinkUrl(\\1,REQUEST)\042>\042>';
				cell_content python:here.re_sub(pattern,replacement,cell.get('content',''));
				cell_format python:['html',cell.get('format')][int(cell_content.find('dtml-')<0)];
				richedit_preview python:int(request.get('richedit_fmt') is not None and cell_format==request.get('richedit_fmt').getId())">
			<tal:block tal:condition="python:table_type==4 and row_index==0 and col_index==0">
				<td style="border-right: solid 1px black;border-bottom: solid 1px black;">&nbsp;</td>
			</tal:block>
			<tal:block tal:condition="not:python:table_type==4 and row_index==0 and col_index==0">
				<td class="ZMSTable-cell" tal:attributes="colspan cell/colspan">
				<div class="ZMSTable">
					<table style="width:100%" class="ZMSTable">
					<tr>
						<tal:block tal:content="structure python:'<%s title=\042onDblClick: %s\042 class=\042table_cell_editable\042>'%(cell['tag'],here.getZMILangStr('ACTION_EDIT_CELL'))">start-tag</tal:block>
						<div tal:attributes="id python:'input_%i_%i'%(col_index,row_index); class python:['','ui-helper-hidden'][richedit_preview]">
							<input type="hidden" tal:attributes="id python:'tag_%i_%i'%(col_index,row_index); value cell/tag"/>
							<input type="hidden" tal:attributes="id python:'format_%i_%i'%(col_index,row_index); value cell_format">
							<tal:block tal:content="structure python:here.getTextArea(request['fmName'],'content_%i_%i'%(col_index,row_index),10,1,value=cell_content,enabled=True,REQUEST=request,css='form-element',extra=' style=\042border:none;background-color:transparent;width:100%;\042')"></tal:block>
						</div>
						<div tal:attributes="id python:'preview_%i_%i'%(col_index,row_index);class python:['ui-helper-hidden',''][richedit_preview]">
							<tal:block tal:condition="cell/content" tal:content="structure cell_content">the cell-content</tal:block>
							<tal:block tal:condition="not:cell/content">&nbsp;</tal:block>
						</div>
						<tal:block tal:content="structure python:'</%s><!-- .table_cell_editable -->'%cell['tag']">end-tag</tal:block>
					</tr>
					</table><!-- .ZMSTable -->
				</div><!-- .ZMSTable -->
				</td>
			</tal:block>
		</tal:block>
	</tal:block>
	<td class="ZMSTable-cell left">&nbsp;</td>
</tr>

<tr valign="middle">
	<td>
		<table cellspacing="0" cellpadding="0" border="0" class="ZMSTable-buttons">
		<tr valign="middle">
			<td><img src="/misc_/zms/spacer.gif" alt="" border="0" width="20"/></td>
			<td><div class="zmi-icon ui-state-default ui-helper-clearfix ui-corner-all" tal:attributes="title python:here.getZMILangStr('ACTION_INSERT_ROW')"><span onclick="actionBtnClick(this,'insert_row')" class="ui-icon ui-icon-plus"></span></div></td>
		</tr>
		</table>
	</td>
	<td class="ZMSTable-cell">&nbsp;</td>
	<td class="ZMSTable-cell top" tal:repeat="col_index python:range(table_cols)">&nbsp;</td>
	<td class="ZMSTable-cell">&nbsp;</td>
</tr>

</table><!-- #table_cell_editor -->

<input type="hidden" id="cols" tal:attributes="value table_cols"/>
<input type="hidden" id="rows" tal:attributes="value table_rows"/>

</tal:block>
</tal:block>

<input type="hidden" id="table_table" tal:attributes="name python:'table_%s'%request['lang']" value="<list></list>"/>
<input type="hidden" id="table_colgroup_cols" tal:attributes="name python:'cols_%s'%request['lang']" value="<list></list>"/>
<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['type','table','colgroup','cols'])"></tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[type]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[int]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[table]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Table]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[list]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[1]]></item>
                  <item key="id"><![CDATA[colgroup]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Colgroup]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[boolean]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[cols]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Cols]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[list]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="application/x-javascript" filename="jquery.tablesorter.min.js" type="file">0a2866756e6374696f6e2824297b242e657874656e64287b7461626c65736f727465723a6e65770a66756e6374696f6e28297b76617220706172736572733d5b5d2c776964676574733d5b5d3b746869732e64656661756c74733d7b6373734865616465723a22686561646572222c6373734173633a22686561646572536f72745570222c637373446573633a22686561646572536f7274446f776e222c6373734368696c64526f773a22657870616e642d6368696c64222c736f7274496e697469616c4f726465723a22617363222c736f72744d756c7469536f72744b65793a2273686966744b6579222c736f7274466f7263653a6e756c6c2c736f7274417070656e643a6e756c6c2c736f72744c6f63616c65436f6d706172653a747275652c7465787445787472616374696f6e3a2273696d706c65222c706172736572733a7b7d2c776964676574733a5b5d2c7769646765745a656272613a7b6373733a5b226576656e222c226f6464225d7d2c686561646572733a7b7d2c776964746846697865643a66616c73652c63616e63656c53656c656374696f6e3a747275652c736f72744c6973743a5b5d2c6865616465724c6973743a5b5d2c64617465466f726d61743a227573222c646563696d616c3a272f5c2e7c5c2c2f67272c6f6e52656e6465724865616465723a6e756c6c2c73656c6563746f72486561646572733a277468656164207468272c64656275673a66616c73657d3b66756e6374696f6e2062656e63686d61726b28732c64297b6c6f6728732b222c222b286e6577204461746528292e67657454696d6528292d642e67657454696d652829292b226d7322293b7d746869732e62656e63686d61726b3d62656e63686d61726b3b66756e6374696f6e206c6f672873297b696628747970656f6620636f6e736f6c65213d22756e646566696e6564222626747970656f6620636f6e736f6c652e6465627567213d22756e646566696e656422297b636f6e736f6c652e6c6f672873293b7d656c73657b616c6572742873293b7d7d66756e6374696f6e206275696c645061727365724361636865287461626c652c2468656164657273297b6966287461626c652e636f6e6669672e6465627567297b766172207061727365727344656275673d22223b7d6966287461626c652e74426f646965732e6c656e6774683d3d302972657475726e3b76617220726f77733d7461626c652e74426f646965735b305d2e726f77733b696628726f77735b305d297b766172206c6973743d5b5d2c63656c6c733d726f77735b305d2e63656c6c732c6c3d63656c6c732e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b76617220703d66616c73653b696628242e6d65746164617461262628242824686561646572735b695d292e6d6574616461746128292626242824686561646572735b695d292e6d6574616461746128292e736f7274657229297b703d6765745061727365724279496428242824686561646572735b695d292e6d6574616461746128292e736f72746572293b7d656c736520696628287461626c652e636f6e6669672e686561646572735b695d26267461626c652e636f6e6669672e686561646572735b695d2e736f7274657229297b703d67657450617273657242794964287461626c652e636f6e6669672e686561646572735b695d2e736f72746572293b7d6966282170297b703d646574656374506172736572466f72436f6c756d6e287461626c652c726f77732c2d312c69293b7d6966287461626c652e636f6e6669672e6465627567297b7061727365727344656275672b3d22636f6c756d6e3a222b692b22207061727365723a222b702e69642b225c6e223b7d6c6973742e707573682870293b7d7d6966287461626c652e636f6e6669672e6465627567297b6c6f6728706172736572734465627567293b7d72657475726e206c6973743b7d3b66756e6374696f6e20646574656374506172736572466f72436f6c756d6e287461626c652c726f77732c726f77496e6465782c63656c6c496e646578297b766172206c3d706172736572732e6c656e6774682c6e6f64653d66616c73652c6e6f646556616c75653d66616c73652c6b6565704c6f6f6b696e673d747275653b7768696c65286e6f646556616c75653d3d272726266b6565704c6f6f6b696e67297b726f77496e6465782b2b3b696628726f77735b726f77496e6465785d297b6e6f64653d6765744e6f646546726f6d526f77416e6443656c6c496e64657828726f77732c726f77496e6465782c63656c6c496e646578293b6e6f646556616c75653d7472696d416e644765744e6f646554657874287461626c652e636f6e6669672c6e6f6465293b6966287461626c652e636f6e6669672e6465627567297b6c6f672827436865636b696e672069662076616c75652077617320656d707479206f6e20726f773a272b726f77496e646578293b7d7d656c73657b6b6565704c6f6f6b696e673d66616c73653b7d7d666f722876617220693d313b693c6c3b692b2b297b696628706172736572735b695d2e6973286e6f646556616c75652c7461626c652c6e6f646529297b72657475726e20706172736572735b695d3b7d7d72657475726e20706172736572735b305d3b7d66756e6374696f6e206765744e6f646546726f6d526f77416e6443656c6c496e64657828726f77732c726f77496e6465782c63656c6c496e646578297b72657475726e20726f77735b726f77496e6465785d2e63656c6c735b63656c6c496e6465785d3b7d66756e6374696f6e207472696d416e644765744e6f64655465787428636f6e6669672c6e6f6465297b72657475726e20242e7472696d28676574456c656d656e745465787428636f6e6669672c6e6f646529293b7d66756e6374696f6e2067657450617273657242794964286e616d65297b766172206c3d706172736572732e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b696628706172736572735b695d2e69642e746f4c6f7765724361736528293d3d6e616d652e746f4c6f776572436173652829297b72657475726e20706172736572735b695d3b7d7d72657475726e2066616c73653b7d66756e6374696f6e206275696c644361636865287461626c65297b6966287461626c652e636f6e6669672e6465627567297b76617220636163686554696d653d6e6577204461746528293b7d76617220746f74616c526f77733d287461626c652e74426f646965735b305d26267461626c652e74426f646965735b305d2e726f77732e6c656e677468297c7c302c746f74616c43656c6c733d287461626c652e74426f646965735b305d2e726f77735b305d26267461626c652e74426f646965735b305d2e726f77735b305d2e63656c6c732e6c656e677468297c7c302c706172736572733d7461626c652e636f6e6669672e706172736572732c63616368653d7b726f773a5b5d2c6e6f726d616c697a65643a5b5d7d3b666f722876617220693d303b693c746f74616c526f77733b2b2b69297b76617220633d24287461626c652e74426f646965735b305d2e726f77735b695d292c636f6c733d5b5d3b696628632e686173436c617373287461626c652e636f6e6669672e6373734368696c64526f7729297b63616368652e726f775b63616368652e726f772e6c656e6774682d315d3d63616368652e726f775b63616368652e726f772e6c656e6774682d315d2e6164642863293b636f6e74696e75653b7d63616368652e726f772e707573682863293b666f7228766172206a3d303b6a3c746f74616c43656c6c733b2b2b6a297b636f6c732e7075736828706172736572735b6a5d2e666f726d617428676574456c656d656e7454657874287461626c652e636f6e6669672c635b305d2e63656c6c735b6a5d292c7461626c652c635b305d2e63656c6c735b6a5d29293b7d636f6c732e707573682863616368652e6e6f726d616c697a65642e6c656e677468293b63616368652e6e6f726d616c697a65642e7075736828636f6c73293b636f6c733d6e756c6c3b7d3b6966287461626c652e636f6e6669672e6465627567297b62656e63686d61726b28224275696c64696e6720636163686520666f7220222b746f74616c526f77732b2220726f77733a222c636163686554696d65293b7d72657475726e2063616368653b7d3b66756e6374696f6e20676574456c656d656e745465787428636f6e6669672c6e6f6465297b76617220746578743d22223b696628216e6f64652972657475726e22223b69662821636f6e6669672e737570706f72747354657874436f6e74656e7429636f6e6669672e737570706f72747354657874436f6e74656e743d6e6f64652e74657874436f6e74656e747c7c66616c73653b696628636f6e6669672e7465787445787472616374696f6e3d3d2273696d706c6522297b696628636f6e6669672e737570706f72747354657874436f6e74656e74297b746578743d6e6f64652e74657874436f6e74656e743b7d656c73657b6966286e6f64652e6368696c644e6f6465735b305d26266e6f64652e6368696c644e6f6465735b305d2e6861734368696c644e6f6465732829297b746578743d6e6f64652e6368696c644e6f6465735b305d2e696e6e657248544d4c3b7d656c73657b746578743d6e6f64652e696e6e657248544d4c3b7d7d7d656c73657b696628747970656f6628636f6e6669672e7465787445787472616374696f6e293d3d2266756e6374696f6e22297b746578743d636f6e6669672e7465787445787472616374696f6e286e6f6465293b7d656c73657b746578743d24286e6f6465292e7465787428293b7d7d72657475726e20746578743b7d66756e6374696f6e20617070656e64546f5461626c65287461626c652c6361636865297b6966287461626c652e636f6e6669672e6465627567297b76617220617070656e6454696d653d6e6577204461746528297d76617220633d63616368652c723d632e726f772c6e3d632e6e6f726d616c697a65642c746f74616c526f77733d6e2e6c656e6774682c636865636b43656c6c3d286e5b305d2e6c656e6774682d31292c7461626c65426f64793d24287461626c652e74426f646965735b305d292c726f77733d5b5d3b666f722876617220693d303b693c746f74616c526f77733b692b2b297b76617220706f733d6e5b695d5b636865636b43656c6c5d3b726f77732e7075736828725b706f735d293b696628217461626c652e636f6e6669672e617070656e646572297b766172206c3d725b706f735d2e6c656e6774683b666f7228766172206a3d303b6a3c6c3b6a2b2b297b7461626c65426f64795b305d2e617070656e644368696c6428725b706f735d5b6a5d293b7d7d7d6966287461626c652e636f6e6669672e617070656e646572297b7461626c652e636f6e6669672e617070656e646572287461626c652c726f7773293b7d726f77733d6e756c6c3b6966287461626c652e636f6e6669672e6465627567297b62656e63686d61726b282252656275696c74207461626c653a222c617070656e6454696d65293b7d6170706c79576964676574287461626c65293b73657454696d656f75742866756e6374696f6e28297b24287461626c65292e747269676765722822736f7274456e6422293b7d2c30293b7d3b66756e6374696f6e206275696c6448656164657273287461626c65297b6966287461626c652e636f6e6669672e6465627567297b7661722074696d653d6e6577204461746528293b7d766172206d6574613d28242e6d65746164617461293f747275653a66616c73653b766172206865616465725f696e6465783d636f6d707574655461626c6548656164657243656c6c496e6465786573287461626c65293b247461626c65486561646572733d24287461626c652e636f6e6669672e73656c6563746f72486561646572732c7461626c65292e656163682866756e6374696f6e28696e646578297b746869732e636f6c756d6e3d6865616465725f696e6465785b746869732e706172656e744e6f64652e726f77496e6465782b222d222b746869732e63656c6c496e6465785d3b746869732e6f726465723d666f726d6174536f7274696e674f72646572287461626c652e636f6e6669672e736f7274496e697469616c4f72646572293b746869732e636f756e743d746869732e6f726465723b696628636865636b4865616465724d657461646174612874686973297c7c636865636b4865616465724f7074696f6e73287461626c652c696e6465782929746869732e736f727444697361626c65643d747275653b696628636865636b4865616465724f7074696f6e73536f7274696e674c6f636b6564287461626c652c696e6465782929746869732e6f726465723d746869732e6c6f636b65644f726465723d636865636b4865616465724f7074696f6e73536f7274696e674c6f636b6564287461626c652c696e646578293b69662821746869732e736f727444697361626c6564297b766172202474683d242874686973292e616464436c617373287461626c652e636f6e6669672e637373486561646572293b6966287461626c652e636f6e6669672e6f6e52656e646572486561646572297461626c652e636f6e6669672e6f6e52656e6465724865616465722e6170706c7928247468293b7d7461626c652e636f6e6669672e6865616465724c6973745b696e6465785d3d746869733b7d293b6966287461626c652e636f6e6669672e6465627567297b62656e63686d61726b28224275696c7420686561646572733a222c74696d65293b6c6f6728247461626c6548656164657273293b7d72657475726e20247461626c65486561646572733b7d3b66756e6374696f6e20636f6d707574655461626c6548656164657243656c6c496e64657865732874297b766172206d61747269783d5b5d3b766172206c6f6f6b75703d7b7d3b7661722074686561643d742e676574456c656d656e747342795461674e616d652827544845414427295b305d3b766172207472733d74686561642e676574456c656d656e747342795461674e616d652827545227293b666f722876617220693d303b693c7472732e6c656e6774683b692b2b297b7661722063656c6c733d7472735b695d2e63656c6c733b666f7228766172206a3d303b6a3c63656c6c732e6c656e6774683b6a2b2b297b76617220633d63656c6c735b6a5d3b76617220726f77496e6465783d632e706172656e744e6f64652e726f77496e6465783b7661722063656c6c49643d726f77496e6465782b222d222b632e63656c6c496e6465783b76617220726f775370616e3d632e726f775370616e7c7c313b76617220636f6c5370616e3d632e636f6c5370616e7c7c310a766172206669727374417661696c436f6c3b696628747970656f66286d61747269785b726f77496e6465785d293d3d22756e646566696e656422297b6d61747269785b726f77496e6465785d3d5b5d3b7d666f7228766172206b3d303b6b3c6d61747269785b726f77496e6465785d2e6c656e6774682b313b6b2b2b297b696628747970656f66286d61747269785b726f77496e6465785d5b6b5d293d3d22756e646566696e656422297b6669727374417661696c436f6c3d6b3b627265616b3b7d7d6c6f6f6b75705b63656c6c49645d3d6669727374417661696c436f6c3b666f7228766172206b3d726f77496e6465783b6b3c726f77496e6465782b726f775370616e3b6b2b2b297b696628747970656f66286d61747269785b6b5d293d3d22756e646566696e656422297b6d61747269785b6b5d3d5b5d3b7d766172206d6174726978726f773d6d61747269785b6b5d3b666f7228766172206c3d6669727374417661696c436f6c3b6c3c6669727374417661696c436f6c2b636f6c5370616e3b6c2b2b297b6d6174726978726f775b6c5d3d2278223b7d7d7d7d72657475726e206c6f6f6b75703b7d66756e6374696f6e20636865636b43656c6c436f6c5370616e287461626c652c726f77732c726f77297b766172206172723d5b5d2c723d7461626c652e74486561642e726f77732c633d725b726f775d2e63656c6c733b666f722876617220693d303b693c632e6c656e6774683b692b2b297b7661722063656c6c3d635b695d3b69662863656c6c2e636f6c5370616e3e31297b6172723d6172722e636f6e63617428636865636b43656c6c436f6c5370616e287461626c652c6865616465724172722c726f772b2b29293b7d656c73657b6966287461626c652e74486561642e6c656e6774683d3d317c7c2863656c6c2e726f775370616e3e317c7c21725b726f772b315d29297b6172722e707573682863656c6c293b7d7d7d72657475726e206172723b7d3b66756e6374696f6e20636865636b4865616465724d657461646174612863656c6c297b69662828242e6d6574616461746129262628242863656c6c292e6d6574616461746128292e736f727465723d3d3d66616c736529297b72657475726e20747275653b7d3b72657475726e2066616c73653b7d66756e6374696f6e20636865636b4865616465724f7074696f6e73287461626c652c69297b696628287461626c652e636f6e6669672e686561646572735b695d292626287461626c652e636f6e6669672e686561646572735b695d2e736f727465723d3d3d66616c736529297b72657475726e20747275653b7d3b72657475726e2066616c73653b7d66756e6374696f6e20636865636b4865616465724f7074696f6e73536f7274696e674c6f636b6564287461626c652c69297b696628287461626c652e636f6e6669672e686561646572735b695d292626287461626c652e636f6e6669672e686561646572735b695d2e6c6f636b65644f72646572292972657475726e207461626c652e636f6e6669672e686561646572735b695d2e6c6f636b65644f726465723b72657475726e2066616c73653b7d66756e6374696f6e206170706c79576964676574287461626c65297b76617220633d7461626c652e636f6e6669672e776964676574733b766172206c3d632e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b6765745769646765744279496428635b695d292e666f726d6174287461626c65293b7d7d66756e6374696f6e2067657457696467657442794964286e616d65297b766172206c3d776964676574732e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b696628776964676574735b695d2e69642e746f4c6f7765724361736528293d3d6e616d652e746f4c6f776572436173652829297b72657475726e20776964676574735b695d3b7d7d7d3b66756e6374696f6e20666f726d6174536f7274696e674f726465722876297b696628747970656f66287629213d224e756d62657222297b72657475726e28762e746f4c6f7765724361736528293d3d226465736322293f313a303b7d656c73657b72657475726e28763d3d31293f313a303b7d7d66756e6374696f6e20697356616c7565496e417272617928762c61297b766172206c3d612e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b696628615b695d5b305d3d3d76297b72657475726e20747275653b7d7d72657475726e2066616c73653b7d66756e6374696f6e2073657448656164657273437373287461626c652c24686561646572732c6c6973742c637373297b24686561646572732e72656d6f7665436c617373286373735b305d292e72656d6f7665436c617373286373735b315d293b76617220683d5b5d3b24686561646572732e656163682866756e6374696f6e286f6666736574297b69662821746869732e736f727444697361626c6564297b685b746869732e636f6c756d6e5d3d242874686973293b7d7d293b766172206c3d6c6973742e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b685b6c6973745b695d5b305d5d2e616464436c617373286373735b6c6973745b695d5b315d5d293b7d7d66756e6374696f6e20666978436f6c756d6e5769647468287461626c652c2468656164657273297b76617220633d7461626c652e636f6e6669673b696628632e77696474684669786564297b76617220636f6c67726f75703d2428273c636f6c67726f75703e27293b24282274723a6669727374207464222c7461626c652e74426f646965735b305d292e656163682866756e6374696f6e28297b636f6c67726f75702e617070656e64282428273c636f6c3e27292e63737328277769647468272c242874686973292e7769647468282929293b7d293b24287461626c65292e70726570656e6428636f6c67726f7570293b7d3b7d66756e6374696f6e20757064617465486561646572536f7274436f756e74287461626c652c736f72744c697374297b76617220633d7461626c652e636f6e6669672c6c3d736f72744c6973742e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b76617220733d736f72744c6973745b695d2c6f3d632e6865616465724c6973745b735b305d5d3b6f2e636f756e743d735b315d3b6f2e636f756e742b2b3b7d7d66756e6374696f6e206d756c7469736f7274287461626c652c736f72744c6973742c6361636865297b6966287461626c652e636f6e6669672e6465627567297b76617220736f727454696d653d6e6577204461746528293b7d7661722064796e616d69634578703d2276617220736f727457726170706572203d2066756e6374696f6e28612c6229207b222c6c3d736f72744c6973742e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b76617220633d736f72744c6973745b695d5b305d3b766172206f726465723d736f72744c6973745b695d5b315d3b76617220733d287461626c652e636f6e6669672e706172736572735b635d2e747970653d3d227465787422293f28286f726465723d3d30293f6d616b65536f727446756e6374696f6e282274657874222c22617363222c63293a6d616b65536f727446756e6374696f6e282274657874222c2264657363222c6329293a28286f726465723d3d30293f6d616b65536f727446756e6374696f6e28226e756d65726963222c22617363222c63293a6d616b65536f727446756e6374696f6e28226e756d65726963222c2264657363222c6329293b76617220653d2265222b693b64796e616d69634578702b3d2276617220222b652b22203d20222b733b64796e616d69634578702b3d22696628222b652b2229207b2072657475726e20222b652b223b207d20223b64796e616d69634578702b3d22656c7365207b20223b7d766172206f72674f72646572436f6c3d63616368652e6e6f726d616c697a65645b305d2e6c656e6774682d313b64796e616d69634578702b3d2272657475726e20615b222b6f72674f72646572436f6c2b225d2d625b222b6f72674f72646572436f6c2b225d3b223b666f722876617220693d303b693c6c3b692b2b297b64796e616d69634578702b3d227d3b20223b7d64796e616d69634578702b3d2272657475726e20303b20223b64796e616d69634578702b3d227d3b20223b6966287461626c652e636f6e6669672e6465627567297b62656e63686d61726b28224576616c696e672065787072657373696f6e3a222b64796e616d69634578702c6e657720446174652829293b7d6576616c2864796e616d6963457870293b63616368652e6e6f726d616c697a65642e736f727428736f727457726170706572293b6966287461626c652e636f6e6669672e6465627567297b62656e63686d61726b2822536f7274696e67206f6e20222b736f72744c6973742e746f537472696e6728292b2220616e642064697220222b6f726465722b222074696d653a222c736f727454696d65293b7d72657475726e2063616368653b7d3b66756e6374696f6e206d616b65536f727446756e6374696f6e28747970652c646972656374696f6e2c696e646578297b76617220613d22615b222b696e6465782b225d222c623d22625b222b696e6465782b225d223b696628747970653d3d2774657874272626646972656374696f6e3d3d2761736327297b72657475726e2228222b612b22203d3d20222b622b22203f2030203a2028222b612b22203d3d3d206e756c6c203f204e756d6265722e504f5349544956455f494e46494e495459203a2028222b622b22203d3d3d206e756c6c203f204e756d6265722e4e454741544956455f494e46494e495459203a2028222b612b22203c20222b622b2229203f202d31203a2031202929293b223b7d656c736520696628747970653d3d2774657874272626646972656374696f6e3d3d276465736327297b72657475726e2228222b612b22203d3d20222b622b22203f2030203a2028222b612b22203d3d3d206e756c6c203f204e756d6265722e504f5349544956455f494e46494e495459203a2028222b622b22203d3d3d206e756c6c203f204e756d6265722e4e454741544956455f494e46494e495459203a2028222b622b22203c20222b612b2229203f202d31203a2031202929293b223b7d656c736520696628747970653d3d276e756d65726963272626646972656374696f6e3d3d2761736327297b72657475726e2228222b612b22203d3d3d206e756c6c20262620222b622b22203d3d3d206e756c6c29203f2030203a28222b612b22203d3d3d206e756c6c203f204e756d6265722e504f5349544956455f494e46494e495459203a2028222b622b22203d3d3d206e756c6c203f204e756d6265722e4e454741544956455f494e46494e495459203a20222b612b22202d20222b622b2229293b223b7d656c736520696628747970653d3d276e756d65726963272626646972656374696f6e3d3d276465736327297b72657475726e2228222b612b22203d3d3d206e756c6c20262620222b622b22203d3d3d206e756c6c29203f2030203a28222b612b22203d3d3d206e756c6c203f204e756d6265722e504f5349544956455f494e46494e495459203a2028222b622b22203d3d3d206e756c6c203f204e756d6265722e4e454741544956455f494e46494e495459203a20222b622b22202d20222b612b2229293b223b7d7d3b66756e6374696f6e206d616b65536f7274546578742869297b72657475726e222828615b222b692b225d203c20625b222b692b225d29203f202d31203a202828615b222b692b225d203e20625b222b692b225d29203f2031203a203029293b223b7d3b66756e6374696f6e206d616b65536f727454657874446573632869297b72657475726e222828625b222b692b225d203c20615b222b692b225d29203f202d31203a202828625b222b692b225d203e20615b222b692b225d29203f2031203a203029293b223b7d3b66756e6374696f6e206d616b65536f72744e756d657269632869297b72657475726e22615b222b692b225d2d625b222b692b225d3b223b7d3b66756e6374696f6e206d616b65536f72744e756d65726963446573632869297b72657475726e22625b222b692b225d2d615b222b692b225d3b223b7d3b66756e6374696f6e20736f72745465787428612c62297b6966287461626c652e636f6e6669672e736f72744c6f63616c65436f6d706172652972657475726e20612e6c6f63616c65436f6d706172652862293b72657475726e2828613c62293f2d313a2828613e62293f313a3029293b7d3b66756e6374696f6e20736f7274546578744465736328612c62297b6966287461626c652e636f6e6669672e736f72744c6f63616c65436f6d706172652972657475726e20622e6c6f63616c65436f6d706172652861293b72657475726e2828623c61293f2d313a2828623e61293f313a3029293b7d3b66756e6374696f6e20736f72744e756d6572696328612c62297b72657475726e20612d623b7d3b66756e6374696f6e20736f72744e756d657269634465736328612c62297b72657475726e20622d613b7d3b66756e6374696f6e20676574436163686564536f72745479706528706172736572732c69297b72657475726e20706172736572735b695d2e747970653b7d3b746869732e636f6e7374727563743d66756e6374696f6e2873657474696e6773297b72657475726e20746869732e656163682866756e6374696f6e28297b69662821746869732e74486561647c7c21746869732e74426f646965732972657475726e3b7661722024746869732c24646f63756d656e742c24686561646572732c63616368652c636f6e6669672c7368696674446f776e3d302c736f72744f726465723b746869732e636f6e6669673d7b7d3b636f6e6669673d242e657874656e6428746869732e636f6e6669672c242e7461626c65736f727465722e64656661756c74732c73657474696e6773293b24746869733d242874686973293b242e6461746128746869732c227461626c65736f72746572222c636f6e666967293b24686561646572733d6275696c64486561646572732874686973293b746869732e636f6e6669672e706172736572733d6275696c64506172736572436163686528746869732c2468656164657273293b63616368653d6275696c6443616368652874686973293b76617220736f72744353533d5b636f6e6669672e637373446573632c636f6e6669672e6373734173635d3b666978436f6c756d6e57696474682874686973293b24686561646572732e636c69636b2866756e6374696f6e2865297b76617220746f74616c526f77733d2824746869735b305d2e74426f646965735b305d262624746869735b305d2e74426f646965735b305d2e726f77732e6c656e677468297c7c303b69662821746869732e736f727444697361626c65642626746f74616c526f77733e30297b24746869732e747269676765722822736f7274537461727422293b766172202463656c6c3d242874686973293b76617220693d746869732e636f6c756d6e3b746869732e6f726465723d746869732e636f756e742b2b25323b696628746869732e6c6f636b65644f7264657229746869732e6f726465723d746869732e6c6f636b65644f726465723b69662821655b636f6e6669672e736f72744d756c7469536f72744b65795d297b636f6e6669672e736f72744c6973743d5b5d3b696628636f6e6669672e736f7274466f726365213d6e756c6c297b76617220613d636f6e6669672e736f7274466f7263653b666f7228766172206a3d303b6a3c612e6c656e6774683b6a2b2b297b696628615b6a5d5b305d213d69297b636f6e6669672e736f72744c6973742e7075736828615b6a5d293b7d7d7d636f6e6669672e736f72744c6973742e70757368285b692c746869732e6f726465725d293b7d656c73657b696628697356616c7565496e417272617928692c636f6e6669672e736f72744c69737429297b666f7228766172206a3d303b6a3c636f6e6669672e736f72744c6973742e6c656e6774683b6a2b2b297b76617220733d636f6e6669672e736f72744c6973745b6a5d2c6f3d636f6e6669672e6865616465724c6973745b735b305d5d3b696628735b305d3d3d69297b6f2e636f756e743d735b315d3b6f2e636f756e742b2b3b735b315d3d6f2e636f756e7425323b7d7d7d656c73657b636f6e6669672e736f72744c6973742e70757368285b692c746869732e6f726465725d293b7d7d3b73657454696d656f75742866756e6374696f6e28297b736574486561646572734373732824746869735b305d2c24686561646572732c636f6e6669672e736f72744c6973742c736f7274435353293b617070656e64546f5461626c652824746869735b305d2c6d756c7469736f72742824746869735b305d2c636f6e6669672e736f72744c6973742c636163686529293b7d2c31293b72657475726e2066616c73653b7d7d292e6d6f757365646f776e2866756e6374696f6e28297b696628636f6e6669672e63616e63656c53656c656374696f6e297b746869732e6f6e73656c65637473746172743d66756e6374696f6e28297b72657475726e2066616c73657d3b72657475726e2066616c73653b7d7d293b24746869732e62696e642822757064617465222c66756e6374696f6e28297b766172206d653d746869733b73657454696d656f75742866756e6374696f6e28297b6d652e636f6e6669672e706172736572733d6275696c645061727365724361636865286d652c2468656164657273293b63616368653d6275696c644361636865286d65293b7d2c31293b7d292e62696e64282275706461746543656c6c222c66756e6374696f6e28652c63656c6c297b76617220636f6e6669673d746869732e636f6e6669673b76617220706f733d5b2863656c6c2e706172656e744e6f64652e726f77496e6465782d31292c63656c6c2e63656c6c496e6465785d3b63616368652e6e6f726d616c697a65645b706f735b305d5d5b706f735b315d5d3d636f6e6669672e706172736572735b706f735b315d5d2e666f726d617428676574456c656d656e745465787428636f6e6669672c63656c6c292c63656c6c293b7d292e62696e642822736f72746f6e222c66756e6374696f6e28652c6c697374297b242874686973292e747269676765722822736f7274537461727422293b636f6e6669672e736f72744c6973743d6c6973743b76617220736f72744c6973743d636f6e6669672e736f72744c6973743b757064617465486561646572536f7274436f756e7428746869732c736f72744c697374293b7365744865616465727343737328746869732c24686561646572732c736f72744c6973742c736f7274435353293b617070656e64546f5461626c6528746869732c6d756c7469736f727428746869732c736f72744c6973742c636163686529293b7d292e62696e642822617070656e644361636865222c66756e6374696f6e28297b617070656e64546f5461626c6528746869732c6361636865293b7d292e62696e6428226170706c795769646765744964222c66756e6374696f6e28652c6964297b67657457696467657442794964286964292e666f726d61742874686973293b7d292e62696e6428226170706c7957696467657473222c66756e6374696f6e28297b6170706c795769646765742874686973293b7d293b696628242e6d65746164617461262628242874686973292e6d6574616461746128292626242874686973292e6d6574616461746128292e736f72746c69737429297b636f6e6669672e736f72744c6973743d242874686973292e6d6574616461746128292e736f72746c6973743b7d696628636f6e6669672e736f72744c6973742e6c656e6774683e30297b24746869732e747269676765722822736f72746f6e222c5b636f6e6669672e736f72744c6973745d293b7d6170706c795769646765742874686973293b7d293b7d3b746869732e6164645061727365723d66756e6374696f6e28706172736572297b766172206c3d706172736572732e6c656e6774682c613d747275653b666f722876617220693d303b693c6c3b692b2b297b696628706172736572735b695d2e69642e746f4c6f7765724361736528293d3d7061727365722e69642e746f4c6f776572436173652829297b613d66616c73653b7d7d69662861297b706172736572732e7075736828706172736572293b7d3b7d3b746869732e6164645769646765743d66756e6374696f6e28776964676574297b776964676574732e7075736828776964676574293b7d3b746869732e666f726d6174466c6f61743d66756e6374696f6e2873297b76617220693d7061727365466c6f61742873293b72657475726e2869734e614e286929293f303a693b7d3b746869732e666f726d6174496e743d66756e6374696f6e2873297b76617220693d7061727365496e742873293b72657475726e2869734e614e286929293f303a693b7d3b746869732e697344696769743d66756e6374696f6e28732c636f6e666967297b72657475726e2f5e5b2d2b5d3f5c642a242f2e7465737428242e7472696d28732e7265706c616365282f5b2c2e275d2f672c27272929293b7d3b746869732e636c6561725461626c65426f64793d66756e6374696f6e287461626c65297b696628242e62726f777365722e6d736965297b66756e6374696f6e20656d70747928297b7768696c6528746869732e66697273744368696c6429746869732e72656d6f76654368696c6428746869732e66697273744368696c64293b7d656d7074792e6170706c79287461626c652e74426f646965735b305d293b7d656c73657b7461626c652e74426f646965735b305d2e696e6e657248544d4c3d22223b7d7d3b7d7d293b242e666e2e657874656e64287b7461626c65736f727465723a242e7461626c65736f727465722e636f6e7374727563747d293b7661722074733d242e7461626c65736f727465723b74732e616464506172736572287b69643a2274657874222c69733a66756e6374696f6e2873297b72657475726e20747275653b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7472696d28732e746f4c6f63616c654c6f776572436173652829293b7d2c747970653a2274657874227d293b74732e616464506172736572287b69643a226469676974222c69733a66756e6374696f6e28732c7461626c65297b76617220633d7461626c652e636f6e6669673b72657475726e20242e7461626c65736f727465722e6973446967697428732c63293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f61742873293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2263757272656e6379222c69733a66756e6374696f6e2873297b72657475726e2f5e5bc2a324e282ac3f2e5d2f2e746573742873293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f617428732e7265706c616365286e657720526567457870282f5bc2a324e282ac5d2f67292c222229293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a22697041646472657373222c69733a66756e6374696f6e2873297b72657475726e2f5e5c647b322c337d5b5c2e5d5c647b322c337d5b5c2e5d5c647b322c337d5b5c2e5d5c647b322c337d242f2e746573742873293b7d2c666f726d61743a66756e6374696f6e2873297b76617220613d732e73706c697428222e22292c723d22222c6c3d612e6c656e6774683b666f722876617220693d303b693c6c3b692b2b297b766172206974656d3d615b695d3b6966286974656d2e6c656e6774683d3d32297b722b3d2230222b6974656d3b7d656c73657b722b3d6974656d3b7d7d72657475726e20242e7461626c65736f727465722e666f726d6174466c6f61742872293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2275726c222c69733a66756e6374696f6e2873297b72657475726e2f5e2868747470733f7c6674707c66696c65293a5c2f5c2f242f2e746573742873293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e206a51756572792e7472696d28732e7265706c616365286e657720526567457870282f2868747470733f7c6674707c66696c65293a5c2f5c2f2f292c272729293b7d2c747970653a2274657874227d293b74732e616464506172736572287b69643a2269736f44617465222c69733a66756e6374696f6e2873297b72657475726e2f5e5c647b347d5b5c2f2d5d5c647b312c327d5b5c2f2d5d5c647b312c327d242f2e746573742873293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f6174282873213d2222293f6e6577204461746528732e7265706c616365286e657720526567457870282f2d2f67292c222f2229292e67657454696d6528293a223022293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2270657263656e74222c69733a66756e6374696f6e2873297b72657475726e2f5c25242f2e7465737428242e7472696d287329293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f617428732e7265706c616365286e657720526567457870282f252f67292c222229293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2275734c6f6e6744617465222c69733a66756e6374696f6e2873297b72657475726e20732e6d61746368286e657720526567457870282f5e5b412d5a612d7a5d7b332c31307d5c2e3f205b302d395d7b312c327d2c20285b302d395d7b347d7c273f5b302d395d7b327d292028285b302d325d3f5b302d395d3a5b302d355d5b302d395d297c285b302d315d3f5b302d395d3a5b302d355d5b302d395d5c7328414d7c504d292929242f29293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f6174286e657720446174652873292e67657454696d652829293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2273686f727444617465222c69733a66756e6374696f6e2873297b72657475726e2f5c647b312c327d5b5c2f5c2d5d5c647b312c327d5b5c2f5c2d5d5c647b322c347d2f2e746573742873293b7d2c666f726d61743a66756e6374696f6e28732c7461626c65297b76617220633d7461626c652e636f6e6669673b733d732e7265706c616365282f5c2d2f672c222f22293b696628632e64617465466f726d61743d3d22757322297b733d732e7265706c616365282f285c647b312c327d295b5c2f5c2d5d285c647b312c327d295b5c2f5c2d5d285c647b347d292f2c2224332f24312f243222293b7d656c736520696628632e64617465466f726d61743d3d22756b22297b733d732e7265706c616365282f285c647b312c327d295b5c2f5c2d5d285c647b312c327d295b5c2f5c2d5d285c647b347d292f2c2224332f24322f243122293b7d656c736520696628632e64617465466f726d61743d3d2264642f6d6d2f7979227c7c632e64617465466f726d61743d3d2264642d6d6d2d797922297b733d732e7265706c616365282f285c647b312c327d295b5c2f5c2d5d285c647b312c327d295b5c2f5c2d5d285c647b327d292f2c2224312f24322f243322293b7d72657475726e20242e7461626c65736f727465722e666f726d6174466c6f6174286e657720446174652873292e67657454696d652829293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a2274696d65222c69733a66756e6374696f6e2873297b72657475726e2f5e28285b302d325d3f5b302d395d3a5b302d355d5b302d395d297c285b302d315d3f5b302d395d3a5b302d355d5b302d395d5c7328616d7c706d292929242f2e746573742873293b7d2c666f726d61743a66756e6374696f6e2873297b72657475726e20242e7461626c65736f727465722e666f726d6174466c6f6174286e657720446174652822323030302f30312f303120222b73292e67657454696d652829293b7d2c747970653a226e756d65726963227d293b74732e616464506172736572287b69643a226d65746164617461222c69733a66756e6374696f6e2873297b72657475726e2066616c73653b7d2c666f726d61743a66756e6374696f6e28732c7461626c652c63656c6c297b76617220633d7461626c652e636f6e6669672c703d2821632e7061727365724d657461646174614e616d65293f27736f727456616c7565273a632e7061727365724d657461646174614e616d653b72657475726e20242863656c6c292e6d6574616461746128295b705d3b7d2c747970653a226e756d65726963227d293b74732e616464576964676574287b69643a227a65627261222c666f726d61743a66756e6374696f6e287461626c65297b6966287461626c652e636f6e6669672e6465627567297b7661722074696d653d6e6577204461746528293b7d766172202474722c726f773d2d312c6f64643b24282274723a76697369626c65222c7461626c652e74426f646965735b305d292e656163682866756e6374696f6e2869297b2474723d242874686973293b696628212474722e686173436c617373287461626c652e636f6e6669672e6373734368696c64526f772929726f772b2b3b6f64643d28726f7725323d3d30293b2474722e72656d6f7665436c617373287461626c652e636f6e6669672e7769646765745a656272612e6373735b6f64643f303a315d292e616464436c617373287461626c652e636f6e6669672e7769646765745a656272612e6373735b6f64643f313a305d297d293b6966287461626c652e636f6e6669672e6465627567297b242e7461626c65736f727465722e62656e63686d61726b28224170706c79696e67205a6562726120776964676574222c74696d65293b7d7d7d293b7d29286a5175657279293b</data>
                  </item>
                  <item key="id"><![CDATA[jquery.tablesorter.min.js]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[jQuery tablesorter plugin: http://tablesorter.com]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="asc.gif" type="file">47494638396115000400800000232d30ffffff21f90401000001002c000000001500040000020d8c1fa00be8cfda9b67d16b242d003b</data>
                  </item>
                  <item key="id"><![CDATA[small_asc.gif]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[tablesorter: Asc]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="desc.gif" type="file">47494638396115000400800000232d30ffffff21f90401000001002c000000001500040000020d8c8f01c9adb09c8354328a5901003b</data>
                  </item>
                  <item key="id"><![CDATA[small_desc.gif]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[tablesorter: Desc]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="bg.gif" type="file">47494638396115000900800000232d30ffffff21f90401000001002c00000000150009000002178c8f80cb09da627854328aadde06573e6560f78c895500003b</data>
                  </item>
                  <item key="id"><![CDATA[small.gif]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[tablesorter: Small]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.titlealt"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: DC.Title.Alt
##
# --// BO titlealt //--

titlealt = zmscontext.attr('caption')
if titlealt:
    return titlealt
return zmscontext.display_type(zmscontext.REQUEST)

# --// EO titlealt //--
]]>
                  </item>
                  <item key="id"><![CDATA[titlealt]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[DC.Title.Alt]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.widths"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Col-Widths [list]
##
# --// BO widths //--

REQUEST = zmscontext.REQUEST
table = zmscontext.attr('table')
ncols = max(map(lambda x: len(x), table))
weights = map(lambda x: 1, range( ncols))
for row in table:
    i = 0
    for cell in row:
        weight = len(zmscontext.re_sub('<(.*?)>', '',zmscontext.dt_html(cell.get('content',''),REQUEST)))
        weights[i] = weights[i] + weight
        i += 1
return map(lambda x: int((x*100.0)/sum(weights)), weights)

# --// EO widths //--
]]>
                  </item>
                  <item key="id"><![CDATA[widths]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Col-Widths [list]]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.format"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: contentEditable.Cell: Get format (@key)
##
# --// BO format //--

REQUEST = zmscontext.REQUEST
key = REQUEST.get('key')
if key:
    table = zmscontext.attr('table')
    col = int(key[key.find('_')+1:key.rfind('_')])
    row = int(key[key.rfind('_')+1:])
    return table[row][col]['format']
return ''

# --// EO format //--
]]>
                  </item>
                  <item key="id"><![CDATA[format]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[contentEditable.Cell: Get format (@key)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTable.setObjProperty"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: contentEditable.Cell: Set property (@pKey,@pValue)
##
# --// BO setObjProperty //--

REQUEST = zmscontext.REQUEST
key = REQUEST.get('pKey')
value = REQUEST.get('pValue')
if key.startswith('table_'):
    table = zmscontext.attr('table')
    col = int(key[key.find('_')+1:key.rfind('_')])
    row = int(key[key.rfind('_')+1:])
    table[row][col]['content'] = value
    lang = REQUEST.get('lang')
    zmscontext.setObjProperty('table',table_table,lang)

# --// EO setObjProperty //--
]]>
                  </item>
                  <item key="id"><![CDATA[setObjProperty]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[contentEditable.Cell: Set property (@pKey,@pValue)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTable.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		table         python:zmscontext.attr('table');
		sortable      python:int(zmscontext.attr('sortable') in [1,True]);
		cols          python:zmscontext.attr('cols');
		summary       python:unicode(zmscontext.attr('attr_dc_description'),'utf-8');
		caption       python:unicode(zmscontext.attr('caption'),'utf-8');
		align         python:zmscontext.attr('align').lower();
		table_type    python:zmscontext.attr('type');
		resourceurl    python:'%s/%s.'%(zmscontext.metaobj_manager.absolute_url(),zmscontext.meta_id)">
	<tal:block tal:condition="python:sortable and request.get('ZMSTable.standard_html',True)">
		<script type="text/javascript" tal:attributes="src python:'%sjquery.tablesorter.min.js'%resourceurl"></script>
		<script type="text/javascript">
			$(function() {
				$(".ZMSTable.sortable").tablesorter({ 
						widgets: ["zebra"],
						widgetOptions:{
								zebra:["even", "odd"]
						}
				});
			});
		</script>
		<tal:block tal:content="structure python:'<style>'"></tal:block>
			table.ZMSTable.sortable thead tr .header {
				background-image: url(<tal:block tal:content="resourceurl"></tal:block>small.gif);
				background-repeat: no-repeat;
				background-position: center right;
				cursor: pointer;
			}
			table.ZMSTable.sortable thead tr .headerSortUp {
				background-image: url(<tal:block tal:content="resourceurl"></tal:block>small_asc.gif);
			}
			table.ZMSTable.sortable thead tr .headerSortDown {
				background-image: url(<tal:block tal:content="resourceurl"></tal:block>small_desc.gif);
			}
		<tal:block tal:content="structure python:'</style>'"></tal:block>
		<tal:block tal:define="global dummy0 python:request.set('ZMSTable.standard_html',False)"></tal:block>
	</tal:block>
	<tal:block tal:condition="python:zmscontext.attr('colgroup')">
		<tal:block tal:content="structure python:'<style>'"></tal:block>
			<tal:block tal:repeat="col python:zmscontext.attr('widths')">
				<tal:block tal:define="col_index repeat/col/index">
					<tal:block tal:condition="python:col_index<len(cols) and cols[col_index]">
						table#<tal:block tal:content="python:zmscontext.id"></tal:block> tr th:nth-child(<tal:block tal:content="python:col_index+1"></tal:block>), 
						table#<tal:block tal:content="python:zmscontext.id"></tal:block> tr td:nth-child(<tal:block tal:content="python:col_index+1"></tal:block>) 
							{ width:<tal:block tal:content="python:str(cols[col_index])+'%'"/> }
					</tal:block>
				</tal:block>
			</tal:block>
		<tal:block tal:content="structure python:'</style>'"></tal:block>
	</tal:block>
	<table tal:attributes="id python:zmscontext.id; class python:' '.join([zmscontext.meta_id]+[[],['sortable']][sortable]); summary python:summary">
		<caption tal:condition="python:caption" tal:attributes="align align" tal:content="structure caption">The caption</caption>
		<tal:block tal:repeat="row table">
			<tal:block tal:condition="python:table_type==1 and row==table[0]" tal:content="structure python:'<thead>'"></tal:block>
			<tal:block tal:condition="python:table_type==1 and row==table[1]" tal:content="structure python:'<tbody>'"></tal:block>
			<tal:block tal:condition="repeat/row/odd"><tal:block tal:define="global tr_class python:'odd'"></tal:block></tal:block>
			<tal:block tal:condition="repeat/row/even"><tal:block tal:define="global tr_class python:'even'"></tal:block></tal:block>
			<tr tal:attributes="class tr_class">
				<tal:block tal:repeat="column row">
					<tal:block tal:define="
							row_index     repeat/row/index;
							col_index     repeat/column/index;
							tag           python:str(column.get('tag','')).lower();
							colspan       python:column.get('colspan',1);
							format        python:column.get('format','');
							pattern       python:'%3Cdtml-var%20\042 getlinkurl\\((.*?),request\\)\042=\042\042>\042&gt\073';
							replacement   python:'<dtml-var \042getLinkUrl(\\1,REQUEST)\042>\042>';
							content       python:zmscontext.re_sub(pattern,replacement,column.get('content',''));
							col_text      python:zmscontext.dt_html(zmscontext.renderText(format,'table_%i_%i'%(col_index,row_index),content,request),request)">
						<tal:block tal:condition="python:tag in ['td','th']">
							<tal:block tal:content="structure python:'<%s%s>'%(tag,['','colspan=\042%i\042'%colspan][int(colspan>1)])"></tal:block>
								<tal:block tal:condition="python:col_text" tal:content="structure col_text">The cell</tal:block>
								<tal:block tal:condition="python:not (col_text)">&nbsp;</tal:block>
							<tal:block tal:content="structure python:'</%s>'%tag"></tal:block>
						</tal:block>
						<td tal:condition="python:tag not in ['td','th']" style="background:transparent;"></td>
					</tal:block>
				</tal:block>
			</tr>
			<tal:block tal:condition="python:table_type==1 and row==table[0]" tal:content="structure python:'</thead>'"></tal:block>
			<tal:block tal:condition="python:table_type==1 and row==table[-1]" tal:content="structure python:'</tbody>'"></tal:block>
		</tal:block>
	</table>
</tal:block>

<!-- /ZMSTable.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTable]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSTable]]></item>
          <item key="name"><![CDATA[ZMSTable]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.10]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSTeaserContainer]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsteasercontainer_16x16.gif" type="file">47494638396110001000b30000040284c48e0c848284fcee84fcfebcfc02fcfcd25cfcfe9c4c4e4c6c6e6cfcf274fcfeecfce26cfcfe84fcfed4fcfaac21f90401000005002c0000000010001000030470b084496b2858aecdfbba58e08c23408e5348ac00d102cf1a7cd273dc407edf62200483460eb018361a01422011381e8dcec061091c2800d701c0aa685219608636cce8229960433aac062e259680c13001bf256b867c694f64e2134c010802190502098989540985868f217790907711003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsteasercontainer_disabled_16x16.gif" type="file">47494638396110001000b300004c4e4c848284d4d6d4eceaece4e2e4f4f6f4fc02fcdcdedcf4f2f46c6e6c8c8e8cdcdadcfcfafceceeece4e6e40000ff21f90401000006002c000000001000100003046bd0a849ab3258b2cd3bbb98e225de14220c92a86cf17d1252206ab2a688a8040ad2d824204d97500c068801f098ec298a474742493d3a8b87c582b0486cb584ab62cb2d8317c6a7c4a210082684700213d0dadb4fae3ac47e4e000119060140367e0981828a7c738b8e7b11003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-bullhorn]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global
		zmscontext options/zmscontext;
		attr_borderstyle python:zmscontext.attr('attr_borderstyle');
		bgcolor_border python:here.get_colormap().get(zmscontext.attr('attr_bgcolor_border'),'transparent');
		bgcolor_title python:here.get_colormap().get(zmscontext.attr('attr_bgcolor_title'),'transparent');
		bgcolor_text python:here.get_colormap().get(zmscontext.attr('attr_bgcolor_text'),'transparent');
		element_icon python: '<div class=\042ZMSTeaserElement\042 style=\042width:30px\042>' + '<div align=\042center\042 class=\042title\042 style=\042background-color:%s\042>'%bgcolor_title + '<img src=\042/misc_/zms/spacer.gif\042 title=\042%s\042 border=\0420\042 width=\04224\042 height=\0424\042 /></div>'%(here.getZMILangStr('ATTR_TITLE')) + '<div align=\042center\042 class=\042text\042 style=\042background-color:%s\042>'%(bgcolor_text) + '<img src=\042/misc_/zms/spacer.gif\042 title=\042%s\042 border=\0420\042 width=\04224\042 height=\0424\042/></div>'%(here.getZMILangStr('ATTR_TEXT')) + '</div>'">
<p style="font-weight:bold;border-bottom: 1px solid #ddd;" tal:content="python:here.getZMILangStr('ATTR_BORDERSTYLE')">Border-Style</p>
<table cellspacing="2" cellpadding="1" border="0" title="JAVASCRIPT IS AT WORK" style="display:none">
<tr valign="top">
<!-- ##### Border-Style 1=SOLID ##### -->
	<td class="form-element">
		<input class="form-radio" type="radio" name="attr_borderstyle:int" value="1" tal:attributes="checked python:['','checked'][int(attr_borderstyle==1)]"/>
		<tal:block tal:content="python:here.getZMILangStr('OPT_AB_SOLID')">Solid</tal:block>&nbsp;
	</td>
	<td>
		<div id="Teaser" style="width:30px;">
			<div class="ZMSTeaserContainer" tal:attributes="style python:'width:30px\073margin-bottom:4px\073background-color:%s'%bgcolor_border">
				<tal:block tal:content="structure python:element_icon"></tal:block>
				<tal:block tal:content="structure python:element_icon"></tal:block>
				<tal:block tal:content="structure python:element_icon"></tal:block>
			</div>
		</div>
	</td>
<!-- ##### Border-Style 2=SINGLE ##### -->
	<td class="form-element">
		<input class="form-radio" type="radio" name="attr_borderstyle:int" value="2" tal:attributes="checked python:['','checked'][int(attr_borderstyle==2)]"/>
		<tal:block tal:content="python:here.getZMILangStr('OPT_AB_SINGLE')">Single</tal:block>&nbsp;
	</td>
	<td>
		<div id="Teaser" style="width:30px;">
			<div class="ZMSTeaserContainer" tal:attributes="style python:'width:30px\073margin-bottom:4px\073background-color:%s'%bgcolor_border" tal:content="structure python:element_icon"></div>
			<div class="ZMSTeaserContainer" tal:attributes="style python:'width:30px\073margin-bottom:4px\073background-color:%s'%bgcolor_border" tal:content="structure python:element_icon"></div>
			<div class="ZMSTeaserContainer" tal:attributes="style python:'width:30px\073margin-bottom:4px\073background-color:%s'%bgcolor_border" tal:content="structure python:element_icon"></div>
		</div>
	</td>
<!-- ##### Border-Style 3=NONE ##### -->
	<td class="form-element">
		<input class="form-radio" type="radio" name="attr_borderstyle:int" value="3" tal:attributes="checked python:['','checked'][int(attr_borderstyle==3)]"/>
		<tal:block tal:content="python:here.getZMILangStr('OPT_AB_NONE')">None</tal:block>&nbsp;
	</td>
	<td>
		<div id="Teaser" style="width:30px;">
			<tal:block tal:content="structure python:element_icon"></tal:block>
			<tal:block tal:content="structure python:element_icon"></tal:block>
			<tal:block tal:content="structure python:element_icon"></tal:block>
		</div>
	</td>
</tr>
</table>

</tal:block>
<tal:block tal:define="global dummy0 python:request.set('ZMS_HIDE_ELEMENTS',request.get('ZMS_HIDE_ELEMENTS',[])+['attr_borderstyle'])"></tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[1]]></item>
                  <item key="id"><![CDATA[attr_borderstyle]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Border-Style]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[int]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[primColorStrong0]]></item>
                  <item key="id"><![CDATA[attr_bgcolor_border]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Background-Color (Border)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[color]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[primColorLight0]]></item>
                  <item key="id"><![CDATA[attr_bgcolor_title]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Background-Color (Title)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[color]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[neutralColorWhite]]></item>
                  <item key="id"><![CDATA[attr_bgcolor_text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Background-Color (Text)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[color]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[e]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[ZMSNote]]></item>
                      <item><![CDATA[ZMSFile]]></item>
                      <item><![CDATA[ZMSLinkElement]]></item>
                      <item><![CDATA[type(ZMSTeaserElement)]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Teaser-Elements]]></item>
                  <item key="repetitive" type="int">1</item>
                  <item key="type"><![CDATA[*]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "getTeaserElements"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=
##title=Function: Teaser-Elements
##
# --// BO getTeaserElements //--

request = container.REQUEST
teaserElmnts = []
obs = context.breadcrumbs_obj_path(portalMaster=False)
obs.reverse()
this = context.getSelf()
for ob in obs:
  abort_penetrance = ob != this and ob.meta_type == 'ZMSLinkElement'
  if abort_penetrance:
    break
  temp = []
  subobs = ob.filteredChildNodes( request, ['ZMSCustom','ZMSTeaserContainer'])
  for subob in subobs:
    if subob.meta_id == 'ZMSTeaserContainer':
      temp.extend( subob.filteredChildNodes( request))
    elif subob.getType() == 'ZMSTeaserElement':
      temp.append( subob)
  for teaserElmnt in temp:
    penetrance = teaserElmnt.getObjProperty('attr_penetrance',request)
    if ( penetrance in [0,'this',''] and context == ob) or \
       ( penetrance in [1,'sub_nav'] and context.meta_id in ['ZMS','ZMSFolder']) or \
       ( penetrance in [2,'sub_all']):
      teaserElmnts.insert( 0, teaserElmnt)
  abort_penetrance = ob.getObjProperty('attr_zmsteasercontainer_abort_penetrance',request) not in ['',0]
  if abort_penetrance:
    break
teaserElmnts.reverse()
return teaserElmnts

# --// EO getTeaserElements //--
]]>
                  </item>
                  <item key="id"><![CDATA[getTeaserElements]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Function: Teaser-Elements]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Script (Python)]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "pageelement_Teaser"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=here=None,request=None
##title=Template: Teaser
##
# --// BO pageelement_Teaser //--

request = container.REQUEST
RESPONSE =  request.RESPONSE

last_borderstyle = None
last_bgcolor_border = None
teaserElmnts = context.getTeaserElements()
if teaserElmnts:
  print '<div id="teaser">'
  for teaserElmnt in teaserElmnts:
    teaserCntnr = teaserElmnt.getParentNode()
    borderstyle = teaserCntnr.attr('attr_borderstyle')
    bgcolor_border = teaserCntnr.attr('attr_bgcolor_border')
    request.set('bgcolor_title',teaserCntnr.attr('attr_bgcolor_title'))
    request.set('bgcolor_text',teaserCntnr.attr('attr_bgcolor_text'))
    if last_borderstyle != borderstyle or \
       last_bgcolor_border != bgcolor_border or \
       borderstyle == 2:
      if last_borderstyle is not None and \
         last_bgcolor_border is not None:
        if last_borderstyle != 3:
          print '</div>'
      if borderstyle != 3:
        print '<div class="%s"'%teaserCntnr.meta_id
        if bgcolor_border:
          print ' style="background-color:%s;"'%teaserElmnt.get_colormap().get(bgcolor_border,'transparent')
        print '>'
    if teaserElmnt.meta_id in ['ZMSLinkElement','ZMSFile','ZMSTeaserElement']:
      name = 'pageelement_TeaserElement'
    else:
      name = 'bodyContentZMSCustom_%s'%teaserElmnt.meta_id
    method = getattr(teaserElmnt,name)
    method_result = method(teaserElmnt,request)
    try:
      method_result = unicode(method_result,'utf-8')
    except:
      pass
    print method_result
    last_borderstyle = borderstyle
    last_bgcolor_border = bgcolor_border
  if last_borderstyle is not None and \
     last_bgcolor_border is not None:
    if last_borderstyle != 3:
      print '</div>'
  print '</div>'

return unicode(printed).encode('utf-8')

# --// EO pageelement_Teaser //--
]]>
                  </item>
                  <item key="id"><![CDATA[pageelement_Teaser]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Teaser]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Script (Python)]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTeaserContainer.renderShort -->

<tal:block tal:define="global 
		zmscontext options/zmscontext">
	<div class="form-small" tal:repeat="teaserElmnt python:zmscontext.getChildNodes(request)">
		<a tal:attributes="href python:'%s/manage_main?lang=%s'%(teaserElmnt.absolute_url(),request['lang'])">
			<img tal:attributes="src python:'%sinternal_link.gif'%zmscontext.MISC_ZMS; title python:zmscontext.getZMILangStr('CAPTION_EDIT')%teaserElmnt.display_type(request)" alt="Internal link"/>
		</a>
		<tal:block tal:define="global 
				url      python:zmscontext.getLinkUrl(teaserElmnt.attr('attr_url'));
				img_src  python:teaserElmnt.attr('attr_img_src')+'?';
				title    python:teaserElmnt.attr('title');
				abstract python:zmscontext.search_quote(teaserElmnt.attr('attr_abstract'))">
			<tal:block tal:condition="python:title">
				<a tal:condition="python:url" tal:attributes="href url" target="_blank" class="zmi" tal:content="title"><b>The title</b></a>
				<tal:block tal:condition="python:not url" tal:content="title">The title</tal:block>
			</tal:block>
			<tal:block tal:condition="python:not title">
				<tal:block tal:condition="python:img_src">
					<div><i>&laquo;<span tal:omit-tag="" tal:content="python:img_src[img_src.rfind('/')+1:img_src.find('?')]"></span>&raquo;</i></div>
				</tal:block>
			</tal:block>
			<div tal:content="structure abstract">The abstract</div>
		</tal:block>
	</div>
</tal:block>


<!-- /ZMSTeaserContainer.renderShort -->]]>
                  </item>
                  <item key="id"><![CDATA[renderShort]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[ZMI: Render short]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSTeaserContainer]]></item>
          <item key="name"><![CDATA[ZMSTeaserContainer]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.8.1]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSTeaserElement]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsteaserelement_16x16.gif" type="file">47494638396110001000b30000040284c48e0cfcf88cfcfed5fcca54fcf173fcfaacfcfeedfce270fc02fcfcfe84fcee84fcfebdfcd664fcfe9cfcfefc21f90401000009002c000000001000100003045330c949eb0c38eb40c3f960787052309c27809e64123030c0c832dc0686a303bca23b378182073810158a2072d85bde168502404a8dde10588434abbd36b05f44b8d1726d020d72d95222acd9a537dc35af2722003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmsteaserelement_disabled_16x16.gif" type="file">47494638396110001000b30000fc02fc8c8e8ccccecce4e6e4f4f2f4dcdadceceeecfcfafce4e2e4d4d6d4eceaecf4f6f4dcdedc0000ff0000ff0000ff21f90401000000002c000000001000100003045110c849eb0c38eb40c3f960787092179a200904c44178f0d2aa6cfb62eeb2d0c60d6384d745a130183284e2713850049c5084f3522820aa81ab1541b37ab5576e6713282430164b40a04a8fdde9363c1d01003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-bullhorn]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_penetrance]]></item>
                  <item key="keys" type="list">
                    <list>
                      <item><![CDATA[this]]></item>
                      <item><![CDATA[sub_nav]]></item>
                      <item><![CDATA[sub_all]]></item>
                    </list>
                  </item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Penetrance]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[select]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[2]]></item>
                  <item key="id"><![CDATA[displaytype]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Display-Type]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[int]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_url]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Url]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[url]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[attr_img]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[image]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[title]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Title]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[richtext]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTeaserElement.attr_img_src"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Image
##
# --// BO attr_img_src //--

img = zmscontext.attr('attr_img')
if img:
    return img.getHref(zmscontext.REQUEST)
return ''

# --// EO attr_img_src //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_img_src]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Image]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[## Script (Python) "ZMSTeaserElement.attr_abstract"
##bind container=container
##bind context=context
##bind namespace=
##bind script=script
##bind subpath=traverse_subpath
##parameters=zmscontext
##title=py: Alias: Abstract
##
# --// BO attr_abstract //--

return zmscontext.attr('text')

# --// EO attr_abstract //--
]]>
                  </item>
                  <item key="id"><![CDATA[attr_abstract]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Alias: Abstract]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[py]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- pageelement_TeaserElement -->

	<span tal:omit-tag="" tal:define="global 
		bgcolor_title python:request.get('bgcolor_title');
		bgcolor_text  python:request.get('bgcolor_text');
		url           python:here.getLinkUrl(here.attr('attr_url'),request);
		img_src_attr  python:here.attr('attr_img_src');
		img_src       python:img_src_attr+'?';
		img_filename  python:img_src[img_src.rfind('/')+1:img_src.find('?')];
		title_url     python:here.attr('title');
		title_txt     python:title_url;
		abstract      python:here.attr('attr_abstract')">
		
		<span tal:omit-tag="" tal:define="global styles python:[]">
			<span tal:omit-tag="" tal:condition="bgcolor_title" tal:define="global styles python:styles+['background-color:'+here.get_colormap().get(bgcolor_title,'transparent')]">
			</span>
		</span>
		<div class="ZMSTeaserElement" tal:attributes="style python:''.join(styles)">
			
			<span tal:omit-tag="" tal:condition="python:len(title_url) > 4 and title_url.startswith('__') and title_url.endswith('__')">
				<span tal:omit-tag="" tal:define="global title_url python:title_url[2:-2]; title_txt python:''"></span>
			</span>
			
			<span tal:omit-tag="" tal:condition="python:title_txt or img_filename" tal:define="global 
					displaytype python:here.dctDisplaytype.get(str(here.attr('displaytype')),'left');
					img         python:'<img class=\042title\042 src=\042'+img_src_attr+'\042 alt=\042'+title_txt+'\042 border=\0420\042/>'">
					
				<span tal:omit-tag="" tal:condition="python:displaytype=='top'">
					<div class="graphic" tal:condition="python:img_filename">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure img">The image</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure img">The image</span>
					</div>
					<div class="title" tal:condition="python:title_txt">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure title_txt">The title</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure title_txt">The title</span>
					</div>
				</span>
				
				<span tal:omit-tag="" tal:condition="python:displaytype=='right'">
					<div class="graphic" tal:condition="python:img_filename">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure img">The image</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure img">The image</span>
					</div>
					<div class="title" tal:condition="python:title_txt">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure title_txt">The title</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure title_txt">The title</span>
					</div>
					<div class="clearfloating" style="clear:both">&nbsp;</div>
				</span>
				
				<span tal:omit-tag="" tal:condition="python:displaytype=='bottom'">
					<div class="title" tal:condition="python:title_txt">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure title_txt">The title</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure title_txt">The title</span>
					</div>
					<div class="graphic" tal:condition="python:img_filename">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure img">The image</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure img">The image</span>
					</div>
				</span>
				
				<span tal:omit-tag="" tal:condition="python:displaytype=='left'">
					<div class="graphic" tal:condition="python:img_filename">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure img">The image</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure img">The image</span>
					</div>
					<div class="title" tal:condition="python:title_txt">
						<a tal:condition="python:url" tal:attributes="href url; title title_url" tal:content="structure title_txt">The title</a>
						<span tal:condition="python:not url" tal:omit-tag="" tal:content="structure title_txt">The title</span>
					</div>
					<div class="clearfloating" style="clear:both">&nbsp;</div>
				</span>
				
				<span tal:omit-tag="" tal:define="global styles python:[]">
					<span tal:omit-tag="" tal:condition="bgcolor_text" tal:define="global styles python:styles+['background-color:'+here.get_colormap().get(bgcolor_text,'transparent')]">
					</span>
				</span>
				<div tal:condition="python:len(abstract)+len(url)>0" class="text" tal:attributes="style python:''.join(styles)">
					<span tal:omit-tag="" tal:content="structure abstract">The abstract</span>
					<span tal:omit-tag="" tal:condition="python:len(abstract)>0 and len(url)>0" tal:content="structure python:here.getLangStr('HREF_MORE',request['lang'])%(' href=\042%s\042 title=\042%s\042'%(url,title_url))">The url</span>
				</div>
				
			</span>
			
		</div>
	</span>

<!-- /pageelement_TeaserElement -->]]>
                  </item>
                  <item key="id"><![CDATA[pageelement_TeaserElement]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: Teaser-Element]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[Page Template]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTeaserElement.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		teaserCntnr     python:zmscontext.getParentNode();
		subclass        python:[teaserCntnr.meta_id];
		style           python:[];
		bgcolor_border  python:teaserCntnr.attr('attr_bgcolor_border');
		bgcolor_title   python:teaserCntnr.attr('attr_bgcolor_title');
		bgcolor_text    python:teaserCntnr.attr('attr_bgcolor_text')">
	<div tal:condition="python:request.get('URL','').find('/manage')>0" id="teaser">
		<tal:block tal:condition="python:bgcolor_border">
			<tal:block tal:define="global style python:style+['border: 1px solid '+zmscontext.get_colormap().get(bgcolor_border,'black')]"></tal:block>
		</tal:block>
		<div tal:attributes="class python:' '.join(subclass); style python:' '.join(style)" tal:content="structure python:zmscontext.pageelement_TeaserElement(zmscontext,request)">
			The teaser-element
		</div>
	</div>
	<div tal:condition="python:not (request.get('URL','').find('/manage')>0)" tal:attributes="class python:' '.join(subclass); style python:' '.join(style)" tal:content="structure python:zmscontext.pageelement_TeaserElement(zmscontext,request)">
		The teaser-element
	</div>
</tal:block>

<!-- /ZMSTeaserElement.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTeaserElement]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSTeaserElement]]></item>
          <item key="name"><![CDATA[ZMSTeaserElement]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.0]]></item>
          <item key="type"><![CDATA[ZMSTeaserElement]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSTextarea]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmstextarea_16x16.gif" type="file">47494638396110001000b300000402847784b4b5d5fc87a8d9d3e8fb62689754a6ecf8fcfc727aa6fc02fc91b9e9bcbec48498c8c6e0f9a4b8f8e7eff521f90401000009002c000000001000100003046a30b9416b45296777ba7f4f130c5aa278e8d12006a39dc722cf031204da901e602338988cee00281a0104024e887a109c84c64ac3e81c8dd260a2fa383c93529f3600ba16058231081a460b0a1a32614647c33308b6d46dd720a4513e7c6f7e088687880877258c8d0911003b</data>
                  </item>
                  <item key="id"><![CDATA[icon]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom">
                    <data content_type="image/gif" filename="zmstextarea_disabled_16x16.gif" type="file">47494638396110001000f700006666666b6b6b7373737b7b7bff00ff8181818c8c8c9d9d9da5a5a5bbbbbbcececed7d7d7dddddde3e3e3ebebebfafafa00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000021f90401000004002c00000000100010000708900009244040b060c1020412264cf0a0a143070e161440a050a0c38b0f181438704021828609428a3c50a0a4478c0f203650900061c28f0f38cae4d8a0c10085072e4274509301839b0973c69cc9d12750020652eeecc9608102010a0d4024ca51c1d3a84b1bf8746a156ac2023c458ab51a4061819a5a9b5a5d5b36e1009f5bd7ae05a07080ddbb78edd2adc8b76fc280003b</data>
                  </item>
                  <item key="id"><![CDATA[icon_disabled]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Disabled)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[resource]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-align-left]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="default"><![CDATA[<dtml-return "getTextFormatDefault()">]]></item>
                  <item key="id"><![CDATA[format]]></item>
                  <item key="mandatory" type="int">1</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Format]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[string]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[text]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Text]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[richtext]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="id"><![CDATA[interface0]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[<tal:block tal:define="global
		zmscontext options/zmscontext">

<script type="text/javascript">

function onZMSTextareaFormSubmit() {
	var b = true;
	if (self.btnClicked != getZMILangStr('BTN_CANCEL') &&
			self.btnClicked != getZMILangStr('BTN_BACK')) {
		var txt = '<'+'xml>'+$('#text_'+getZMILang()).val().replace('&','')+'<'+'/xml>';
		if ( txt.indexOf( '<'+'dtml-') < 0) {
			try {
				var xmlString = txt.replace(/\&(\w*)\;/g,'');
				if (window.DOMParser) {
					var parser=new DOMParser();
					var doc=parser.parseFromString(xmlString,"text/xml");
					if ( doc.childNodes[0].nodeName == 'parsererror') {
						b = confirm(getZMILangStr('CAPTION_WARNING')+'\n'+doc.childNodes[0].childNodes[0].nodeValue+'\n'+getZMILangStr('MSG_CHANGE_ANYWAY')+'\n');
					}
				} else if (window.ActiveXObject) {
					var xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
					xmlDoc.async="false";
					xmlDoc.loadXML(xmlString);
					if ( xmlDoc.childNodes.length == 0) {
						b = confirm(getZMILangStr('CAPTION_WARNING')+'\n'+'Invalid (X)HTML!\n'+getZMILangStr('MSG_CHANGE_ANYWAY')+'\n');
					}
				}
			}
			catch(e) {
				alert(e.message);
			}
		}
	}
	return b;
}

$(function() {
	$('#text_'+getZMILang()).parent('form').submit(onZMSTextareaFormSubmit);
});

</script>

</tal:block>]]>
                  </item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[interface]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSTextarea.standard_html -->

<tal:block tal:define="global 
		zmscontext options/zmscontext;
		text          python:unicode(zmscontext.getText(request),'utf-8');
		format        python:unicode(zmscontext.attr('format'),'utf-8');
		renderedText  python:zmscontext.renderText(format,'text',text,request,zmscontext.id)"
		tal:content="structure renderedText">
	The text
</tal:block>

<!-- /ZMSTextarea.standard_html -->]]>
                  </item>
                  <item key="id"><![CDATA[standard_html]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSTextarwa]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                  <item><![CDATA[ZMSAdministrator]]></item>
                  <item><![CDATA[ZMSAuthor]]></item>
                  <item><![CDATA[ZMSEditor]]></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[ZMSTextarea]]></item>
          <item key="name"><![CDATA[ZMSTextarea]]></item>
          <item key="package"><![CDATA[com.zms.foundation]]></item>
          <item key="revision"><![CDATA[1.4.0]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[com.zms.foundation]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete" type="list">
                <list>
                </list>
              </item>
              <item key="delete_custom"></item>
              <item key="insert" type="list">
                <list>
                </list>
              </item>
              <item key="insert_custom"></item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[com.zms.foundation]]></item>
          <item key="name"><![CDATA[com.zms.foundation]]></item>
          <item key="package"></item>
          <item key="revision"><![CDATA[2.0.0]]></item>
          <item key="type"><![CDATA[ZMSPackage]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
</list>
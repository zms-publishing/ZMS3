<?xml version="1.0" encoding="utf-8"?>

<list>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[ZMSQunit]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[icon-dashboard]]></item>
                  <item key="id"><![CDATA[icon_clazz]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">1</item>
                  <item key="name"><![CDATA[Icon (Class)]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[constant]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[import Products.zms.tests

def ZMSQunit_func_( self, *args, **kwargs):
  container = self.getSelf(self.PAGES)
  test_suite = Products.zms.tests.test_util.TestSuite(container)
  out = []
  for line in test_suite.run():
    if line.lower().find('| success |')>0:
      line = '<span class="text-success bg-success">%s</span>'%line
    elif line.lower().find('| failed |')>0:
      line = '<span class="text-danger bg-danger">%s</span>'%line
    out.append(line)
  return '\n'.join(out)]]>
                  </item>
                  <item key="id"><![CDATA[ZMSQunit_func_]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Trusted functions]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[External Method]]></item>
                </dictionary>
              </item>
              <item type="dictionary">
                <dictionary>
                  <item key="custom"><![CDATA[<!-- ZMSQunit.renderShort -->

<div class="well">
	<button class="btn btn-default" onclick="$(this).parents('form').children('input:hidden').remove()" name="btn" value="test_ui" type="submit">
		Test UI
	</button>
	<button class="btn btn-default" onclick="$(this).parents('form').children('input:hidden').remove()" name="btn" value="test_backend" type="submit">
		Test Backend
	</button>
</div>

<div tal:condition="python:request.get('btn')=='test_ui'">
	<div id="qunit"></div>
	<div id="qunit-fixture"></div>
	<link rel="stylesheet" tal:attributes="src python:here.getConfProperty('qunit.css')">
	<tal:block tal:define="dummy0 python:request.set('ZMI_LIBS_JS',request.get('ZMI_LIBS_JS',[])+here.getConfProperty('qunit.libs').split(','))"></tal:block>
</div>

<div tal:condition="python:request.get('btn')=='test_backend'" tal:define="Std modules/Products.PythonScripts/standard; newline_to_br nocall:Std/newline_to_br">
	<code style="color:#666" tal:content="structure python:newline_to_br(here.ZMSQunit_func_(here))"></code>
</div>

<!-- /ZMSQunit.renderShort -->]]>
                  </item>
                  <item key="id"><![CDATA[renderShort]]></item>
                  <item key="mandatory" type="int">0</item>
                  <item key="multilang" type="int">0</item>
                  <item key="name"><![CDATA[Template: ZMSQunit]]></item>
                  <item key="repetitive" type="int">0</item>
                  <item key="type"><![CDATA[zpt]]></item>
                </dictionary>
              </item>
            </list>
          </item>
          <item key="access" type="dictionary">
            <dictionary>
              <item key="delete_custom"></item>
              <item key="delete_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
              <item key="insert_custom"><![CDATA[{$}]]></item>
              <item key="insert_deny" type="list">
                <list>
                  <item></item>
                  <item></item>
                  <item></item>
                </list>
              </item>
            </dictionary>
          </item>
          <item key="enabled" type="int">0</item>
          <item key="id"><![CDATA[ZMSQunit]]></item>
          <item key="name"><![CDATA[ZMSQunit]]></item>
          <item key="package"><![CDATA[com.zms.test]]></item>
          <item key="revision"><![CDATA[0.1.3]]></item>
          <item key="type"><![CDATA[ZMSObject]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
  <item type="dictionary">
    <dictionary>
      <item key="key"><![CDATA[com.zms.test]]></item>
      <item key="value" type="dictionary">
        <dictionary>
          <item key="__obj_attrs__" type="list">
            <list>
            </list>
          </item>
          <item key="enabled" type="int">1</item>
          <item key="id"><![CDATA[com.zms.test]]></item>
          <item key="name"><![CDATA[com.zms.test]]></item>
          <item key="package"></item>
          <item key="revision"><![CDATA[0.1.3]]></item>
          <item key="type"><![CDATA[ZMSPackage]]></item>
        </dictionary>
      </item>
    </dictionary>
  </item>
</list>
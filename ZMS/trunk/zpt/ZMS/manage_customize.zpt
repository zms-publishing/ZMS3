<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<tal:block tal:content="structure python:here.zmi_html_head(here,request)">zmi_html_head</tal:block>
<body tal:attributes="class python:' '.join(['zmi',request['lang'],'customize',here.meta_id])">
<tal:block tal:content="structure python:here.zmi_body_header(here,request,options=here.customize_manage_options())">zmi_body_header</tal:block>
<div id="zmi-tab">
<tal:block tal:content="structure python:here.zmi_breadcrumbs(here,request)">zmi_breadcrumbs</tal:block>

<script>
</script>

<div class="tabbable tabs-left">
	<ul class="nav nav-tabs">
		<li class="active"><a href="#Manager" data-toggle="tab">Manager</a></li>
		<li><a href="#Portal" data-toggle="tab">Portal</a></li>
		<li><a href="#Configuration" data-toggle="tab">Configuration</a></li>
		<li><a href="#Miscellaneous" data-toggle="tab">Miscellaneous</a></li>
		<li><a href="#Maintenance" data-toggle="tab">Maintenance</a></li>
		<li><a href="#MediaFolder" data-toggle="tab">Media-Folder</a></li>
		<li><a href="#History" data-toggle="tab">History</a></li>
		<li><a href="#Subversion" data-toggle="tab">Subversion</a></li>
		<li><a href="#InstalledLibraries" data-toggle="tab">Installed Libraries</a></li>
	</ul>
	<div class="tab-content">

		<div class="tab-pane active" id="Manager">
		<form class="form-horizontal" name="ManagerForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="Manager">
			<legend>Manager</legend>
			<tal:block tal:define="global meta_types python:filter(lambda x: not x['product']=='zms' and x['name'].startswith('ZMS'), here.filtered_meta_types())
					+map(lambda x: {'name':x,'action':x,},['Sequence','ZMSLog','ZMSWorkflowProvider','ZMSWorkflowProviderAcquired'])">
			<div class="control-group">
				<label class="control-label" for="portal_master">ZMS base-components</label>
				<div class="controls">
					<select name="meta_type" onchange="if($(this).val().indexOf('manage_add')==0){self.location.href=$(this).val();}else if ($(this).val()!=''){document.getElementById('addMetaTypeBtn').click();}">
						<option value="">Select type to add...</option>
						<tal:block tal:repeat="meta_type meta_types">
							<option tal:condition="python:len(here.objectValues(meta_type['name']))==0"  tal:attributes="value python:meta_type['action']" tal:content="python:here.getZMILangStr(meta_type['name'])">name</option>
						</tal:block>
					</select>
					<button name="btn" type="submit" class="btn" value="Add">Add</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<tal:block tal:repeat="si python:here.objectValues(['ZCatalog']+map(lambda x: x['name'],meta_types))">
			<div class="control-group">
				<div class="controls">
					<input class="form-checkbox" type="checkbox" name="ids:list" tal:attributes="value python:si.id">
					<a tal:attributes="href python:'%s/manage_main'%si.id">
						<img tal:attributes="src python:si.icon"/>
						<tal:block tal:content="python:'%s (%s)'%(si.id,here.getZMILangStr(si.meta_type))">id (meta_type)</tal:block>
					</a>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			</tal:block>
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn" value="Remove">Remove</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			</tal:block>
		</form>
		</div>

		<div class="tab-pane" id="Portal">
		<form class="form-horizontal" name="ClientsForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="Clients">
			<legend>Portal</legend>
			<p class="well well-small">Register the folder-ids of this site's master- and client-sites.</p>
			<div class="control-group">
				<label class="control-label" for="portal_master">Master</label>
				<div class="controls">
					<input type="text" name="portal_master" tal:attributes="value python:here.getConfProperty('Portal.Master','')">
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
			<label class="control-label" for="portal_master">Clients</label>
				<div class="controls">
					<textarea name="portal_clients" cols="40" rows="5" wrap="off"  tal:content="python:'\n'.join(here.getConfProperty('Portal.Clients',[]))"></textarea>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn btn-primary" value="Change">Change</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
		</div>

		<div class="tab-pane" id="Configuration">
		<form class="form-horizontal" name="ImportForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="Import">
			<legend>Configuration</legend>
			<p class="well well-small">Import complete configuration packages with language-dictionaries, metadata-, special-object-, action- and filter-definitions contained in one single zip-archive.</p>
			<div class="control-group">
				<label class="control-label" for="file" tal:content="python:here.getZMILangStr('ATTR_FILE')">File</label>
				<div class="controls">
					<input name="file" type="file">
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn btn-primary" value="Import">Import</button>
				</div>
			</div>
		</form>
		</div>

		<div class="tab-pane" id="Miscellaneous">
<form class="form-horizontal" name="CustomForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
	<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
	<input type="hidden" name="key" value="Custom">
	<legend>Miscellaneous</legend>
	<tal:block tal:define="global 
			conf python:here.getConfProperties();
			conf_keys python:filter(lambda x: not x.startswith('ZMS.workflow') and not x.startswith('ZMS.version') and not x=='ZMS.log' and not x.startswith('ZMS.security') and not x.startswith('zms.misc') and not x.startswith('ZMS.filter') and not x.startswith('ZMS.custom') and not x.startswith('Portal.'),conf.keys());
			res python:[
				{'key':'ZMSAdministrator.email','title':'Admin e-Mail','desc':'Administrators e-mail address.','datatype':'string'},
				{'key':'ASP.ip_or_domain','title':'ASP IP/Domain','desc':'ASP IP/Domain.','datatype':'string'},
				{'key':'HTTP.proxy','title':'HTTP proxy','desc':'HTTP proxy (host:port).','datatype':'string'},
				{'key':'jquery.version','title':'JQuery version','desc':'JQuery version.','datatype':'string'},
				{'key':'jquery.ui','title':'JQuery UI version','desc':'JQuery UI version.','datatype':'string'},
				{'key':'jquery.plugin.version','title':'JQuery plugin version','desc':'JQuery plugin version','datatype':'string'},
				{'key':'jquery.plugin.extensions','title':'JQuery plugin extensions','desc':'JQuery plugin extensions','datatype':'string'},
				{'key':'ZMS.blobfields.grant_public_access','title':'Grant public access to blob-fields','desc':'Blob-fields in restricted nodes are not visible. You may grant public access to blob-fields by activating this option.','datatype':'boolean'},
				{'key':'ZMS.blobfields.accept_ranges','title':'Http-Header Accept-Ranges for blob-fields','desc':'Http-Header Accept-Ranges for blob-fields.','datatype':'string','default':'bytes'},
				{'key':'ZMS.compactview.pagecount.min','title':'Compact-view','desc':'ZMS can display object-lists longer than specified parameter as compact-view.','datatype':'string'},
				{'key':'ZMS.locale.amount.unit','title':'Currency unit for amount-types','desc':'The currency unit used for amount-types.','datatype':'string','default':'EUR'},
				{'key':'ZMS.pathhandler','title':'Declarative URLs','desc':'ZMS can use declarative URLs based on DC.Identifier.Url.Node (or DC.Title.Alt).','datatype':'boolean'},
				{'key':'EmailMandatory','title':'Email Mandatory?','desc':'Email for users','datatype':'boolean','default':0}, 
				{'key':'ZMS.pathhandler.id_quote.mapping','title':'Declarative IDs-Mapping','desc':'ZMS can map characters in DC.Title.Alt to declarative IDs.','datatype':'string','default':' _-_/_'},
				{'key':'ZMS.preview.contentEditable','title':'Content-Editable Preview','desc':'Make content in ZMS preview editable','datatype':'boolean','default':1},
				{'key':'ZMS.pathcoherence','title':'Coherent URLs','desc':'ZMS can use full path-coherent URLs. Disable this option if you have problems with your VirtualHost-configuration.','datatype':'boolean','default':1},
				{'key':'ZMS.pathcropping','title':'Crop URLs','desc':'ZMS can crop the SERVER_NAME from URLs.','datatype':'boolean'},
				{'key':'ZMS.manage_tabs_message','title':'Global Message','desc':'ZMS can display a global message for all users in the management interface.','datatype':'text'},
				{'key':'ZMS.metaobj_manager.syncType','title':'Content-Object sync','desc':'Sync methods of Content-Objects with native Zope-objects.','datatype':'boolean','default':1},
				{'key':'ZMS.http_accept_language','title':'Http Accept Language','desc':'ZMS can use the HTTP_ACCEPT_LANGUAGE request-parameter to determine initial language.','datatype':'boolean'},
				{'key':'ZMS.export.domains','title':'Export resources from external domains','desc':'ZMS can export resources from external domains in the HTML export.','datatype':'string'},
				{'key':'ZMS.export.pathhandler','title':'Export XHTML with decl. Document Ids','desc':'Please activate this option, if you would like to generate declarative document URLs for static XHTML-Export: /documentname/index_eng.html will be transformed to /documentname.html','datatype':'boolean'},
				{'key':'ZMS.export.xml.tidy','title':'Export with HTML Tidy Library','desc':'ZMS can use the HTML Tidy Library to process inline (X)HTML in the XML export to avoid CDATA-sections.','datatype':'boolean'},
				{'key':'ZMS.localfs_read','title':'LocalFS read','desc':'List of directories with permission for LocalFS read (semicolon separated).','datatype':'string','default':''},
				{'key':'ZMS.localfs_write','title':'LocalFS write','desc':'List of directories with permission for LocalFS write (semicolon separated).','datatype':'string','default':''},
				{'key':'ZMS.logout.href','title':'Logout URL','desc':'URL for logout from ZMS.','datatype':'string','default':''},
				{'key':'ZMS.input.file.plugin','title':'File.upload input','desc':'ZMS can use custom input-fields for file-upload.','datatype':'string','options':['input_file','ajax_upload','rad_upload']},
				{'key':'ZMS.input.file.maxlength','title':'File.upload maxlength','desc':'ZMS can limit the maximum upload-file size to the given value (in Bytes).','datatype':'string'},
				{'key':'ZMS.input.image.maxlength','title':'Image.upload maxlength','desc':'ZMS can limit the maximum upload-image size to the given value (in Bytes).','datatype':'string'},
				{'key':'ZMSGraphic.zmi_max_width','title':'Image.max_width in ZMI','desc':'Maximum width for display of standard image-objects in ZMS Management Interface (ZMI).','datatype':'int','default':400},
				{'key':'ZMSGraphic.px2em','title':'Image.px to em conversion','desc':'Scale-factor for px to em conversion in ZMS barrier-free standard image-objects depending on the CSS used for this instance.(1em in px, e.g. 16)','datatype':'string'},
				{'key':'ZMSGraphic.superres','title':'Image superres-attribute','desc':'Super-resolution attribute for ZMS standard image-objects.','datatype':'boolean'},
				{'key':'ZCatalog.portalClients','title':'Search portal-clients','desc':'Allow search in portal-clients','datatype':'boolean','default':1},
				{'key':'ZCatalog.TextIndexNG','title':'Search binaries with TextIndexNG','desc':'Use TextIndexNG for catalog-indexing of binaries.','datatype':'boolean'},
				{'key':'ZCatalog.TextIndexType','title':'Search with TextIndex-type','desc':'Use specified TextIndex-type (default: ZCTextIndex)','datatype':'string','default':'ZCTextIndex'},
				];
			res_keys python:map(lambda x: x['key'],here.sort_list(res,'title','asc'))">
	<div class="control-group">
		<label class="control-label" for="conf_opt" tal:content="python:here.getZMILangStr('ATTR_OPTION')">Option</label>
		<div class="controls">
			<select id="conf_opt" name="conf_opt">
				<tal:block tal:repeat="res_key res_keys">
				<tal:block tal:define="global res_item python:filter(lambda x: x['key']==res_key,res)[0]">
					<option tal:attributes="value python:res_item['key']; title python:res_item['desc']" tal:content="python:res_item['title']">the title</option>
				</tal:block>
				</tal:block>
			</select>
		</div><!-- .controls -->
	</div><!-- .control-group -->
	<div class="control-group">
		<label class="control-label" for="conf_key" tal:content="python:here.getZMILangStr('ATTR_KEY')">Key</label>
		<div class="controls">
			<input type="text" id="conf_key" name="conf_key">
		</div><!-- .controls -->
	</div><!-- .control-group -->
	</tal:block>
</form>
		</div>

		<div class="tab-pane" id="Maintenance">
		<form class="form-horizontal" name="CatalogForm" action="manage_customize#_Maintenance" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="Maintenance">
			<legend>Maintenance</legend>
		</form>
		</div>

		<div class="tab-pane" id="MediaFolder">
		<form class="form-horizontal" name="CatalogForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="MediaDb">
			<legend>Media-Folder</legend>
			<p class="well well-small">Use the Media-Folder to store binary data of media (e.g. images, files) in the file-system of your server instead of ZODB.</p>
			<tal:block tal:condition="python:here.getMediaDb() is None">
			<div class="control-group">
				<label class="control-label" for="mediadb_location">Location</label>
				<div class="controls">
					<input type="text" name="mediadb_location">
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn btn-primary" value="Create">Create</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			</tal:block>
			<tal:block tal:condition="python:here.getMediaDb() is not None">
			<div class="control-group">
				<label class="control-label" for="mediadb_location">Location</label>
				<div class="controls">
					<input type="text" name="mediadb_location" tal:attributes="value python:here.getMediaDb().location" disabled="disabled">
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn" value="Remove">Remove</button>
					<button name="btn" type="submit" class="btn" value="Pack" tal:condition="python:here.getMediaDb().location.replace('\\','/').find('/'+here.getHome().id)>=0">Pack</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			</tal:block>
		</form>
		</div>

		<div class="tab-pane" id="History">
<form class="form-horizontal" name="HistoryForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
	<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
	<input type="hidden" name="key" value="History">
	<legend>History</legend>
	<p class="well well-small">Activate or deactivate the integrated history-mechanism.</p>
	<div class="control-group">
	<label class="control-label" for="history_active">Active</label>
		<div class="controls">
			<input type="checkbox" id="history_active" name="active:int" value="1" tal:attributes="checked python:['','checked'][int(here.getConfProperty('ZMS.Version.active',0)==1)]">
			<div class="input-append zmi-nodes">
				<textarea name="nodes" cols="40" rows="1" wrap="off" tal:content="python:'\n'.join(here.getConfProperty('ZMS.Version.nodes',['{$}']))"></textarea>
				<span class="add-on">...</span>
			</div>
		</div><!-- .controls -->
	</div><!-- .control-group -->
	<div class="control-group">
		<div class="controls">
			<button name="btn" type="submit" class="btn btn-primary" value="Change">Change</button>
		</div><!-- .controls -->
	</div><!-- .control-group -->
</form>
		</div>

		<div class="tab-pane" id="Subversion">
		<form class="form-horizontal" name="SVNForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="SVN">
			<legend>Subversion</legend>
			<p class="well well-small">Use the subversion-folder to sync home-folder from ZODB with the file-system of your server.</p>
			<div class="control-group">
				<label class="control-label" for="conf_value">Location</label>
				<div class="controls">
					<input type="hidden" name="conf_key" value="SVN.path"/>
					<input type="text" name="conf_value" tal:attributes="value python:here.getConfProperty('SVN.path','')">
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button name="btn" type="submit" class="btn btn-primary" value="Change">Change</button>
					&nbsp;
					<button name="btn" type="submit" class="btn" value="Copy to Location">Copy to Location</button>
					<button name="btn" type="submit" class="btn" value="Update from Location">Update from Location</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
		</div>

		<div class="tab-pane" id="InstalledLibraries">
		<form class="form-horizontal" name="InstalledProductsForm" action="manage_customizeSystem" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value python:request['lang']">
			<input type="hidden" name="key" value="InstalledProducts">
			<legend>Installed Libraries</legend>
		</form>
		</div>

	</div>
</div>

<div style="clear:both;">&nbsp;</div>
</div><!-- #zmi-tab -->
<tal:block tal:content="structure python:here.zmi_body_footer(here,request)">zmi_body_footer</tal:block>
</body>
</html>
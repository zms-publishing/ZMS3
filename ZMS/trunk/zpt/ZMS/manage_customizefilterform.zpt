<!DOCTYPE html>
<html lang="en" tal:define="Std modules/Products/PythonScripts/standard">
<tal:block tal:content="structure python:here.zmi_html_head(here,request)">zmi_html_head</tal:block>
<body tal:attributes="class python:' '.join(['zmi',request['lang'],'filter',here.meta_id])">
<tal:block tal:content="structure python:here.zmi_body_header(here,request,options=here.customize_manage_options())">zmi_body_header</tal:block>
<div id="zmi-tab">
<tal:block tal:content="structure python:here.zmi_breadcrumbs(here,request)">zmi_breadcrumbs</tal:block>

<style>
.horizontal-group .control-group {
	float:left;
	margin-right:0.5em;
}
.horizontal-group .mandatory span {
	background: none !important;
	padding-left: 0 !important;
}
.horizontal-group .controls {
	margin-left: 0px;
}
.horizontal-group .control-group label {
	float:none;
	width:auto;
	text-align:left;
}
.horizontal-group .controls.save {
	margin-top:2.1em;
}
select.zmi-sort {
	font-size:14px;
}
.filterName {
	font-weight:bold;
}
.filterDelimiter {
	background-color:#D0D0FF;
	border:1px navy solid;
	border-radius:5px;
	margin:.1em;
	max-width:20em;
	text-align:center;
	padding:2px 4px 2px 4px;
}
.filterProcess {
	background-color:#D0FFD0;
	border:1px navy solid;
	border-radius:5px;
	font-weight:normal;
	margin:.1em;
	max-width:20em;
	text-align:center;
	padding:2px 4px 2px 4px;
}
.filterProcessFile {
	background-color:white;
	border:1px #CCC solid;
	border-radius:5px;
	font-weight:normal;
	margin:.1em;
	padding:2px 4px 2px 4px;
	font-size:smaller;
}
.layoutTable th, .layoutTable td {
	padding:0;
	vertical-align:middle;
	border:0;
}
</style>

<script>

/**
 * Delete object.
 */
function zmiDeleteObjBtnClick(sender,d) {
	if (confirm(getZMILangStr('MSG_CONFIRM_DELOBJ'))) {
		zmiFormSubmit(sender,d);
	}
}

/**
 * Submit form with given parameters.
 */
function zmiFormSubmit(sender,d) {
	var $fm = $(sender).closest("form");
	var html = '';
	for (var i in d) {
		$('input[name="' + i + '"]',$fm).remove();
		html += '<input type="hidden" name="' + i + '" value="' + d[i] +'"/>';
	}
	$fm
		.append(html)
		.submit();
}

$(function() {
		$('button[name=btn][value='+getZMILangStr('BTN_CLOSE')+']').click(function() {
				$(this).parents('.inner').dialog('close');
				return false;
			});
		$('#updateFilter').dialog({modal:true,title:getZMILangStr('TAB_PROPERTIES')+': '+getZMILangStr('ATTR_FILTER'),closeText:getZMILangStr('BTN_CLOSE'),height:'auto',width:'auto'});
		$('#updateProcess').dialog({modal:true,title:getZMILangStr('TAB_PROPERTIES')+': '+getZMILangStr('ATTR_PROCESSES'),closeText:getZMILangStr('BTN_CLOSE'),height:'auto',width:'auto'});
	});

</script>

<tal:block tal:define="global
		action python:'manage_changeFilter';
		filterIds python:here.getFilterIds();
		filters python:map(lambda x: here.getFilter(x), filterIds);
		processIds python:here.getProcessIds();
		processes python:map(lambda x: here.getProcess(x), processIds)">

<div class="ui-helper-hidden">
	<div id="importConf" class="inner">
		<form class="form-horizontal" name="importConfForm" tal:attributes="action action" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang">
			<div class="control-group">
				<label for="file" class="control-label">
					<i class="icon-folder-open-alt"></i>
					<span tal:content="python:here.getZMILangStr('ATTR_FILE')">File</span>
				</label>
				<div class="controls"><input type="file" name="file"></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<label for="or" class="control-label"><span tal:content="python:here.getZMILangStr('OR')">Or</span></label>
				<div class="controls">
					<select id="init" name="init" onfocus="zmiExpandConfFiles(this,'.filter.')" onmouseover="zmiExpandConfFiles(this,'.filter.')">
						<option value="" tal:content="python:'--- %s ---'%here.getZMILangStr('BTN_INIT')">--- Init... ---</option>
					</select>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_IMPORT')" tal:content="python:here.getZMILangStr('BTN_IMPORT')">Import</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
	</div><!-- .inner -->
</div><!-- #importConf -->

<div class="ui-helper-hidden" tal:condition="python:request.get('id') in filterIds">
	<div id="updateFilter" class="inner" tal:define="global filter python:here.getFilter(request['id'])">
		<form class="form-horizontal" action="manage_changeFilter" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang"/>
			<input type="hidden" name="id" tal:attributes="value request/id"/>
			<div class="horizontal-group">
				<div class="control-group inpId">
					<label for="inpId" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_ID')">Id</span></label>
					<div class="controls"><input type="text" id="inpId" name="inpId" tal:attributes="value filter/id"/></div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group inpName">
					<label for="inpName" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
					<div class="controls"><input type="text" id="inpName" name="inpName" tal:attributes="value filter/name"/></div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group">
					<div class="controls save">
						<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_SAVE')" tal:content="python:here.getZMILangStr('BTN_SAVE')">Save</button>
						<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_CLOSE')" tal:content="python:here.getZMILangStr('BTN_CLOSE')">Close</button>
					</div><!-- .controls.save -->
				</div><!-- .control-group -->
			</div><!-- .horizontal-group -->
			<div style="clear:both;">&nbsp;</div>
			<div class="horizontal-group">
				<div class="control-group inpFormat">
					<label for="inpFormat" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_FORMAT')">Format</span></label>
					<div class="controls">
						<select id="inpFormat" name="inpFormat">
						<tal:block tal:repeat="format python:[
								['import', 'Import' ],
								['export', 'Export' ],
								['XML', 'XML-Export' ],
								['XML_incl_embedded', 'XML-Export (incl. embedded)' ],
								['XHTML', 'XHTML-Export' ]]+
								[[],['myXML',getattr(here,'getObjToXml_DocElmnt',here).title_or_id()]][int(getattr(here,'getObjToXml_DocElmnt',None) is not None)]">
							<option tal:attributes="value python:format[0]; selected python:['','selected'][int(format[0]==filter.get('format'))]" tal:content="python:format[1]">the format</option>
						</tal:block>
						</select>
					</div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group inpContentType">
					<label for="inpContentType" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_TYPE')">Type</span></label>
					<div class="controls">
						<select id="inpContentType" name="inpContentType">
							<tal:block tal:repeat="content_type python:here.enumManager.getValues('content_type')">
								<option tal:attributes="value python:content_type[0]; selected python:['','selected'][int(content_type[0]==filter.get('content_type'))]" tal:content="python:content_type[1]">the content-type</option>
							</tal:block>
						</select>
					</div><!-- .controls -->
				</div><!-- .control-group -->
			</div><!-- .horizontal-group -->
			<div style="clear:both;">&nbsp;</div>
			<div class="horizontal-group">
				<div class="control-group inpDescription">
					<label for="inpDescription" class="control-label"><span tal:content="python:here.getZMILangStr('ATTR_DESCRIPTION')">Description</span></label>
					<div class="controls"><textarea name="inpDescription" tal:content="python:filter.get('description','')">the description</textarea></div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group inpRoles">
					<label for="inpDescription" class="control-label"><span tal:content="python:here.getZMILangStr('ATTR_ROLES')">Roles</span></label>
					<div class="controls">
						<select id="inpRoles" name="inpRoles:list" multiple="multiple">
							<tal:block tal:repeat="role python:here.userdefined_roles()"><tal:block tal:define="global lang_key python:'ROLE_%s'%role.upper(); lang_str python:here.getZMILangStr(lang_key)">
								<option tal:attributes="value role; selected python:['','selected'][int(role in filter.get('roles',[]))]" tal:content="python:[lang_str,role][int(lang_key==lang_str)]">the role</option>
							</tal:block></tal:block>
						</select>
					</div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group inpMetaTypes">
					<label for="inpDescription" class="control-label"><span tal:content="python:here.getZMILangStr('ATTR_OBJECTS')">Objects</span></label>
					<div class="controls">
						<select id="inpMetaTypes" name="inpMetaTypes:list" multiple="multiple">
							<tal:block tal:repeat="meta_id python:here.getMetaobjIds()">
								<option tal:attributes="value meta_id; selected python:['','selected'][int(meta_id in filter.get('meta_types',[]))]" tal:content="python:here.display_type(request,meta_id)">the meta-type</option>
							</tal:block>
						</select>
					</div><!-- .controls -->
				</div><!-- .control-group -->
			</div><!-- .horizontal-group -->
			<div style="clear:both;">&nbsp;</div>
			<div tal:content="python:here.getZMILangStr('ATTR_PROCESS')">Process</div>
			<table class="table table-striped zmi-sortable">
			<tbody tal:define="global filterProcesses python:here.getFilterProcesses(filter['id'])">
			<tr tal:repeat="pid python:range(len(filterProcesses))">
			<tal:block tal:define="global filterProcess python:filterProcesses[pid]; process python:here.getProcess(filterProcess['id'])">
				<td>
					<div class="input-append">
						<select class="zmi-sort" tal:attributes="onchange python:'zmiFormSubmit(this,{btn:\'move_to\',id:\'%s\',\'pid:int\':%i,key:\'attr\',\'pos:int\':this.selectedIndex})'%(filter['id'],pid)">
							<option tal:repeat="i python:range(0,len(filterProcesses))" tal:attributes="selected python:['','selected'][int(i==pid)]" tal:content="python:i+1">i+1</option>
						</select>
						<span class="add-on btn" tal:attributes="onclick python:'javascript:zmiDeleteObjBtnClick(this,{btn:\'delete\',id:\'%s\',\'pid:int\':%i,key:\'attr\'})'%(filter['id'],pid); title python:here.getZMILangStr('BTN_DELETE')"><i class="icon-remove"></i></span>
					</div>
				</td>
				<td>
					<select tal:attributes="name python:'newFilterProcessId_%i'%pid">
						<tal:block tal:repeat="process python:map(lambda x:here.getProcess(x),processIds)">
							<option tal:attributes="value process/id; selected python:['','selected'][int(filterProcess['id']==process['id'])]" tal:content="process/name">the process</option>
						</tal:block>
					</select>
				</td>
				<td>
					<tal:block tal:condition="python:process.get('type','process') in ['DTML Method','External Method','Script (Python)'] or process.get('command','').find('{trans}')>=0">
						<div class="pull-left">
							<code>{trans}</code>
							<input type="file" tal:attributes="name python:'newFilterProcessFile_%i'%pid"/>
						</div>
						<div class="pull-left filterProcessFile" tal:condition="python:filterProcess.get('file_filename')">
							<input type="checkbox" checked="checked"/>
							<a tal:attributes="href filterProcess/file_href; title python:filterProcess['file_content_type']" target="_blank">
								<img tal:attributes="src python:here.getMimeTypeIconSrc(filterProcess['file_content_type']); alt filterProcess/file_filename"/>
								<tal:block tal:content="filterProcess/file_filename"></tal:block>
							</a>
						</div>
					</tal:block>
				</td>
			</tal:block>
			</tr>
			<tr class="row_insert">
				<td class="meta-sort"><i class="icon-plus"></i></td>
				<td>
					<select tal:attributes="name python:'newFilterProcessId_%i'%len(filterProcesses)">
						<option value="" tal:content="python:'--- %s ---'%here.getZMILangStr('ACTION_SELECT')%here.getZMILangStr('ATTR_TYPE')">--- Select type ---</option>
						<tal:block tal:repeat="process python:map(lambda x:here.getProcess(x),processIds)">
							<option tal:attributes="value process/id" tal:content="process/name">the process</option>
						</tal:block>
					</select>
				</td>
				<td>&nbsp;</td>
			</tr>
			</tbody>
			</table><!-- .table -->
		</form>
	</div><!-- .inner -->
</div><!-- #updateFilter -->

<div class="ui-helper-hidden" tal:condition="python:request.get('id') in processIds">
	<div id="updateProcess" class="inner" tal:define="global process python:here.getProcess(request['id'])">
		<form class="form-horizontal" action="manage_changeProcess" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang"/>
			<input type="hidden" name="id" tal:attributes="value request/id"/>
			<div class="horizontal-group">
				<div class="control-group inpId">
					<label for="inpId" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_ID')">Id</span></label>
					<div class="controls"><input type="text" id="inpId" name="inpId" tal:attributes="value process/id"/></div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group inpName">
					<label for="inpName" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
					<div class="controls"><input type="text" id="inpName" name="inpName" tal:attributes="value process/name"/></div><!-- .controls -->
				</div><!-- .control-group -->
				<div class="control-group">
					<div class="controls save">
						<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_SAVE')" tal:content="python:here.getZMILangStr('BTN_SAVE')">Save</button>
						<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_CLOSE')" tal:content="python:here.getZMILangStr('BTN_CLOSE')">Close</button>
					</div><!-- .controls.save -->
				</div><!-- .control-group -->
			</div><!-- .horizontal-group -->
			<div style="clear:both;">&nbsp;</div>
		</form>
	</div><!-- .inner -->
</div><!-- #updateProcess -->

<div class="ui-helper-hidden">
	<div id="insertFilter" class="inner">
		<form class="form-horizontal" name="insertObjForm" action="manage_changeFilter" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang"/>
			<div class="control-group newId">
				<label for="newId" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_ID')">Id</span></label>
				<div class="controls"><input type="text" id="newId" name="newId" value="AC_"/></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group newName">
				<label for="newName" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
				<div class="controls"><input type="text" id="newName" name="newName"/></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_INSERT')" tal:content="python:here.getZMILangStr('BTN_INSERT')">Insert</button>
					<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_CLOSE')" tal:content="python:here.getZMILangStr('BTN_CLOSE')">Close</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
	</div><!-- .inner -->
</div><!-- #insertFilter -->

<div class="ui-helper-hidden">
	<div id="insertProcess" class="inner">
		<form class="form-horizontal" name="insertObjForm" action="manage_changeProcess" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang"/>
			<div class="control-group newId">
				<label for="newId" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_ID')">Id</span></label>
				<div class="controls"><input type="text" id="newId" name="newId" value="TR_"/></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group newName">
				<label for="newName" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
				<div class="controls"><input type="text" id="newName" name="newName"/></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group newType">
				<label for="newType" class="control-label"><span tal:content="python:here.getZMILangStr('ATTR_TYPE')">Type</span></label>
				<div class="controls">
					<select name="newType">
						<tal:block tal:repeat="meta_type python:['Page Template','Script (Python)']">
							<option tal:attributes="value meta_type" tal:content="meta_type">the meta_type</option>
						</tal:block>
						<option value="" tal:content="python:here.getZMILangStr('ATTR_NONE')">the meta_type</option>
					</select>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_INSERT')" tal:content="python:here.getZMILangStr('BTN_INSERT')">Insert</button>
					<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_CLOSE')" tal:content="python:here.getZMILangStr('BTN_CLOSE')">Close</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
	</div><!-- .inner -->
</div><!-- #insertProcess -->

<form class="form-horizontal" tal:attributes="action action" method="post" enctype="multipart/form-data">
	<p class="well well-small" tal:content="structure python:here.getZMILangStr('MSG_FILTER')">well</p>
	<input type="hidden" name="lang" tal:attributes="value request/lang">
	<legend tal:content="python:here.getZMILangStr('ATTR_FILTER')">Filter</legend>
	<table class="table table-striped table-bordered zmi-sortable">
		<colgroup>
			<col width="1em"/>
		</colgroup>
		<thead>
			<tr>
				<th>
					<div class="btn-group">
						<span class="btn" tal:attributes="title python:'%s/%s'%(here.getZMILangStr('BTN_SLCTALL'),here.getZMILangStr('BTN_SLCTNONE'))" onclick="zmiToggleSelectionButtonClick(this)"><i class="icon-check"></i></span>
					</div>
				</th>
				<th>
					<div class="btn-group">
						<span class="btn btn-primary" tal:attributes="title python:here.getZMILangStr('BTN_INSERT')+'...'" onclick="$('#insertObj').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})"><i class="icon-plus"></i></span>
						<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_DELETE')+'...'" onclick="zmiDeleteObjBtnClick(this,{btn:getZMILangStr('BTN_DELETE'),key:'obj'})"><i class="icon-remove"></i></span>
						<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_ACQUIRE')+'...'" onclick="$('#acquireObj').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})" tal:condition="python:here.getPortalMaster() is not None"><i class="icon-upload"></i></span>
						<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_IMPORT')+'...'" onclick="$('#importConf').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})"><i class="icon-upload-alt"></i></span>
						<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_EXPORT')+'...'" onclick="zmiExportBtnClick(this)"><i class="icon-download-alt"></i></span>
					</div>
				</th>
			</tr>
		</thead>
		<tbody>
			<tr tal:repeat="filterId filterIds">
			<tal:block tal:define="global filter python:here.getFilter(filterId)">
				<td>
					<input type="checkbox" name="ids:list" tal:attributes="value filterId">
				</td>
				<td>
					<a class="filterName" tal:attributes="href python:'?lang=%s&id=%s'%(request['lang'],filterId); title python:here.getZMILangStr('BTN_EDIT')+'...'">
						<i class="icon-filter"></i>
						<tal:block tal:content="filter/name">the filter-name</tal:block>
					</a>
					<div class="filterProcesses">
						<table class="layoutTable">
						<tr><td><div class="filterDelimiter">
							<tal:block tal:condition="python:filter['format']=='import'">
								<img tal:attributes="src python:here.getMimeTypeIconSrc(filter['content_type']); title filter/content_type"/> 
								<i class="icon-arrow-up" title="Import"></i>
							</tal:block>
							<tal:block tal:condition="python:filter['format']!='import'">
								<tal:block tal:content="filter/format">the format</tal:block>
							</tal:block>
						</div></td></tr>
						<tr tal:repeat="filterProcess python:here.getFilterProcesses(filterId)">
							<tal:block tal:define="global process python:here.getProcess(filterProcess['id'])">
								<td><div class="filterProcess" tal:content="process/name">the process-name</div></td>
								<tal:block tal:condition="python:filterProcess.get('file_filename')">
									<td><img src="/misc_/zms/spacer.gif" alt="" border="0" tal:attributes="style python:'background-color:#CCC\073width:50px\073height:1px'"/></td>
									<td><div class="filterProcessFile">
										<a tal:attributes="href filterProcess/file_href; title python:filterProcess['file_content_type']" target="_blank">
											<img tal:attributes="src python:here.getMimeTypeIconSrc(filterProcess['file_content_type']); alt filterProcess/file_filename"/>
											<tal:block tal:content="filterProcess/file_filename"></tal:block>
										</a>
									</div></td>
								</tal:block>
							</tal:block>
						</tr>
						<tr><td><div class="filterDelimiter">
							<tal:block tal:condition="python:filter['format']=='import'">
								<img tal:attributes="src python:here.getMimeTypeIconSrc('text/xml')"/>
							</tal:block>
							<tal:block tal:condition="python:filter['format']!='import'">
								<img tal:attributes="src python:here.getMimeTypeIconSrc(filter['content_type']); title filter/content_type"/> 
								<i class="icon-arrow-down" title="Export"></i>
							</tal:block>
						</div></td></tr>
						</table><!-- .layoutTable -->
					</div><!-- .filterProcesses -->
				</td>
			</tal:block>
			</tr>
		</tbody>
	</table>
</form>

<form class="form-horizontal" action="manage_changeProcess" method="post" enctype="multipart/form-data">
	<input type="hidden" name="lang" tal:attributes="value request/lang">
	<legend tal:content="python:here.getZMILangStr('ATTR_PROCESSES')">Processes</legend>
	<table class="table table-striped table-bordered zmi-sortable">
		<colgroup>
			<col width="1em"/>
		</colgroup>
		<thead>
		<tr>
			<th>
				<div class="btn-group">
					<span class="btn" tal:attributes="title python:'%s/%s'%(here.getZMILangStr('BTN_SLCTALL'),here.getZMILangStr('BTN_SLCTNONE'))" onclick="zmiToggleSelectionButtonClick(this)"><i class="icon-check"></i></span>
				</div>
			</th>
			<th>
				<div class="btn-group">
					<span class="btn btn-primary" tal:attributes="title python:here.getZMILangStr('BTN_INSERT')+'...'" onclick="$('#insertObj').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})"><i class="icon-plus"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_DELETE')+'...'" onclick="zmiDeleteObjBtnClick(this,{btn:getZMILangStr('BTN_DELETE'),key:'obj'})"><i class="icon-remove"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_ACQUIRE')+'...'" onclick="$('#acquireObj').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})" tal:condition="python:here.getPortalMaster() is not None"><i class="icon-upload"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_IMPORT')+'...'" onclick="$('#importConf').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})"><i class="icon-upload-alt"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_EXPORT')+'...'" onclick="zmiExportBtnClick(this)"><i class="icon-download-alt"></i></span>
				</div>
			</th>
			<th tal:content="python:here.getZMILangStr('ATTR_COMMANDLINE')">Commandline</th>
		</tr>
		</thead>
		<tbody>
			<tr tal:repeat="processId processIds">
			<tal:block tal:define="global process python:here.getProcess(processId)">
				<td>
					<input type="checkbox" name="ids:list" tal:attributes="value processId">
				</td>
				<td>
					<a tal:attributes="href python:'?lang=%s&id=%s'%(request['lang'],processId); title python:here.getZMILangStr('BTN_EDIT')+'...'">
						<tal:block tal:condition="python:getattr(here,process['id'],None) is not None"><img tal:attributes="src python:getattr(here,process['id']).icon"/></tal:block>
						<tal:block tal:condition="python:getattr(here,process['id'],None) is None"><i class="icon-cog"></i></tal:block>
						<tal:block tal:content="process/id">the id</tal:block>
					</a>
					(<tal:block tal:content="process/name">the name</tal:block>)
				</td>
				<td><code tal:content="python:here.string_maxlen(Std.html_quote(process['command']),50)">the command</code></td>
			</tal:block>
			</tr>
		</tbody>
	</table>
</form>

</tal:block>

<div style="clear:both;">&nbsp;</div>
</div><!-- #zmi-tab -->
<tal:block tal:content="structure python:here.zmi_body_footer(here,request)">zmi_body_footer</tal:block>
</body>
</html>
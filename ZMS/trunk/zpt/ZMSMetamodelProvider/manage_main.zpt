<!DOCTYPE html>
<html lang="en">
<tal:block tal:content="structure python:here.zmi_html_head(here,request)">zmi_html_head</tal:block>
<body tal:attributes="class python:' '.join(['zmi',request['lang'],'metas',here.meta_id])">
<tal:block tal:content="structure python:here.zmi_body_header(here,request,options=here.customize_manage_options())">zmi_body_header</tal:block>
<div id="zmi-tab">
<tal:block tal:content="structure python:here.zmi_breadcrumbs(here,request)">zmi_breadcrumbs</tal:block>

<style>
.zmi-element-disabled {
	background:#EEE!important;
}
.zmi-element-key {
	position:absolute;
	margin:4px;
}
</style>

<script>

/**
 * Export xml.
 */
function zmiExportBtnClick(sender) {
	var $fm = $(sender).closest("form");
	var href = fm.action+'?lang='+getZMILang()+'&btn='+getZMILangStr('BTN_EXPORT');
	$('input[name="ids:list"]:checked',fm).each(function(){
			href += '&'+$(this).attr("name")+'='+$(this).val();
		});
	window.open(href);
	return false;
}

/**
 * Delete object.
 */
function zmiDeleteObjBtnClick(sender,d) {
	if (confirm(getZMILangStr('MSG_CONFIRM_DELOBJ'))) {
		var $fm = $(sender).closest("form");
		var html = '';
		for (var i in d) {
			$('input[name="' + i + '"]',$fm).remove();
			html += '<input type="hidden" name="' + i + '" value="' + d[i] +'">';
		}
		$fm
			.append(html)
			.submit();
	}
}

/**
 * Populate type.
 */
function zmiPopulateTypeSelect(sender) {
	if ( sender.options.length <= 1) {
		var selectedValue = '';
		if ( sender.options.length == 1) {
			selectedValue = sender.options[0].value;
		}
		sender.options.length = 0;
		$("select#populate_type option").each(function() {
				addOption( sender, $(this).text(), $(this).val(), selectedValue);
			});
	}
}

$(function() {
		$("select[name=_type],select[name^=attr_type_]")
			.focus(function(){zmiPopulateTypeSelect(this)})
			.hover(function(){zmiPopulateTypeSelect(this)});
	});

</script>

<tal:block tal:define="global
		metaObjIds python:here.getMetaobjIds();
		metaObjs python:map(lambda x: here.getMetaobj(x), metaObjIds);
		metaObjPackages python:here.sort_list(here.distinct_list(map(lambda x: x.get('package'), metaObjs)))">

<div class="ui-helper-hidden">
	<div id="insertObj" class="inner">
		<form class="form-horizontal" name="insertObjForm" action="manage_changeProperties" method="post" enctype="multipart/form-data">
			<input type="hidden" name="lang" tal:attributes="value request/lang">
			<input type="hidden" name="key" value="obj">
			<div class="control-group">
				<label for="_meta_id" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_ID')">Id</span></label>
				<div class="controls"><input type="text" id="_meta_id" name="_meta_id"></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<label for="_meta_name" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
				<div class="controls"><input type="text" id="_meta_name" name="_meta_name"></div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<label for="_meta_type" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_TYPE')">Type</span></label>
				<div class="controls">
					<select id="_meta_type" name="_meta_type">
						<tal:block tal:repeat="objtype python:here.valid_objtypes">
							<option tal:attributes="value objtype" tal:content="python:here.getZMILangStr('SOTYPE_%s'%objtype.upper())">objtype</option>
						</tal:block>
					</select>
				</div><!-- .controls -->
			</div><!-- .control-group -->
			<div class="control-group">
				<div class="controls">
					<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_INSERT')" tal:content="python:here.getZMILangStr('BTN_INSERT')">Insert</button>
				</div><!-- .controls -->
			</div><!-- .control-group -->
		</form>
	</div><!-- .inner -->
</div><!-- #insertObj -->

<form tal:condition="python:request.get('id')" class="form-horizontal" action="manage_changeProperties" method="post" enctype="multipart/form-data">
<tal:block tal:define="global metaObj python:here.getMetaobj(request['id']); metaObjRecordSet python:int(metaObj['type']=='ZMSRecordSet')">
	<input type="hidden" name="id" tal:attributes="value request/id">
	<input type="hidden" name="lang" tal:attributes="value request/lang">

	<select id="populate_type" class="ui-helper-hidden">
		<option id="type_primitive" value="" tal:content="python:'--- %s ---'%here.getZMILangStr('ATTR_PRIMITIVE')"></option>
		<tal:block tal:repeat="type python:here.valid_datatypes">
			<option tal:attributes="value type" tal:content="type">type</option>
		</tal:block>
		<tal:block tal:condition="metaObjRecordSet">
			<option id="type_objects" value="" tal:content="python:'--- %s ---'%here.getZMILangStr('ATTR_FK')"></option>
			<tal:block tal:repeat="metaObj python:filter(lambda x: x['type']=='ZMSRecordSet' and x['package']==metaObj['package'],metaObjs)">
				<option tal:attributes="value python:metaObj['id']" tal:content="python:here.display_type(request,metaObj['id'])">type</option>
			</tal:block>
		</tal:block>
		<tal:block tal:condition="not:metaObjRecordSet">
			<option id="type_metadata" value="" tal:content="python:'--- %s ---'%here.getZMILangStr('TAB_METADATA')"></option>
			<tal:block tal:repeat="metaAttrId python:here.getMetadictAttrs()">
				<option tal:attributes="value metaAttrId" tal:content="python:here.getMetadictAttr(metaAttrId)['name']">type</option>
			</tal:block>
			<option id="type_objects" value="" tal:content="python:'--- %s ---'%here.getZMILangStr('ATTR_OBJECTS')"></option>
			<tal:block tal:repeat="metaObj python:filter(lambda x: x['type']!='ZMSPackage',metaObjs)">
				<option tal:attributes="value python:metaObj['id']" tal:content="python:here.display_type(request,metaObj['id'])">type</option>
			</tal:block>
			<option id="type_objects_sequence" value="" tal:content="python:'--- %s ---'%here.getZMILangStr('ATTR_SEQUENCE')"></option>
			<option value="*" tal:content="python:'%s (*)'%here.getZMILangStr('ATTR_CUSTOM')">*</option>
		</tal:block>
		<option id="type_zope" value="" tal:content="python:'--- %s ---'%'Zope'"></option>
		<tal:block tal:repeat="type python:here.valid_zopetypes">
			<option tal:attributes="value type" tal:content="type">type</option>
		</tal:block>
	</select>

	<legend>
		<i tal:condition="python:metaObj.get('acquired')" class="icon-share" title="acquired"></i>
		<tal:block tal:content="structure python:here.display_icon(request,metaObj['id'])">the icon</tal:block> 
		<tal:block tal:content="python:metaObj['name']">Name</tal:block>
	</legend>
	<div class="control-group">
		<label for="obj_name" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</span></label>
		<div class="controls"><input type="text" id="obj_name" name="obj_name" tal:attributes="value python:metaObj['name']"></div><!-- .controls -->
	</div><!-- .control-group -->
	<div class="control-group">
		<label for="obj_revision" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_VERSION')">Version</span></label>
		<div class="controls"><input type="text" id="obj_revision" name="obj_revision" size="6" tal:attributes="value python:metaObj.get('revision','0.0.0')"></div><!-- .controls -->
	</div><!-- .control-group -->
	<div class="control-group">
		<label for="obj_type" class="control-label mandatory"><span tal:content="python:here.getZMILangStr('ATTR_TYPE')">Type</span></label>
		<div class="controls">
			<select id="obj_type" name="obj_type">
				<tal:block tal:repeat="objtype python:here.valid_objtypes">
					<option tal:attributes="value objtype; selected python:['','selected'][int(metaObj['type']==objtype)]" tal:content="python:here.getZMILangStr('SOTYPE_%s'%objtype.upper())">objtype</option>
				</tal:block>
			</select>
		</div><!-- .controls -->
	</div><!-- .control-group -->
	<div class="control-group">
		<label for="obj_package" class="control-label"><span tal:content="python:here.getZMILangStr('SOTYPE_ZMSPACKAGE')">Package</span></label>
		<div class="controls">
			<select class="input-xxlarge" id="obj_package" name="obj_package">
				<tal:block tal:repeat="metaObjPackage metaObjPackages">
					<option tal:attributes="value metaObjPackage; selected python:['','selected'][int(metaObj.get('package')==metaObjPackage)]" tal:content="metaObjPackage">metaObjPackage</option>
				</tal:block>
			</select>
		</div><!-- .controls -->
	</div><!-- .control-group -->

	<div class="control-group">
		<div class="controls">
			<button tal:condition="python:not metaObj['acquired']" type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_SAVE')" tal:content="python:here.getZMILangStr('BTN_SAVE')">Save</button>
			<button tal:condition="python:metaObj['acquired']" type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_COPY')" tal:content="python:here.getZMILangStr('BTN_COPY')">Copy</button>
			<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_BACK')" tal:content="python:here.getZMILangStr('BTN_BACK')">Back</button>
		</div><!-- .controls -->
	</div><!-- .control-group -->

<tal:block tal:condition="python:not metaObj['acquired']">

	<table class="table table-striped table-bordered zmi-sortable">
		<colgroup>
			<col width="6em"/>
			<col width="1em"/>
			<col/>
			<col/>
			<col/>
			<col width="1em"/>
			<col width="1em"/>
			<col width="1em"/>
		</colgroup>
		<thead>
			<tr>
				<th><img src="/misc_/zms/spacer.gif" style="width:6em;height:1em;"/></th>
				<th><img src="/misc_/zms/spacer.gif" style="width:1em;height:1em;"/></th>
				<th tal:content="python:here.getZMILangStr('ATTR_ID')">Id</th>
				<th tal:content="python:here.getZMILangStr('ATTR_DISPLAY')">Display</th>
				<th tal:content="python:here.getZMILangStr('ATTR_TYPE')">Type</th>
				<th tal:attributes="title python:here.getZMILangStr('ATTR_MANDATORY')"><i class="icon-exclamation-sign"></i></th>
				<th tal:condition="metaObjRecordSet" colspan="2" align="center" tal:attributes="title python:'%s (%s)'%(here.getZMILangStr('ATTR_DISPLAY'),here.getZMILangStr('ATTR_COL'))"><i class="icon-columns"></i></th>
				<th tal:condition="not:metaObjRecordSet" tal:attributes="title python:here.getZMILangStr('ATTR_MULTILANG')"><i class="icon-globe"></i></th>
				<th tal:condition="not:metaObjRecordSet" tal:attributes="title python:here.getZMILangStr('ATTR_REPETITIVE')"><i class="icon-list-ol"></i></th>
				<th></th>
				<th></th>
			<tr>
		</thead>
		<tbody tal:define="global objAttrIds python:here.getMetaobjAttrIds(metaObj['id'])">
			<tr tal:repeat="objAttrId objAttrIds">
				<tal:block tal:define="global objAttr python:here.getMetaobjAttr(metaObj['id'],objAttrId,syncTypes=['*']); isMetaDictAttr python:int(objAttr['meta_type'] not in [0,'',False,None])">
					<td>
						<img class="grippy" src="/misc_/zms/spacer.gif" />
						<input type="hidden" name="old_ids:list" tal:attributes="value objAttr/id" />
						<select class="zmi-sort">
							<option tal:repeat="i python:range(0,len(objAttrIds))" tal:attributes="selected python:['','selected'][int(i==objAttrIds.index(objAttrId))]" tal:content="python:i+1">i+1</option>
						</select>
					</td>
					<td>
						<div class="btn-group">
							<span class="btn" tal:attributes="onclick python:'javascript:zmiDeleteObjBtnClick(this,{btn:\'delete\',key:\'attr\',attr_id:\'%s\'})'%objAttrId; title python:here.getZMILangStr('BTN_DELETE')"><i class="icon-remove"></i></span>
						</div>
					</td>
					<tal:block tal:condition="python:objAttr['type'] in ['interface']">
						<td colspan="7">
							<input type="hidden" tal:attributes="name python:'attr_id_%s'%objAttr['id']; value python:objAttr['id']">
							<input type="hidden" tal:attributes="name python:'attr_type_%s'%objAttr['id']; value python:objAttr['type']">
							<div class="single-line"><textarea tal:attributes="name python:'attr_name_%s'%objAttr['id']" tal:content="objAttr/name">name</textarea></div>
						</td>
					</tal:block>
					<tal:block tal:condition="python:objAttr['type'] not in ['interface']">
						<td><input type="text" tal:attributes="name python:'attr_id_%s'%objAttrId; value python:objAttr['id']; class python:['','zmi-element-disabled'][isMetaDictAttr]"></td>
						<td><input type="text" tal:attributes="name python:'attr_name_%s'%objAttrId; value python:objAttr['name']; class python:['','zmi-element-disabled'][isMetaDictAttr]"></td>
						<tal:block tal:condition="python:objAttr['type'] in ['method','py','zpt']+here.valid_zopetypes">
							<td colspan="5">
								<input type="hidden" tal:attributes="name python:'attr_type_%s'%objAttr['id']; value python:objAttr['type']" />
								<div class="single-line"><img class="zmi-element-key" src="/misc_/zms/btn_key.gif" /><textarea tal:attributes="name python:'attr_custom_%s'%objAttr['id']; title python:'%s (%s)'%(objAttr['id'],objAttr['type'])" tal:content="python:objAttr['custom']">custom</textarea></div>
							</td>
						</tal:block>
						<tal:block tal:condition="python:objAttr['type'] in ['resource']">
							<td colspan="5">
								<input type="hidden" tal:attributes="name python:'attr_type_%s'%objAttr['id']; value python:objAttr['type']">
								<input type="file" tal:attributes="name python:'attr_custom_%s'%objAttr['id']">
								<tal:block tal:condition="python:objAttr.get('custom')">
									<input type="checkbox" tal:attributes="name python:'attr_custom_%s_active'%objAttr['id']" value="1" checked="checked">
									<a tal:attributes="href python:objAttr['custom'].absolute_url(); title python:here.getDataSizeStr(objAttr['custom'].get_size())" target="_blank">
										<img tal:attributes="src python:here.getMimeTypeIconSrc(objAttr['custom'].content_type); title python:objAttr['custom'].content_type" />
										<tal:block tal:content="python:objAttr['custom'].title">title</tal:block>
									</a>
								</tal:block>
							</td>
						</tal:block>
						<tal:block tal:condition="python:objAttr['type'] not in ['method','py','resource','zpt']+here.valid_zopetypes">
							<td>
								<select tal:attributes="name python:'attr_type_%s'%objAttrId; class python:['','zmi-element-disabled'][isMetaDictAttr]">
									<option tal:attributes="value python:objAttr['type']" selected="selected">
										<tal:block tal:condition="python:objAttr['type'] in here.valid_datatypes" tal:content="python:objAttr['type']">type</tal:block>
										<tal:block tal:condition="python:objAttr['type'] == '*'" tal:content="python:'%s (*)'%here.getZMILangStr('ATTR_CUSTOM')">type</tal:block>
										<tal:block tal:condition="python:objAttr['type'] in metaObjIds" tal:content="python:here.getMetaobj(objAttr['type'])['name']">type</tal:block>
									</option>
								</select>
							</td>
							<td align="center"><input type="checkbox" tal:attributes="name python:'attr_mandatory_%s:int'%objAttr['id']; checked python:['','checked'][int(objAttr.get('mandatory',0)==1)]" value="1"></td>
							<td tal:condition="metaObjRecordSet" colspan="2" align="center"><input type="checkbox" tal:attributes="name python:'attr_custom_%s:int'%objAttr['id']; checked python:['','checked'][int(objAttr.get('custom',0)==1)]" value="1"></td>
							<td tal:condition="not:metaObjRecordSet" align="center"><input type="checkbox" tal:attributes="name python:'attr_multilang_%s:int'%objAttr['id']; checked python:['','checked'][int(objAttr.get('multilang',0)==1)]" value="1"></td>
							<td tal:condition="not:metaObjRecordSet" align="center"><input type="checkbox" tal:attributes="name python:'attr_repetitive_%s:int'%objAttr['id']; checked python:['','checked'][int(objAttr.get('repetitive',0)==1)]" value="1"></td>
							<td>
								<div class="single-line" tal:condition="python:objAttr['type'] in ['autocomplete','multiautocomplete','multiselect','select','*']">
									<img class="zmi-element-key" src="/misc_/zms/btn_key.gif" />
									<textarea tal:attributes="name python:'attr_keys_%s'%objAttr['id']; title python:here.getZMILangStr('ATTR_KEYS'); class python:['','zmi-element-disabled'][isMetaDictAttr]" tal:content="python:'\n'.join(objAttr['keys'])">keys</textarea>
								</div>
								<div class="single-line zmi-element-default" tal:condition="python:objAttr['type'] in ['boolean']">
									<select tal:attributes="name python:'attr_keys_%s'%objAttr['id']; title python:'Default'; class python:['','zmi-element-disabled'][isMetaDictAttr]">
										<tal:block tal:repeat="option python:[True,False]">
											<option tal:attributes="value option" tal:content="option">option</option>
										</tal:block>
									</select>
								</div>
								<div class="single-line zmi-element-default" tal:condition="python:objAttr['type'] not in ['boolean','autocomplete','multiautocomplete','multiselect','select','*'] and objAttr['type'] in here.valid_types+['constant']">
									<textarea tal:attributes="name python:'attr_keys_%s'%objAttr['id']; title python:'Default'; class python:['','zmi-element-disabled'][isMetaDictAttr]" tal:content="objAttr/custom">custom</textarea>
								</div>
							</td>
						</tal:block>
						<td></td>
					</tal:block>
				</tal:block>
			</tr>
			<tr>
				<td></td>
				<td><i class="icon-plus"></i></td>
				<td><input type="text" name="attr_id"></td>
				<td><input type="text" name="attr_name"></td>
				<td>
					<select name="_type">
						<option tal:content="python:'--- %s ---'%here.getZMILangStr('ATTR_PRIMITIVE')">type</option>
					</select>
				</td>
				<td align="center"><input type="checkbox" name="_mandatory:int" value="1"></td>
				<td tal:condition="metaObjRecordSet" colspan="2" align="center"><input type="checkbox" name="_custom:int" value="1"></td>
				<td tal:condition="not:metaObjRecordSet" align="center"><input type="checkbox" name="_multilang:int" value="1" checked="checked"></td>
				<td tal:condition="not:metaObjRecordSet" align="center"><input type="checkbox" name="_repetitive:int" value="1"></td>
				<td colspan="2">
					<input type="hidden" name="key" value="attr">
					<button name="btn" type="submit" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_INSERT')" tal:content="python:here.getZMILangStr('BTN_INSERT')">Insert</button>
				</td>
			</tr>
		</tbody>
	</table>

	<div class="control-group">
		<div class="controls">
			<button type="submit" name="btn" class="btn btn-primary" tal:attributes="value python:here.getZMILangStr('BTN_SAVE')" tal:content="python:here.getZMILangStr('BTN_SAVE')">Save</button>
			<button type="submit" name="btn" class="btn" tal:attributes="value python:here.getZMILangStr('BTN_BACK')" tal:content="python:here.getZMILangStr('BTN_BACK')">Back</button>
		</div><!-- .controls -->
	</div><!-- .control-group -->

</tal:block>

</tal:block>
</form>

<form tal:condition="python:not request.get('id')" class="form-horizontal" action="manage_changeProperties" method="post" enctype="multipart/form-data">
	<input type="hidden" name="lang" tal:attributes="value request/lang">
	<legend tal:content="python:here.getZMILangStr('TAB_METAOBJ')">Metaobj</legend>
	<p class="well well-small" tal:content="structure python:here.getZMILangStr('MSG_METAOBJ')">well</p>
	<table class="table table-striped table-bordered">
	<colgroup>
		<col width="40"/>
	</colgroup>
	<thead>
		<tr>
			<th>
				<div class="btn-group">
					<span class="btn" tal:attributes="title python:'%s/%s'%(here.getZMILangStr('BTN_SLCTALL'),here.getZMILangStr('BTN_SLCTNONE'))" onclick="zmiToggleSelectionButtonClick(this)"><i class="icon-check"></i></span>
				</div>
			</th>
			<th colspan="2">
				<div class="btn-group">
					<span class="btn btn-primary" tal:attributes="title python:here.getZMILangStr('BTN_INSERT')+'...'" onclick="$('#insertObj').dialog({modal:true,title:$(this).attr('title'),height:'auto',width:'auto'})"><i class="icon-plus"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_DELETE')+'...'" onclick="zmiDeleteObjBtnClick(this,{btn:getZMILangStr('BTN_DELETE'),key:'obj'})"><i class="icon-remove"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_ACQUIRE')+'...'" onclick="zmiIframe('manage_main_acquire',{lang:getZMILang()},{iframe:true,width:'480',height:'640',title:$(this).attr('title')})" tal:condition="python:here.getPortalMaster() is not None"><i class="icon-share"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_IMPORT')+'...'" onclick="zmiIframe('manage_main_import',{lang:getZMILang()},{iframe:true,width:'480',height:'640',title:$(this).attr('title')})"><i class="icon-upload-alt"></i></span>
					<span class="btn" tal:attributes="title python:here.getZMILangStr('BTN_EXPORT')+'...'" onclick="zmiExportBtnClick(this)"><i class="icon-download-alt"></i></span>
				</div>
			</th>
		</tr>
	</thead>
	<tbody>
	<tal:block tal:repeat="metaObjPackage metaObjPackages">
		<tr tal:define="global metaObj python:here.getMetaobj(metaObjPackage)">
			<td>
				<input tal:condition="python:metaObjPackage" type="checkbox" name="ids:list" tal:attributes="value metaObjPackage">
			</td>
			<td colspan="2">
				<a tal:condition="python:metaObjPackage" tal:attributes="href python:'?lang=%s&id=%s'%(request['lang'],metaObjPackage)">
					<i class="icon-briefcase"></i>
					<strong tal:content="metaObjPackage">the id</strong>
				</a>
				<tal:block tal:condition="python:not metaObjPackage">
					<i class="icon-briefcase"></i>
					<strong>[default package]</strong>
				</tal:block>
				<tal:block tal:content="python:metaObj.get('revision',['','0.0.0'][int(len(metaObjPackage)>0)])">the revision</tal:block>
			</td>
		</tr>
		<tal:block tal:repeat="metaObj metaObjs">
			<tr tal:condition="python:metaObj['type']!='ZMSPackage' and metaObj.get('package')==metaObjPackage">
				<td>
					<input type="checkbox" name="ids:list" tal:attributes="value python:metaObj['id']">
				</td>
				<td></td>
				<td>
					<span tal:attributes="title python:metaObj['id']">
						<i tal:condition="python:metaObj.get('acquired')" class="icon-share" title="acquired"></i>
						<a tal:attributes="href python:'manage_analyze?lang=%s&id=%s'%(request['lang'],metaObj['id']); title python:'%s - Click for content analysis...'%metaObj['id']" target="_blank" tal:content="structure python:here.display_icon(request,metaObj['id'])">the icon</a>
						<a tal:attributes="href python:'?lang=%s&id=%s'%(request['lang'],metaObj['id'])" tal:content="metaObj/name">the name</a>
						<tal:block tal:content="python:metaObj.get('revision','0.0.0')">the revision</tal:block>
						(<tal:block tal:content="python:here.getZMILangStr('SOTYPE_%s'%metaObj['type'].upper())">the type</tal:block>)
					</span>
				</td>
			</tr>
		</tal:block>
	</tal:block>
	</tbody>
	</table>
</form>

</tal:block>

<div style="clear:both;">&nbsp;</div>
</div><!-- #zmi-tab -->
<tal:block tal:content="structure python:here.zmi_body_footer(here,request)">zmi_body_footer</tal:block>
</body>
</html>